(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1052:function(e,t,n){"use strict";var r={data:function(){return{pagination:{current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["5","10","15","20","30","40"],showTotal:function(e){return" 共".concat(e,"条")}}}},methods:{resetPage:function(){this.pagination.current=1,this.pagination.total=0},handleTableChange:function(e){this.pagination=e,this.getListHand&&this.getListHand()},handlePaginatChange:function(e,t){this.pagination.current=e,this.pagination.pageSize=t,this.getListHand&&this.getListHand(),this.$backScrollTop()},setTotalHandle:function(data,e,t){this.pagination.total=+data.data.total,this.pagination.total&&!data.data[e].length?(this.pagination.current=this.pagination.current-1,this.getListHand&&this.getListHand()):t()}}},o=n(18),component=Object(o.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null);t.a=component.exports},1059:function(e,t,n){"use strict";function r(source,e){if(null==source)return{};var t,i,n=function(source,e){if(null==source)return{};var t,i,n={},r=Object.keys(source);for(i=0;i<r.length;i++)t=r[i],e.indexOf(t)>=0||(n[t]=source[t]);return n}(source,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(source);for(i=0;i<r.length;i++)t=r[i],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(source,t)&&(n[t]=source[t])}return n}n.d(t,"a",(function(){return r}))},1062:function(e,t,n){"use strict";n.d(t,"M",(function(){return d})),n.d(t,"w",(function(){return m})),n.d(t,"k",(function(){return f})),n.d(t,"n",(function(){return h})),n.d(t,"v",(function(){return v})),n.d(t,"F",(function(){return _})),n.d(t,"i",(function(){return y})),n.d(t,"u",(function(){return C})),n.d(t,"r",(function(){return k})),n.d(t,"q",(function(){return z})),n.d(t,"s",(function(){return $})),n.d(t,"J",(function(){return x})),n.d(t,"I",(function(){return O})),n.d(t,"E",(function(){return w})),n.d(t,"N",(function(){return I})),n.d(t,"l",(function(){return S})),n.d(t,"S",(function(){return j})),n.d(t,"d",(function(){return M})),n.d(t,"Q",(function(){return T})),n.d(t,"R",(function(){return D})),n.d(t,"f",(function(){return L})),n.d(t,"x",(function(){return H})),n.d(t,"h",(function(){return R})),n.d(t,"e",(function(){return A})),n.d(t,"g",(function(){return P})),n.d(t,"O",(function(){return F})),n.d(t,"P",(function(){return N})),n.d(t,"D",(function(){return E})),n.d(t,"A",(function(){return B})),n.d(t,"C",(function(){return Y})),n.d(t,"B",(function(){return K})),n.d(t,"a",(function(){return G})),n.d(t,"c",(function(){return V})),n.d(t,"j",(function(){return Q})),n.d(t,"b",(function(){return U})),n.d(t,"m",(function(){return W})),n.d(t,"p",(function(){return J})),n.d(t,"G",(function(){return X})),n.d(t,"H",(function(){return Z})),n.d(t,"o",(function(){return ee})),n.d(t,"z",(function(){return te})),n.d(t,"K",(function(){return ne})),n.d(t,"L",(function(){return ae})),n.d(t,"y",(function(){return re})),n.d(t,"t",(function(){return ie}));var r=n(1059),o=n(19),c=n(31),l=n.n(c),d=function(e){return o.a.post("/school/lecturer/course/previewTime/".concat(e.courseId,"/").concat(e.liveId),l.a.stringify(e.info))},m=function(e){return o.a.post("/school/lecturer/play/live/".concat(e.courseId,"/").concat(e.liveId))},f=function(e){return o.a.post("/school/lecturer/course/create",l.a.stringify(e))},h=function(e){return o.a.post("/school/lecturer/course/save/".concat(e.id),l.a.stringify(e))},v=function(e){return o.a.post("/school/lecturer/course/list",l.a.stringify(e))},_=function(e){return o.a.post("/school/lecturer/course/delete/".concat(e))},y=function(e){return o.a.post("/school/lecturer/course/status/".concat(e.courseId,"/").concat(e.onStore))},C=function(e){return o.a.post("/school/lecturer/course/info/".concat(e))},k=function(e){return o.a.post("/school/lecturer/series/list",l.a.stringify(e))},z=function(e){return o.a.post("/school/lecturer/series/child/list/".concat(e.courseId),l.a.stringify(e.info))},$=function(e){return o.a.post("/school/lecturer/series/chapter/list/".concat(e))},x=function(e){return o.a.post("/school/lecturer/series/chapter/save/".concat(e.courseId),e.info,{headers:{"Content-Type":"application/json;charset=utf-8"}})},O=function(e){return o.a.post("/school/lecturer/series/child/save/".concat(e.courseId),l.a.stringify(e.info))},w=function(e){return o.a.post("/school/lecturer/series/child/delete/".concat(e.courseId,"/").concat(e.liveId))},I=function(e){return o.a.post("/school/lecturer/series/child/status/".concat(e.courseId,"/").concat(e.liveId,"/").concat(e.onStore))},S=function(){return o.a.post("/school/lecturer/home/index")},j=function(e){return o.a.post("/school/lecturer/home/trend",l.a.stringify(e))},M=function(e){return o.a.post("/school/lecturer/home/conversion",l.a.stringify(e))},T=function(e){return o.a.post("/school/lecturer/student/list",l.a.stringify(e))},D=function(e){var t=e.suserId,n=Object(r.a)(e,["suserId"]);return o.a.post("/school/lecturer/student/push/".concat(t),l.a.stringify(n))},L=function(e){return o.a.post("/school/lecturer/coupon/list",l.a.stringify(e))},H=function(e){return o.a.post("/school/lecturer/data/course/simple",l.a.stringify(e))},R=function(e){var t=e.courseId,n=Object(r.a)(e,["courseId"]);return o.a.post("/school/lecturer/coupon/save/".concat(t),l.a.stringify(n))},A=function(e){var t=e.courseId,n=e.couponId;return o.a.post("/school/lecturer/coupon/".concat(t,"/delete/").concat(n))},P=function(e){var t=e.couponId,n=Object(r.a)(e,["couponId"]);return o.a.post("/school/lecturer/coupon/effect/".concat(t),l.a.stringify(n))},F=function(){return o.a.post("/school/lecturer/promotion/statData")},N=function(e){return o.a.post("/school/lecturer/promotion/statList",l.a.stringify(e))},E=function(e){var t=e.courseId,n=Object(r.a)(e,["courseId"]);return o.a.post("/school/lecturer/promotion/".concat(t,"/order/list"),l.a.stringify(n))},B=function(e){return o.a.post("/school/lecturer/promotion/courses",l.a.stringify(e))},Y=function(e){return o.a.post("/school/lecturer/promotion/".concat(e,"/config/info"))},K=function(e){var t=e.courseId,n=Object(r.a)(e,["courseId"]);return o.a.post("/school/lecturer/promotion/".concat(t,"/config/save"),l.a.stringify(n))},G=function(e){return o.a.post("/school/lecturer/camp/list",l.a.stringify(e))},V=function(e){return o.a.post("/school/lecturer/camp/save",l.a.stringify(e))},Q=function(e){return o.a.post("/school/lecturer/course/copy/".concat(e))},U=function(e){var t=e.courseId,n=e.display;return o.a.post("/school/lecturer/camp/camp/".concat(t,"/").concat(n))},W=function(e){return o.a.post("/school/lecturer/series/live/documentUpload",e)},J=function(e){return o.a.post("/school/lecturer/activity/call/list",l.a.stringify(e))},X=function(e){return o.a.post("/school/lecturer/activity/call/save",l.a.stringify(e))},Z=function(e){var t=e.id,n=e.onStore;return o.a.post("/school/lecturer/activity/call/status/".concat(t,"/").concat(n))},ee=function(e){var t=e.activityId,n=Object(r.a)(e,["activityId"]);return o.a.post("/school/lecturer/activity/record/list/".concat(t),l.a.stringify(n))},te=function(e){return o.a.post("/school/lecturer/activity/tuan/list",l.a.stringify(e))},ne=function(e){return o.a.post("/school/lecturer/activity/tuan/save",l.a.stringify(e))},ae=function(e){var t=e.courseId,n=e.onStore;return o.a.post("/school/lecturer/activity/tuan/status/".concat(t,"/").concat(n))},re=function(e){var t=e.courseId,n=Object(r.a)(e,["courseId"]);return o.a.post("/school/lecturer/activity/tuan/record/list/".concat(t),l.a.stringify(n))},ie=function(e){return o.a.post("/school/lecturer/data/course/activity/simple",l.a.stringify(e))}},1125:function(e,t,n){},1271:function(e,t,n){"use strict";var r=n(1125);n.n(r).a},1277:function(e,t,n){"use strict";n(75),n(45),n(42),n(30),n(54);var r=n(33);function o(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var c={props:{data:{type:Array,default:function(){return[]}},activeKey:{type:String,default:""}},data:function(){return{type:""}},created:function(){!this.activeKey&&this.init()},methods:{init:function(){this.type=this.data.length&&this.data[0].key},handleChange:function(e){this.activeKey||(this.type=e.item.key),this.$emit("change",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},e))},_renderTitle:function(){var e=this,t=this.$createElement;return t("div",{class:"tabs"},[this.data.map((function(n,r){return t("div",{class:["tabItem",e.activeKey===n.key||e.type===n.key?"activeBg":null],on:{click:function(){e.handleChange({item:n,index:r})}}},[t("span",{class:[e.activeKey===n.key||e.type===n.key?"active":null]},n.title)])}))])},_renderSlot:function(){var e=this;return(0,this.$createElement)("div",{},[this.data.map((function(slot){if(e.activeKey===slot.key||e.type===slot.key)return e.$slots[slot.key]}))])},_renderTpl:function(){return(0,this.$createElement)("div",[this._renderTitle(),this._renderSlot()])}},render:function(){return this._renderTpl()}},l=(n(1271),n(18)),component=Object(l.a)(c,void 0,void 0,!1,null,"96cbc47e",null);t.a=component.exports},1475:function(e,t,n){e.exports=n.p+"img/toolQrCode.a0b6a17.png"},1476:function(e,t,n){},1477:function(e,t,n){e.exports=n.p+"img/ask.1c7a762.png"},1478:function(e,t,n){e.exports=n.p+"img/upload.ae530bb.png"},1479:function(e,t,n){},1480:function(e,t,n){},1481:function(e,t,n){},1482:function(e,t,n){},1483:function(e,t,n){},2075:function(e,t,n){"use strict";var r=n(1476);n.n(r).a},2076:function(e,t,n){"use strict";var r=n(1479);n.n(r).a},2077:function(e,t,n){"use strict";var r=n(1480);n.n(r).a},2078:function(e,t,n){"use strict";var r=n(1481);n.n(r).a},2079:function(e,t,n){"use strict";var r=n(1482);n.n(r).a},2080:function(e,t,n){"use strict";var r=n(1483);n.n(r).a},2181:function(e,t,n){"use strict";n.r(t);n(75),n(45),n(54);var r=n(33),o=(n(92),n(93),n(91),n(106),n(1059)),c=(n(42),n(30),n(44),n(17)),l=(n(138),n(1105)),d=n(20),m=n(21),f=n.n(m),h=n(1062),v=n(1052);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var C={layout:"organizers",components:{QrcodeVue:l.a},mixins:[v.a],data:function(){return{data:[],remark:"",form:this.$form.createForm(this,{}),feecond:2,feeVal:0,restriction:"0",couponStatus:!1,title:1,id:0,distributeStatus:!1,identify:"",type:1,moment:f.a,loading:!1,effective:"0"}},computed:{couponData:function(){return[{text:this.$t("organizers/marketManage_18",{zh:"优惠券名称"}),required:!0,type:"INPUT",name:"remark",formType:"input",message:this.$t("organizers/marketManage_48",{zh:"优惠券名称不能为空"})},{text:this.$t("organizers/marketManage_25",{zh:"优惠劵金额"}),required:!0,type:"INPUT",name:"money",formType:"number",message:this.$t("organizers/marketManage_26",{zh:"优惠卷不能为空"})},{text:this.$t("organizers/marketManage_27",{zh:"数量"}),required:!0,type:"INPUT",name:"total",formType:"number",message:this.$t("organizers/marketManage_28",{zh:"数量不能为空"})},{text:this.$t("organizers/marketManage_29",{zh:"使用课程"}),required:!0,type:"SELECT",name:"courseId",option:[],message:this.$t("organizers/marketManage_30",{zh:"使用课程不能为空"})},{text:this.$t("organizers/marketManage_31",{zh:"领取有效期"}),required:!0,type:"PICKER",value:[],name:"draw",message:this.$t("organizers/marketManage_32",{zh:"领取有效期不能为空"})}]},columns:function(){return[{title:this.$t("organizers/marketManage_18",{zh:"优惠券名称"}),dataIndex:"remark",key:"remark",align:"center"},{title:this.$t("organizers/marketManage_17",{zh:"优惠券金额"}),dataIndex:"money",key:"money",align:"center"},{title:"优惠券限制",dataIndex:"restriction",key:"restriction",align:"center",scopedSlots:{customRender:"restriction"}},{title:this.$t("organizers/marketManage_19",{zh:"有效期"}),dataIndex:"valid",key:"valid",scopedSlots:{customRender:"valid"},align:"center",width:"20%"},{title:this.$t("organizers/marketManage_20",{zh:"总量"}),dataIndex:"total",key:"total",align:"center"},{title:this.$t("organizers/marketManage_21",{zh:"领取数量"}),dataIndex:"drawNumber",key:"drawNumber",align:"center"},{title:this.$t("organizers/marketManage_22",{zh:"使用数量"}),dataIndex:"useNumber",key:"useNumber",align:"center"},{title:this.$t("organizers/marketManage_47",{zh:"使用课程"}),dataIndex:"ownName",key:"ownName",align:"center",width:"10%"},{title:this.$t("organizers/marketManage_23",{zh:"领取链接"}),dataIndex:"link",key:"link",scopedSlots:{customRender:"link"},align:"center",width:"15%"},{title:this.$t("organizers/marketManage_24",{zh:"领取二维码"}),dataIndex:"qrcode",key:"qrcode",scopedSlots:{customRender:"qrcode"},align:"center"},{title:this.$t("organizers/traineesManage_16",{zh:"操作"}),dataIndex:"handle",key:"handle",scopedSlots:{customRender:"handle"},width:200,align:"center"}]}},mounted:function(){this.init()},methods:{searchData:function(){this.pagination.current=1,this.pagination.pageSize=10,this.getListHand()},filterOption:function(input,option){return option.componentOptions.propsData.label.indexOf(input)>-1},init:function(){this.getListHand(),this.getCourseSimple()},handleFee:function(e){this.feeVal=e.target.value.replace(/^(0+)|[^\d]+/g,"")},addCoupons:function(){this.title=1,this.couponStatus=!0},getListHand:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={page:e.pagination.current,pageSize:e.pagination.pageSize,remark:e.remark},t.next=3,Object(h.f)(n);case 3:r=t.sent,0===(data=r.data).code&&e.setTotalHandle(data,"entries",(function(){e.data=data.data.entries}));case 6:case"end":return t.stop()}}),t)})))()},getCourseSimple:function(){var e=this;Object(h.x)({type:2}).then((function(t){0===t.data.code&&(e.couponData[3].option=t.data.data)}))},emit:function(e){var t=this;this.title=2,this.couponStatus=!0,this.id=e.id,e.feeCond>0&&(this.feeVal=e.feeCond,this.feecond=1),e.expires>0?this.effective="1":this.effective="0",this.$nextTick((function(){t.form.setFieldsValue({money:e.money,remark:e.remark,total:e.total,expires:e.expires,courseId:e.ownId,valid:0===e.expires?[t.$moment(1e3*e.start),t.$moment(1e3*e.end)]:"",draw:[t.$moment(1e3*e.drawStart),t.$moment(1e3*e.drawEnd)]})}))},handleCancel:function(){this.form.resetFields(),this.feeVal=0,this.feecond=2,this.couponStatus=!1},deleteCoupon:function(e){var t=this,n=e.ownId,r=e.id;this.$confirm({title:"".concat(this.$t("organizers/marketManage_35",{zh:"您确定要删除该条优惠券吗"})),onOk:function(){Object(h.e)({courseId:n,couponId:r}).then((function(e){var n=e.data,data=n.data;0===n.code&&(1===data?(t.$message.success(t.$t("organizers/marketManage_36",{zh:"删除成功"})),t.handleCancel(),t.getListHand()):0===data?t.$message.error(t.$t("organizers/marketManage_37",{zh:"请求失败"})):-1===data?t.$message.error(t.$t("organizers/marketManage_38",{zh:"参数缺失"})):-2===data&&t.$message.error(t.$t("organizers/marketManage_39",{zh:"已领优惠劵不能删除"})))}))}})},dateToMs:function(e){return new Date(e).getTime()/1e3},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,n){if(!e){var r=n.draw,c=n.valid,l=Object(o.a)(n,["draw","valid"]),d=t.restriction,m=t.dateToMs(r[1]),f=t.dateToMs(r[0]),h=c&&t.dateToMs(c[1]),v=c&&t.dateToMs(c[0]);if(1===t.feecond&&!t.feeVal)return t.$message.error(t.$t("organizers/marketManage_40",{zh:"购买课程金额不能为空"}));if(n.expires)if(n.expires.toString().includes("."))return t.$message.error("失效小时不能输入小数点");1===t.title?t.couponSaveOrUpdata(y(y({},l),{},{restriction:d,start:v,end:h,drawStart:f,drawEnd:m,feeCond:t.feeVal})):t.couponSaveOrUpdata(y(y({},l),{},{restriction:d,start:v,end:h,drawStart:f,drawEnd:m,feeCond:t.feeVal,id:t.id}),t.$t("organizers/marketManage_41",{zh:"更新成功"}))}}))},couponSaveOrUpdata:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.$t("organizers/marketManage_42",{zh:"新增成功"});Object(h.h)(y({},e)).then((function(e){var r=e.data,code=r.code,data=r.data;0===code&&(1===data?(t.$message.success(n),t.handleCancel(),t.getListHand()):0===data?t.$message.error(t.$t("organizers/marketManage_37",{zh:"请求失败"})):-1===data&&t.$message.error(t.$t("organizers/marketManage_43",{zh:"优惠券数量修改不能少于已领取的数量"})))}))},handleFeeChange:function(e){this.feecond=e.target.value},validDate:function(data){return this.$changeTime(data,"YYYY-MM-DD HH:mm:ss")},createLink:function(e){return d.a.LINK.ais_pc+"/personal/mycoupon/"+e},createQrLink:function(e){return d.a.LINK.ais_h5+"/personal/mycoupon/"+e},copy:function(){this.$message.success(this.$t("organizers/marketManage_44",{zh:"复制成功"}))},downloadQr:function(){var e=this.$refs.qrcode.$refs["qrcode-vue"].toDataURL("image/png"),a=document.createElement("a");a.href=e,a.download=this.$t("organizers/marketManage_45",{zh:"优惠券二维码"}),a.click()},preview:function(){window.open(this.createLink(this.identify))},toCouponManage:function(e){var t=e.id;return"/organizers/couponManagement/".concat(t)},qrModalDownload:function(e){2===e&&this.downloadQr(),this.distributeStatus=!1}}},k=(n(2075),n(18)),z=Object(k.a)(C,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"market"},[r("div",{staticClass:"title"},[r("span",{staticClass:"strip"}),e._v(" "),r("p",{staticClass:"text"},[e._v("\n      "+e._s(e.$t("organizers/marketManage_1",{zh:"优惠券管理"}))+"\n    ")])]),e._v(" "),r("div",{staticClass:"addCoupons"},[r("a-button",{staticClass:"btn",attrs:{type:"primary",shape:"round"},on:{click:e.addCoupons}},[e._v("\n      "+e._s(e.$t("organizers/marketManage_2",{zh:"新增优惠券"}))+"\n    ")]),e._v(" "),r("div",{staticClass:"flex"},[r("div",{staticClass:"flex"},[r("a-input",{staticClass:"ml15 textLeft",staticStyle:{width:"240px"},attrs:{allowClear:"",placeholder:"请输入优惠券名称"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),e._v(" "),r("div",{staticClass:"ml30 searchBtn",on:{click:e.searchData}},[e._v("\n        "+e._s(e.$t("financialManagement/CourseRevenue_10",{zh:"查询"}))+"\n      ")])])],1),e._v(" "),r("div",{staticClass:"couponsList"},[r("a-table",{attrs:{columns:e.columns,"data-source":e.data,rowKey:function(e){return e.id},pagination:e.pagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"valid",fn:function(text,t){return r("span",{},[e._v("\n        "+e._s(0!==t.expires?e.$t("organizers/marketManage_50",{zh:"领取后"}):"")+" "+e._s(0===t.start?t.expires:e.validDate(t.start))+" "+e._s(0===t.start?e.$t("organizers/marketManage_53",{zh:"小时后"}):"-")+" "+e._s(0===t.start?"":e.validDate(t.end))+"\n      ")])}},{key:"restriction",fn:function(text,t){return r("span",{},[e._v("\n        "+e._s(0===t.restriction?"公开":"不公开")+"\n      ")])}},{key:"link",fn:function(text,t){return r("span",{},[e._v("\n        "+e._s(1===t.restriction?"":e.createLink(t.identify))+"\n      ")])}},{key:"qrcode",fn:function(text,t){return 1!==t.restriction?r("span",{staticStyle:{cursor:"pointer"}},[r("img",{attrs:{src:n(1475),alt:e.$t("organizers/marketManage_3",{zh:"二维码"})},on:{click:function(n){e.distributeStatus=!0,e.type=2,e.identify=t.identify}}})]):e._e()}},{key:"handle",fn:function(text,t){return r("div",{staticClass:"handle"},[1!==t.restriction?r("p",{on:{click:function(n){e.distributeStatus=!0,e.identify=t.identify,e.type=1}}},[e._v("\n          "+e._s(e.$t("organizers/marketManage_4",{zh:"分发"}))+"\n        ")]):e._e(),e._v(" "),r("p",{on:{click:function(n){return e.emit(t)}}},[e._v("\n          "+e._s(e.$t("organizers/marketManage_5",{zh:"编辑"}))+"\n        ")]),e._v(" "),r("p",[r("nuxt-link",{attrs:{to:e.toCouponManage(t)}},[e._v("\n            "+e._s(e.$t("organizers/marketManage_6",{zh:"管理"}))+"\n          ")])],1),e._v(" "),r("p",{on:{click:function(n){return e.deleteCoupon(t)}}},[e._v("\n          "+e._s(e.$t("organizers/marketManage_7",{zh:"删除"}))+"\n        ")])])}}],null,!0)})],1),e._v(" "),r("div",{ref:"couponPop",staticClass:"couponPop"},[r("a-modal",{staticClass:"pop",attrs:{width:"650px",title:1===e.title?e.$t("organizers/marketManage_2",{zh:"新增优惠券"}):e.$t("organizers/marketManage_8",{zh:"编辑优惠券"}),visible:e.couponStatus,getContainer:function(){return e.$refs.couponPop},okText:1===e.title?e.$t("organizers/traineesManage_17",{zh:"确定"}):e.$t("organizers/marketManage_9",{zh:"更新"})},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[r("a-form",{attrs:{form:e.form,"wrapper-col":{span:24}}},[e._l(e.couponData,(function(t){return[r("a-form-item",{key:t.text},["INPUT"===t.type?r("div",{staticClass:"item"},[r("div",{class:[t.required?"hint":"noneReq"]},[e._v("\n                "+e._s(t.text)+"\n              ")]),e._v(" "),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.name,{rules:[{required:t.required,message:t.message}]}],expression:"[ele.name, { rules: [{ required: ele.required, message:ele.message }] }]"}],staticClass:"flexAuto",attrs:{type:t.formType,disabled:"money"===t.name&&1!==e.title}})],1):"SELECT"===t.type?r("div",{staticClass:"item"},[r("div",{class:[t.required?"hint":"noneReq"]},[e._v("\n                "+e._s(t.text)+"\n              ")]),e._v(" "),r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.name,{rules:[{required:t.required,message:t.message}]}],expression:"[ele.name, { rules: [{ required: ele.required, message:ele.message }] }]"}],attrs:{disabled:1!==e.title,"show-search":"","filter-option":e.filterOption}},e._l(t.option,(function(t){return r("a-select-option",{key:t.id,attrs:{value:t.id,label:t.name}},[r("span",[e._v(e._s(t.name))]),t.period&&t.period>0?r("span",[e._v("( 第"+e._s(t.period)+"期 )")]):e._e()])})),1)],1):r("div",{key:t.text,staticClass:"item"},[r("div",{class:[t.required?"hint":""]},[e._v("\n                "+e._s(t.text)+"\n              ")]),e._v(" "),r("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.name,{rules:[{required:t.required,message:t.message}]}],expression:"[ele.name, { rules: [{ required: ele.required, message:ele.message}] }]"}],attrs:{format:"YYYY-MM-DD HH:mm:ss","show-time":{defaultValue:[e.moment("00:00:00","HH:mm:ss"),e.moment("23:59:59","HH:mm:ss")]}}})],1)])]})),e._v(" "),r("div",{staticClass:"flex-time"},[r("div",{staticClass:"hint mr20"},[e._v("\n            "+e._s(this.$t("organizers/marketManage_33",{zh:"优惠券有效期"}))+"\n          ")]),e._v(" "),r("div",{staticClass:"radio"},[r("a-radio-group",{model:{value:e.effective,callback:function(t){e.effective=t},expression:"effective"}},[r("a-radio",{staticClass:"radioStyle",attrs:{value:"0"}},[r("span",[e._v(e._s(e.$t("organizers/marketManage_49",{zh:"固定时间"})))])]),e._v(" "),r("a-radio",{staticClass:"radioStyle",attrs:{value:"1"}},[r("span",[e._v(e._s(e.$t("organizers/marketManage_50",{zh:"领取后"})))])])],1)],1)]),e._v(" "),"1"===e.effective?r("a-form-item",{staticClass:"input-row"},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["expires",{rules:[{required:!0,message:e.$t("organizers/marketManage_57",{zh:"请输入失效时间"})}]}],expression:"['expires', { rules: [{ required: true, message: $t('organizers/marketManage_57', {zh:'请输入失效时间'}) }] }]"}],staticClass:"input",attrs:{"addon-after":"小时"}})],1):e._e(),e._v(" "),"0"===e.effective?r("a-form-item",{staticClass:"ml150"},[r("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["valid",{rules:[{required:!0,message:e.$t("organizers/marketManage_34",{zh:"优惠券有效期不能为空"})}]}],expression:"[ 'valid', { rules: [{ required: true, message: $t('organizers/marketManage_34', {zh:'优惠券有效期不能为空'}) }] }]"}],attrs:{format:"YYYY-MM-DD HH:mm:ss","show-time":{defaultValue:[e.moment("00:00:00","HH:mm:ss"),e.moment("23:59:59","HH:mm:ss")]}}})],1):e._e(),e._v(" "),r("div",{staticClass:"discount"},[r("div",{staticClass:"hint"},[e._v("\n            "+e._s(e.$t("organizers/marketManage_10",{zh:"优惠条件"}))+"\n          ")]),e._v(" "),r("div",{staticClass:"radio"},[r("a-radio-group",{staticClass:"group",attrs:{value:e.feecond,disabled:1!==e.title},on:{change:e.handleFeeChange}},[r("a-radio",{staticClass:"radioStyle",attrs:{value:1}},[r("span",[e._v(e._s(e.$t("organizers/marketManage_11",{zh:"购买课程金额满"})))]),e._v(" "),r("a-input",{staticStyle:{width:"100px",margin:"0px 10px"},attrs:{value:e.feeVal,disabled:1!==e.feecond||1!==e.title,type:"number"},on:{change:e.handleFee}}),e._v(" "),r("span",[e._v(e._s(e.$t("organizers/traineesManage_4",{zh:"元"})))])],1),e._v(" "),r("a-radio",{staticClass:"radioStyle",attrs:{value:2}},[r("span",[e._v(e._s(e.$t("organizers/marketManage_12",{zh:"无优惠条件"})))])])],1)],1)]),e._v(" "),r("div",{staticClass:"flex-time borderTop"},[r("div",{staticClass:"hint mr20"},[e._v("\n            优惠券限制\n          ")]),e._v(" "),r("div",{staticClass:"radio"},[r("a-radio-group",{model:{value:e.restriction,callback:function(t){e.restriction=t},expression:"restriction"}},[r("a-radio",{staticClass:"radioStyle",attrs:{value:"0"}},[r("span",[e._v("公开")])]),e._v(" "),r("a-radio",{staticClass:"radioStyle",attrs:{value:"1"}},[r("span",[e._v("不公开(不可转发不可复制)")])])],1)],1)])],2)],1)],1),e._v(" "),r("div",[r("a-modal",{attrs:{visible:e.distributeStatus,title:1===e.type?e.$t("organizers/marketManage_4",{zh:"分发"}):e.$t("organizers/marketManage_3",{zh:"二维码"}),footer:null},on:{cancel:function(t){e.distributeStatus=!1}}},[r("div",{directives:[{name:"show",rawName:"v-show",value:1===e.type,expression:"type === 1"}]},[r("p",{staticClass:"distributeTitle"},[e._v("\n          "+e._s(e.$t("organizers/marketManage_13",{zh:"领取链接"}))+"\n        ")]),e._v(" "),r("div",{staticClass:"distributeContent"},[r("div",{staticClass:"top"},[r("a-input",{staticClass:"height36",attrs:{value:e.createLink(e.identify),disabled:""}}),e._v(" "),r("a-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.createLink(e.identify),expression:"createLink(identify)",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.copy,expression:"copy",arg:"success"}],staticClass:"copy height36"},[e._v("\n              "+e._s(e.$t("organizers/marketManage_14",{zh:"复制链接"}))+"\n            ")])],1),e._v(" "),r("div",{staticClass:"bottom"},[r("div",{staticClass:"img"},[r("qrcode-vue",{ref:"qrcode",attrs:{value:e.createQrLink(e.identify),size:"134"}})],1),e._v(" "),r("div",{staticClass:"btn"},[r("a-button",{staticClass:"height36",staticStyle:{"margin-right":"36px",background:"rgba(74,144,226,1)",color:"#ffffff"},on:{click:e.downloadQr}},[e._v("\n                "+e._s(e.$t("organizers/marketManage_15",{zh:"下载二维码"}))+"\n              ")]),e._v(" "),r("a-button",{staticClass:"height36",staticStyle:{background:"rgba(54,183,207,1)",color:"#ffffff"},on:{click:e.preview}},[e._v("\n                "+e._s(e.$t("organizers/marketManage_16",{zh:"预览页面"}))+"\n              ")])],1)])])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:2===e.type,expression:"type === 2"}],staticStyle:{"text-align":"center"}},[r("qrcode-vue",{attrs:{value:e.createQrLink(e.identify),size:"250"}})],1),e._v(" "),r("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[r("a-button",{staticStyle:{width:"120px",height:"45px"},on:{click:function(t){e.distributeStatus=!1}}},[e._v("\n          "+e._s(e.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperCurriculum_20",{zh:"取消"}))+"\n        ")]),e._v(" "),r("a-button",{style:{background:1===e.type?"#fa6400":"rgb(74, 144, 226)",borderColor:1===e.type?"#fa6400":"rgb(74, 144, 226)",color:"#ffffff",width:"120px",height:"45px",marginLeft:"10px"},on:{click:function(t){return e.qrModalDownload(e.type)}}},[e._v("\n          "+e._s(1===e.type?e.$t("organizers/traineesManage_17",{zh:"确定"}):e.$t("organizers/marketManage_46",{zh:"下载"}))+"\n        ")])],1)])],1)])}),[],!1,null,"41b4f8ab",null).exports,$=(n(89),n(1044),n(90)),x=n(76),O=n(43);function w(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function I(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var S={mixins:[v.a],data:function(){return{config:d.a,visible:!1,data:[],courseId:0,orderBy:"",labelCol:{span:4},wrapperCol:{span:20},formInline:{name:"",type:"0"},formSet:{open:!1,carry_fee:"",poster:""},rules:{carry_fee:[{required:!0,message:"请输入佣金比例"},{validator:this.validator}]}}},computed:{columns:function(){var e=this;return[{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_27",{zh:"课程名称"}),dataIndex:"name",key:"name",customRender:function(e,t){return t.period>0?e+"( 第".concat(t.period,"期 )"):e}},{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_28",{zh:"类型"}),dataIndex:"scene",key:"scene ",customRender:function(text){return Object($.d)(e)[text]||"-"}},{title:this.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperCurriculum_4",{zh:"课程类型"}),dataIndex:"type",key:"type",customRender:function(text){return Object($.f)(e)[text]}},{title:this.$t("organizers/promotion_15",{zh:"课程价格"})+"( ".concat(this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_4",{zh:"元"})," )"),dataIndex:"price",key:"price"},{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_30",{zh:"开播时间"}),dataIndex:"start",key:"start",customRender:function(text){return text&&Object(O._moment)(1e3*text).format("YYYY/MM/DD HH:mm:ss")||0}},{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_39",{zh:"上架状态"}),dataIndex:"status",key:"status",customRender:function(text){return Object($.e)(e)[text]}},{title:this.$t("organizers/promotion_16",{zh:"推广次数"}),dataIndex:"inviteesNumber",key:"inviteesNumber",sorter:!0},{title:this.$t("organizers/promotion_5",{zh:"总佣金"})+"( ".concat(this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_4",{zh:"元"})," )"),dataIndex:"all_carry_fee",key:"all_carry_fee",sorter:!0},{title:this.$t("courseManagement/ChapterList_FormCommonHand/ChapterList_14",{zh:"操作"}),dataIndex:"handle",key:"handle",scopedSlots:{customRender:"handle"}}]},open:function(){return this.$t("organizers/promotion_19",{zh:"分销开关"})},fee:function(){return this.$t("organizers/promotion_27",{zh:"佣金比例"})},poster:function(){return this.$t("organizers/promotion_22",{zh:"上传海报"})},courseName:function(){return this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_27",{zh:"课程名称"})},promotion:function(){return this.$t("organizers/promotion_25",{zh:"推广"})}},created:function(){this.getListHand()},methods:{handleSubmit:function(){this.getListHand()},handleFee:function(e){var t=e.target.value;this.formSet.carry_fee=t.replace(/^(0+)|[^\d]+/g,"")},validator:function(e,t,n){(Number(t)<0||Number(t)>80)&&n(new Error("佣金比例必须在0-80之间")),n()},handleOk:function(){var e=this;this.$refs.promotion.validate(function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(n){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=8;break}return(r=I({courseId:e.courseId},e.formSet)).open=r.open?1:0,t.next=5,Object(h.B)(r);case 5:o=t.sent,0===o.data.code&&(e.visible=!1,e.getListHand(),e.$message.success("保存成功"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},customPosterRequest:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,o,c,code,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=new FormData).append("file",e.file),n.next=4,Object(x.d)(r);case 4:o=n.sent,c=o.data,code=c.code,l=c.data,0===code&&(t.formSet.poster=l);case 9:case"end":return n.stop()}}),n)})))()},remove:function(){this.formSet.poster=""},getListHand:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={name:e.formInline.name,orderField:e.orderBy,page:e.pagination.current,pageSize:e.pagination.pageSize},0===Number(e.formInline.type)?delete n.type:n.type=Number(e.formInline.type),t.next=4,Object(h.A)(n);case 4:r=t.sent,0===(data=r.data).code&&e.setTotalHandle(data,"entries",(function(){e.data=data.data.entries}));case 7:case"end":return t.stop()}}),t)})))()},handleSet:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,o,data,c,l,d,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.id,t.visible=!0,t.courseId=r,n.next=5,Object(h.C)(r);case 5:o=n.sent,0===(data=o.data).code&&(c=data.data||{},l=c.open,d=c.poster,m=c.carry_fee,t.formSet.open=!!l,t.formSet.poster=d,t.formSet.carry_fee=m);case 8:case"end":return n.stop()}}),n)})))()},handleChange:function(e,t,n){var r=e.current,o=e.pageSize,c=n.columnKey,l=n.order,d={inviteesNumber:1,all_carry_fee:2},m={ascend:-Number(d[c]),descend:Number(d[c])};this.orderBy=m[l]||"",this.handlePaginatChange(r,o)}}},j=(n(2076),Object(k.a)(S,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"promotion"},[r("div",{staticClass:"seach"},[r("a-form-model",{attrs:{layout:"inline",model:e.formInline}},[r("a-form-model-item",{attrs:{label:e.courseName}},[r("a-input",{attrs:{placeholder:"请输入关键字"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),e._v(" "),r("a-form-model-item",{attrs:{label:e.promotion}},[r("a-select",{staticStyle:{width:"200px"},model:{value:e.formInline.type,callback:function(t){e.$set(e.formInline,"type",t)},expression:"formInline.type"}},[r("a-select-option",{attrs:{value:"0"}},[e._v("\n            "+e._s(e.$t("courseManagement/CourseList_FormCommonHand/CourseList_3",{zh:"全部"}))+"\n          ")]),e._v(" "),r("a-select-option",{attrs:{value:"2"}},[e._v("\n            "+e._s(e.$t("organizers/promotion_24",{zh:"已推广"}))+"\n          ")]),e._v(" "),r("a-select-option",{attrs:{value:"1"}},[e._v("\n            "+e._s(e.$t("organizers/promotion_23",{zh:"未推广"}))+"\n          ")])],1)],1),e._v(" "),r("a-form-model-item",[r("a-button",{staticClass:"query",attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("\n          "+e._s(e.$t("financialManagement/CourseRevenue_10",{zh:"查询"}))+"\n        ")])],1)],1)],1),e._v(" "),r("div",{staticClass:"table"},[r("a-table",{attrs:{rowKey:function(e){return e.id},columns:e.columns,"data-source":e.data,pagination:e.pagination},on:{change:e.handleChange},scopedSlots:e._u([{key:"handle",fn:function(text,t){return r("div",{staticClass:"detail",on:{click:function(n){return e.handleSet(t)}}},[e._v("\n        "+e._s(e.$t("organizers/promotion_20",{zh:"推广设置"}))+"\n      ")])}}])})],1),e._v(" "),r("div",{staticClass:"pop"},[r("a-modal",{attrs:{visible:e.visible,footer:!1},on:{cancel:function(t){e.visible=!1}}},[r("div",{staticClass:"popTitle",attrs:{slot:"title"},slot:"title"},[r("span",[e._v(e._s(e.$t("organizers/promotion_20",{zh:"推广设置"})))]),e._v(" "),r("a-tooltip",{attrs:{placement:"bottom"}},[r("template",{slot:"title"},[e._v("\n            "+e._s(e.$t("organizers/promotion_21",{zh:"推广设置为可让艾思用户进行分享推广，推广成功（购买课程）后发放佣金"}))+"\n          ")]),e._v(" "),r("img",{attrs:{src:n(1477),alt:"问号"}})],2)],1),e._v(" "),r("div",[r("a-form-model",{ref:"promotion",attrs:{rules:e.rules,model:e.formSet,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[r("a-form-model-item",{attrs:{label:e.open,prop:"open"}},[r("a-switch",{model:{value:e.formSet.open,callback:function(t){e.$set(e.formSet,"open",t)},expression:"formSet.open"}})],1),e._v(" "),r("a-form-model-item",{attrs:{label:e.fee,prop:"carry_fee"}},[r("a-input",{attrs:{placeholder:"课程价格与佣金比例",type:"number",suffix:"%"},on:{change:e.handleFee},model:{value:e.formSet.carry_fee,callback:function(t){e.$set(e.formSet,"carry_fee",t)},expression:"formSet.carry_fee"}})],1),e._v(" "),r("a-form-model-item",{attrs:{label:e.poster}},[r("a-upload",{attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,customRequest:e.customPosterRequest}},[r("div",{staticClass:"uploadBox"},[e.formSet.poster?r("div",{staticClass:"icon",on:{click:function(t){return t.stopPropagation(),e.remove(t)}}},[r("a-icon",{attrs:{type:"close"}})],1):e._e(),e._v(" "),e.formSet.poster?r("div",[r("img",{attrs:{src:e.config.IMG_URL.default+e.formSet.poster,alt:"海报",width:"100%"}})]):r("div",{staticClass:"avatar-uploader"},[r("img",{attrs:{src:n(1478),alt:"avatar"}}),e._v(" "),r("p",[e._v(e._s(e.$t("organizers/promotion_18",{zh:"上传卡片"})))])])])])],1)],1),e._v(" "),r("a-row",{attrs:{type:"flex",justify:"end"}},[r("a-col",{attrs:{span:20}},[r("div",{staticClass:"submit"},[r("a-button",{staticClass:"btn",on:{click:function(t){e.visible=!1}}},[e._v("\n                "+e._s(e.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperCurriculum_20",{zh:"取消"}))+"\n              ")]),e._v(" "),r("a-button",{staticClass:"btn",on:{click:e.handleOk}},[e._v("\n                "+e._s(e.$t("organizers/promotion_17",{zh:"确认"}))+"\n              ")])],1)])],1)],1)])],1)])}),[],!1,null,"5d179a13",null).exports),M=(n(108),{mixins:[v.a],data:function(){return{data:[],loading:!1,courseId:null,visible:!1}},computed:{columns:function(){return[{title:"ID",dataIndex:"id",key:"id",align:"center"},{title:this.$t("pages/CallActivity_29",{zh:"账号"}),dataIndex:"account",key:"account",align:"center"},{title:this.$t("pages/CallActivity_30",{zh:"昵称"}),dataIndex:"nickname",key:"nickname",align:"center"},{title:this.$t("pages/CallActivity_31",{zh:"助力人数"}),dataIndex:"invite",key:"invite",align:"center"},{title:this.$t("pages/CallActivity_32",{zh:"状态"}),dataIndex:"status",key:"status",scopedSlots:{customRender:"status"},align:"center"},{title:this.$t("pages/CallActivity_33",{zh:"解锁时间"}),dataIndex:"updateTime",key:"updateTime",scopedSlots:{customRender:"updateTime"},align:"center"}]}},methods:{handleOpen:function(e){this.courseId=e,this.pagination.current=1,this.getListHand(),this.visible=!0},handleCancel:function(){this.visible=!1},getListHand:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={page:e.pagination.current,pageSize:e.pagination.pageSize,activityId:e.courseId},t.next=3,Object(h.o)(n);case 3:r=t.sent,0===(data=r.data).code&&e.setTotalHandle(data,"entries",(function(){e.data=data.data.entries}));case 6:case"end":return t.stop()}}),t)})))()}}});function T(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function D(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?T(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):T(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var L={components:{CallActivityDetail:Object(k.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"modal",attrs:{title:e.$t("pages/CallActivity_26",{zh:"活动详情"}),visible:e.visible,footer:null,width:971},on:{cancel:e.handleCancel}},[n("a-table",{attrs:{columns:e.columns,"data-source":e.data,rowKey:function(e){return e.id},pagination:e.pagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"updateTime",fn:function(text,t){return n("div",{},[e._v("\n      "+e._s(t.updateTime&&1===t.status?e.$changeTime(t.updateTime):"--")+"\n    ")])}},{key:"status",fn:function(text,t){return n("div",{},[e._v("\n      "+e._s(1===t.status?e.$t("pages/CallActivity_27",{zh:"已解锁"}):4===t.status?"解锁失败":e.$t("pages/CallActivity_28",{zh:"未解锁"}))+"\n    ")])}}])})],1)}),[],!1,null,null,null).exports},mixins:[v.a],data:function(){return{visible:!1,data:[],form:{time:[]},labelCol:{span:5},wrapperCol:{span:19},courseData:{0:[],1:[]},loading:!1,serachForm:{courseId:-1,id:""},moment:f.a}},computed:{rules:function(){return{courseId:{required:!0,message:this.$t("pages/CallActivity_3",{zh:"请选择课程"}),trigger:"blur"},ts:{required:!0,message:this.$t("pages/CallActivity_15",{zh:"请选择活动时间"}),trigger:"blur"},numCond:{required:!0,message:this.$t("pages/CallActivity_16",{zh:"请输入集call人数"}),trigger:"blur"},share:{required:!0,message:this.$t("pages/CallActivity_35",{zh:"请输入邀请语"}),trigger:"blur"},time:{required:!0,message:"请选择活动时间"}}},columns:function(){return[{title:"ID",dataIndex:"id",key:"id",align:"center"},{title:this.$t("pages/CallActivity_17",{zh:"课程名称"}),dataIndex:"courseName",key:"courseName",align:"center",scopedSlots:{customRender:"courseName"}},{title:this.$t("pages/CallActivity_18",{zh:"集call人数"}),dataIndex:"numCond",key:"numCond",align:"center"},{title:this.$t("pages/CallActivity_19",{zh:"助力总人数"}),dataIndex:"invite",key:"invite",align:"center"},{title:this.$t("pages/CallActivity_20",{zh:"发起次数"}),dataIndex:"num",key:"num",align:"center"},{title:this.$t("pages/CallActivity_21",{zh:"完成人数"}),dataIndex:"complete",key:"complete",align:"center"},{title:this.$t("pages/CallActivity_22",{zh:"注册用户数"}),dataIndex:"register",key:"register",align:"center"},{title:this.$t("pages/CallActivity_23",{zh:"集call时间"}),dataIndex:"ts",key:"ts",align:"center",scopedSlots:{customRender:"ts"}},{title:this.$t("pages/CallActivity_24",{zh:"创建时间"}),dataIndex:"createTime",key:"createTime",scopedSlots:{customRender:"createTime"},align:"center"},{title:this.$t("pages/CallActivity_25",{zh:"状态"}),dataIndex:"status",key:"status",scopedSlots:{customRender:"status"},align:"center"},{title:"活动时间",dataIndex:"time",key:"time",scopedSlots:{customRender:"time"},align:"center"},{title:this.$t("organizers/traineesManage_16",{zh:"操作"}),dataIndex:"handle",key:"handle",scopedSlots:{customRender:"handle"},width:150,align:"center"}]}},mounted:function(){this.getCourseList(),this.getListHand()},methods:{getCourseList:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([Object(h.t)({activityType:1}),Object(h.t)({activityType:-1})]);case 2:n=t.sent,r={},n.forEach((function(e,t){r[t]=e.data.data})),e.courseData=r;case 6:case"end":return t.stop()}}),t)})))()},getListHand:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={page:e.pagination.current,pageSize:e.pagination.pageSize},e.serachForm.id&&(n.courseId=e.serachForm.id),t.next=4,Object(h.p)(n);case 4:r=t.sent,0===(data=r.data).code&&e.setTotalHandle(data,"entries",(function(){e.data=data.data.entries}));case 7:case"end":return t.stop()}}),t)})))()},onChange:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(h.H)({id:e.id,onStore:0===e.status});case 2:r=n.sent,0===r.data.code&&t.getListHand();case 5:case"end":return n.stop()}}),n)})))()},filterOption:function(input,option){return option.componentOptions.children[0].text&&option.componentOptions.children[0].text.indexOf(input)>=0},showDetail:function(e){this.$refs.CallActivityDetail.handleOpen(e.id)},edit:function(e){var t=e.id,n=e.ts,r=e.numCond,o=e.courseId,c=e.share,l=e.newcomer;this.form={id:t,ts:n,numCond:r,courseId:o,share:c,time:e.start>0&&e.end>0?[this.$moment(1e3*e.start),this.$moment(1e3*e.end)]:[],newcomer:1===l},this.visible=!0},addCall:function(){this.visible=!0},searchData:function(){this.pagination.current=1,this.serachForm.id=this.serachForm.courseId,this.getListHand()},dateToMs:function(e){return new Date(e).getTime()/1e3},handleOk:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(n){var r,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=10;break}if(!(e.form.ts+"").includes(".")){t.next=3;break}return t.abrupt("return",e.$message.error("时间只能为整数!"));case 3:return r=e.dateToMs(e.form.time[1]),o=e.dateToMs(e.form.time[0]),t.next=7,Object(h.G)(D(D({},e.form),{},{start:o,end:r,newcomer:e.form.newcomer?1:0,time:null}));case 7:c=t.sent,0===c.data.code&&(e.pagination.current=1,e.getListHand(),e.handleCancel());case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleCancel:function(){this.visible=!1,this.form={}}}},H=(n(2077),Object(k.a)(L,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pl30 pr30"},[n("div",{staticClass:"pt20 pb20 handleWrap"},[n("a-button",{staticClass:"btn",attrs:{type:"primary",shape:"round"},on:{click:e.addCall}},[e._v("\n      "+e._s(e.$t("pages/CallActivity_2",{zh:"新增集call"}))+"\n    ")]),e._v(" "),n("div",{staticClass:"flex"},[n("a-select",{staticStyle:{width:"240px"},attrs:{placeholder:e.$t("pages/CallActivity_3",{zh:"请选择课程"}),showSearch:!0,"option-filter-prop":"children","filter-option":e.filterOption},model:{value:e.serachForm.courseId,callback:function(t){e.$set(e.serachForm,"courseId",t)},expression:"serachForm.courseId"}},[n("a-select-option",{attrs:{value:-1}},[e._v("\n          "+e._s(e.$t("courseManagement/CourseList_FormCommonHand/CourseList_3",{zh:"全部"}))+"\n        ")]),e._v(" "),e._l(e.courseData[1],(function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v("\n          "+e._s(t.period&&t.period>0?t.name+"(第"+t.period+"期)":t.name)+"\n        ")])}))],2),e._v(" "),n("div",{staticClass:"ml30 searchBtn",on:{click:e.searchData}},[e._v("\n        "+e._s(e.$t("financialManagement/CourseRevenue_10",{zh:"查询"}))+"\n      ")])],1)],1),e._v(" "),n("div",[n("a-table",{attrs:{columns:e.columns,"data-source":e.data,rowKey:function(e){return e.id},pagination:e.pagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"courseName",fn:function(text,t){return n("div",{},[e._v("\n        "+e._s(t.period>0?t.courseName+"(第"+t.period+"期)":t.courseName)+"\n      ")])}},{key:"createTime",fn:function(text,t){return n("div",{},[e._v("\n        "+e._s(e.$changeTime(t.createTime))+"\n      ")])}},{key:"ts",fn:function(text,t){return n("div",{},[e._v("\n        "+e._s(t.ts+"h")+"\n      ")])}},{key:"status",fn:function(text,t){return n("div",{},[n("a-switch",{attrs:{checked:1===t.status},on:{change:function(n){return e.onChange(t)}}})],1)}},{key:"time",fn:function(text,t){return n("div",{},[e._v("\n        "+e._s(t.start>0&&t.end>0?e.$changeTime(t.start)+"-"+e.$changeTime(t.end):"--")+"\n      ")])}},{key:"handle",fn:function(text,t){return n("div",{staticClass:"handle"},[n("div",{staticClass:"hand",on:{click:function(n){return e.edit(t)}}},[e._v("\n          "+e._s(e.$t("organizers/marketManage_5",{zh:"编辑"}))+"\n        ")]),e._v(" "),n("div",{staticClass:"hand",on:{click:function(n){return e.showDetail(t)}}},[e._v("\n          "+e._s(e.$t("pages/CallActivity_4",{zh:"活动详情"}))+"\n        ")])])}}])})],1),e._v(" "),n("a-modal",{staticClass:"modal",attrs:{title:e.form.id?e.$t("pages/CallActivity_5",{zh:"编辑活动"}):e.$t("pages/CallActivity_6",{zh:"新增活动"}),visible:e.visible,footer:null,width:574},on:{ok:e.handleOk,cancel:e.handleCancel}},[e.visible?n("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[n("a-form-model-item",{attrs:{label:e.$t("pages/CallActivity_7",{zh:"选择课程"}),prop:"courseId"}},[n("a-select",{attrs:{placeholder:e.$t("pages/CallActivity_3",{zh:"请选择课程"}),showSearch:!0,"option-filter-prop":"children","filter-option":e.filterOption,disabled:!!e.form.id},model:{value:e.form.courseId,callback:function(t){e.$set(e.form,"courseId",t)},expression:"form.courseId"}},e._l(e.courseData[0],(function(t,r){return n("a-select-option",{key:r,attrs:{value:t.id}},[e._v("\n            "+e._s(t.period&&t.period>0?t.name+"(第"+t.period+"期)":t.name)+"\n          ")])})),1)],1),e._v(" "),n("a-form-model-item",{attrs:{label:"活动时间",prop:"time"}},[n("a-range-picker",{attrs:{format:"YYYY-MM-DD HH:mm:ss","show-time":{defaultValue:[e.moment("00:00:00","HH:mm:ss"),e.moment("23:59:59","HH:mm:ss")]}},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1),e._v(" "),n("a-form-model-item",{staticClass:"ts",attrs:{label:e.$t("pages/CallActivity_8",{zh:"集call时间"}),prop:"ts"}},[n("a-input-number",{attrs:{min:1,placeholder:e.$t("pages/CallActivity_9",{zh:"请输入时间"})},model:{value:e.form.ts,callback:function(t){e.$set(e.form,"ts",t)},expression:"form.ts"}}),e._v(e._s(e.$t("pages/CallActivity_10",{zh:"小时"}))+"\n        "),n("span",{staticClass:"tips"},[e._v(e._s(e.$t("pages/CallActivity_11",{zh:"设定时间最小不能小于1小时"})))])],1),e._v(" "),n("a-form-model-item",{attrs:{label:e.$t("pages/CallActivity_12",{zh:"集call人数"}),prop:"numCond"}},[n("a-input-number",{attrs:{min:1,placeholder:e.$t("pages/CallActivity_13",{zh:"请输入人数"})},model:{value:e.form.numCond,callback:function(t){e.$set(e.form,"numCond",t)},expression:"form.numCond"}})],1),e._v(" "),n("a-form-model-item",{attrs:{label:e.$t("pages/CallActivity_34",{zh:"邀请语"}),prop:"share"}},[n("a-textarea",{attrs:{min:1,placeholder:e.$t("pages/CallActivity_35",{zh:"请输入邀请语"}),maxLength:80},model:{value:e.form.share,callback:function(t){e.$set(e.form,"share",t)},expression:"form.share"}})],1),e._v(" "),n("a-form-model-item",{attrs:{label:"仅限新人"}},[n("a-switch",{model:{value:e.form.newcomer,callback:function(t){e.$set(e.form,"newcomer",t)},expression:"form.newcomer"}})],1)],1):e._e(),e._v(" "),n("a-button",{staticClass:"formBtn",attrs:{type:"primary"},on:{click:e.handleOk}},[e._v("\n      "+e._s(e.$t("pages/CallActivity_14",{zh:"确定"}))+"\n    ")])],1),e._v(" "),n("CallActivityDetail",{ref:"CallActivityDetail"})],1)}),[],!1,null,"b18d298a",null).exports),R={mixins:[v.a],data:function(){return{data:[],loading:!1,courseId:null,parentId:null,visible:!1}},computed:{columns:function(){return[{title:"ID",dataIndex:"id",key:"id",align:"center"},{title:this.$t("pages/CallActivity_29",{zh:"账号"}),dataIndex:"account",key:"account",align:"center"},{title:this.$t("pages/CallActivity_30",{zh:"昵称"}),dataIndex:"nickname",key:"nickname",align:"center"},{title:"参与时间",dataIndex:"feeTime",key:"feeTime",scopedSlots:{customRender:"feeTime"},align:"center"}]}},methods:{handleOpen:function(e,t){this.courseId=e,this.parentId=t,this.pagination.current=1,this.getListHand(),this.visible=!0},handleCancel:function(){this.visible=!1},getListHand:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={page:e.pagination.current,pageSize:e.pagination.pageSize,courseId:e.courseId,parentId:e.parentId},t.next=3,Object(h.y)(n);case 3:r=t.sent,0===(data=r.data).code&&e.setTotalHandle(data,"entries",(function(){e.data=data.data.entries}));case 6:case"end":return t.stop()}}),t)})))()},showDetail:function(e){console.log(e)}}},A={components:{GroupBookList:Object(k.a)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{staticClass:"modal",attrs:{title:"参与详情",visible:e.visible,footer:null,width:971},on:{cancel:e.handleCancel}},[n("a-table",{attrs:{columns:e.columns,"data-source":e.data,rowKey:function(e){return e.id},pagination:e.pagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"feeTime",fn:function(text,t){return n("div",{},[e._v("\n      "+e._s(t.feeTime?e.$changeTime(t.feeTime):"--")+"\n    ")])}}])})],1)}),[],!1,null,null,null).exports},mixins:[v.a],data:function(){return{data:[],loading:!1,courseId:null,visible:!1}},computed:{columns:function(){return[{title:"ID",dataIndex:"id",key:"id",align:"center"},{title:this.$t("pages/CallActivity_29",{zh:"账号"}),dataIndex:"account",key:"account",align:"center"},{title:this.$t("pages/CallActivity_30",{zh:"昵称"}),dataIndex:"nickname",key:"nickname",align:"center"},{title:"拼团状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"},align:"center"},{title:"发起时间",dataIndex:"feeTime",key:"feeTime",scopedSlots:{customRender:"feeTime"},align:"center"},{title:"参与详情",dataIndex:"handle",key:"handle",scopedSlots:{customRender:"handle"},align:"center"}]}},methods:{handleOpen:function(e){this.courseId=e,this.pagination.current=1,this.getListHand(),this.visible=!0},handleCancel:function(){this.visible=!1},getListHand:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={page:e.pagination.current,pageSize:e.pagination.pageSize,courseId:e.courseId},t.next=3,Object(h.y)(n);case 3:r=t.sent,0===(data=r.data).code&&e.setTotalHandle(data,"entries",(function(){e.data=data.data.entries}));case 6:case"end":return t.stop()}}),t)})))()},showDetail:function(e){this.$refs.GroupBookList.handleOpen(this.courseId,e.id)}}};n(2078);function P(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function F(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var N={components:{GroupBookDetail:Object(k.a)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{staticClass:"modal",attrs:{title:e.$t("pages/CallActivity_26",{zh:"活动详情"}),visible:e.visible,footer:null,width:971},on:{cancel:e.handleCancel}},[n("a-table",{attrs:{columns:e.columns,"data-source":e.data,rowKey:function(e){return e.id},pagination:e.pagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"feeTime",fn:function(text,t){return n("div",{},[e._v("\n        "+e._s(t.feeTime?e.$changeTime(t.feeTime):"--")+"\n      ")])}},{key:"status",fn:function(text,t){return n("div",{},[e._v("\n        "+e._s(2===t.status?"拼团成功":"拼团中")+"\n      ")])}},{key:"handle",fn:function(text,t){return n("div",{staticClass:"handle"},[n("div",{staticClass:"hand c-237",on:{click:function(n){return e.showDetail(t)}}},[e._v("\n          查看\n        ")])])}}])})],1),e._v(" "),n("GroupBookList",{ref:"GroupBookList"})],1)}),[],!1,null,"6f5dc5e7",null).exports},mixins:[v.a],data:function(){return{visible:!1,data:[],form:{time:[]},labelCol:{span:5},wrapperCol:{span:19},courseData:{0:[],1:[]},loading:!1,serachForm:{courseId:-1,id:""},moment:f.a,rules:{courseId:{required:!0,message:"请选择课程",trigger:"blur"},ts:{required:!0,message:"请选择拼团时间",trigger:"blur"},numCond:{required:!0,message:"请输入拼团人数",trigger:"blur"},share:{required:!0,message:"请输入邀请语",trigger:"blur"},time:{required:!0,message:"请选择活动时间"},price:{required:!0,message:"请输入拼团价格",trigger:"blur"}},columns:[{title:"ID",dataIndex:"id",key:"id",align:"center"},{title:"课程名称",dataIndex:"courseName",key:"courseName",align:"center",scopedSlots:{customRender:"courseName"}},{title:"拼团数",dataIndex:"numCond",key:"numCond",align:"center"},{title:"拼团价格",dataIndex:"price",key:"price",align:"center"},{title:"成团数",dataIndex:"complete",key:"complete",align:"center"},{title:"参与人数",dataIndex:"invite",key:"invite",align:"center"},{title:"活动时间",dataIndex:"time",key:"time",scopedSlots:{customRender:"time"},align:"center"},{title:"拼团时间",dataIndex:"ts",key:"ts",scopedSlots:{customRender:"ts"},align:"center"},{title:"创建时间",dataIndex:"createTime",key:"createTime",scopedSlots:{customRender:"createTime"},align:"center"},{title:"操作",dataIndex:"handle",key:"handle",scopedSlots:{customRender:"handle"},width:150,align:"center"},{title:"拼团",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"},align:"center"}]}},mounted:function(){this.getCourseList(),this.getListHand()},methods:{getCourseList:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([Object(h.t)({activityType:2}),Object(h.t)({activityType:-2})]);case 2:n=t.sent,r={},n.forEach((function(e,t){r[t]=e.data.data})),e.courseData=r;case 6:case"end":return t.stop()}}),t)})))()},getListHand:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={page:e.pagination.current,pageSize:e.pagination.pageSize},e.serachForm.id&&(n.courseId=e.serachForm.id),t.next=4,Object(h.z)(n);case 4:r=t.sent,0===(data=r.data).code&&(e.setTotalHandle(data,"entries",(function(){e.data=data.data.entries})),e.getCourseList());case 7:case"end":return t.stop()}}),t)})))()},addTuan:function(){this.visible=!0},searchData:function(){this.pagination.current=1,this.serachForm.id=this.serachForm.courseId,this.getListHand()},filterOption:function(input,option){return option.componentOptions.children[0].text&&option.componentOptions.children[0].text.indexOf(input)>=0},edit:function(e){var t=e.id,n=e.ts,r=e.numCond,o=e.courseId,c=e.share,l=e.price;this.form={id:t,ts:n,numCond:r,courseId:o,share:c,price:l,time:e.start>0&&e.end>0?[this.$moment(1e3*e.start),this.$moment(1e3*e.end)]:[]},this.visible=!0},showDetail:function(e){this.$refs.GroupBookDetail.handleOpen(e.courseId)},onChange:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(h.L)({courseId:e.courseId,onStore:0===e.status});case 2:r=n.sent,0===r.data.code&&t.getListHand();case 5:case"end":return n.stop()}}),n)})))()},dateToMs:function(e){return new Date(e).getTime()/1e3},handleOk:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(n){var r,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=10;break}if(!(e.form.ts+"").includes(".")){t.next=3;break}return t.abrupt("return",e.$message.error("时间只能为整数!"));case 3:return r=e.dateToMs(e.form.time[1]),o=e.dateToMs(e.form.time[0]),t.next=7,Object(h.K)(F(F({},e.form),{},{start:o,end:r,time:null}));case 7:c=t.sent,0===c.data.code&&(e.pagination.current=1,e.getListHand(),e.handleCancel());case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleCancel:function(){this.visible=!1,this.form={}}}},E=(n(2079),Object(k.a)(N,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pl30 pr30"},[n("div",{staticClass:"pt20 pb20 handleWrap"},[n("a-button",{staticClass:"btn",attrs:{type:"primary",shape:"round"},on:{click:e.addTuan}},[e._v("\n      新增拼团\n    ")]),e._v(" "),n("div",{staticClass:"flex"},[n("a-select",{staticStyle:{width:"240px"},attrs:{placeholder:"请选择课程",showSearch:!0,"option-filter-prop":"children","filter-option":e.filterOption},model:{value:e.serachForm.courseId,callback:function(t){e.$set(e.serachForm,"courseId",t)},expression:"serachForm.courseId"}},[n("a-select-option",{attrs:{value:-1}},[e._v("\n          "+e._s(e.$t("courseManagement/CourseList_FormCommonHand/CourseList_3",{zh:"全部"}))+"\n        ")]),e._v(" "),e._l(e.courseData[1],(function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v("\n          "+e._s(t.period&&t.period>0?t.name+"(第"+t.period+"期)":t.name)+"\n        ")])}))],2),e._v(" "),n("div",{staticClass:"ml30 searchBtn",on:{click:e.searchData}},[e._v("\n        "+e._s(e.$t("financialManagement/CourseRevenue_10",{zh:"查询"}))+"\n      ")])],1)],1),e._v(" "),n("div",[n("a-table",{attrs:{columns:e.columns,"data-source":e.data,rowKey:function(e){return e.id},pagination:e.pagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"courseName",fn:function(text,t){return n("div",{},[e._v("\n        "+e._s(t.period>0?t.courseName+"(第"+t.period+"期)":t.courseName)+"\n      ")])}},{key:"createTime",fn:function(text,t){return n("div",{},[e._v("\n        "+e._s(e.$changeTime(t.createTime))+"\n      ")])}},{key:"ts",fn:function(text,t){return n("div",{},[e._v("\n        "+e._s(t.ts)+"小时\n      ")])}},{key:"status",fn:function(text,t){return n("div",{},[n("a-switch",{attrs:{checked:1===t.status},on:{change:function(n){return e.onChange(t)}}})],1)}},{key:"time",fn:function(text,t){return n("div",{},[e._v("\n        "+e._s(t.start>0&&t.end>0?e.$changeTime(t.start)+"-"+e.$changeTime(t.end):"--")+"\n      ")])}},{key:"handle",fn:function(text,t){return n("div",{staticClass:"handle"},[n("div",{staticClass:"hand",on:{click:function(n){return e.edit(t)}}},[e._v("\n          "+e._s(e.$t("organizers/marketManage_5",{zh:"编辑"}))+"\n        ")]),e._v(" "),n("div",{staticClass:"hand",on:{click:function(n){return e.showDetail(t)}}},[e._v("\n          "+e._s(e.$t("pages/CallActivity_4",{zh:"活动详情"}))+"\n        ")])])}}])})],1),e._v(" "),n("a-modal",{staticClass:"modal",attrs:{title:e.form.id?e.$t("pages/CallActivity_5",{zh:"编辑活动"}):e.$t("pages/CallActivity_6",{zh:"新增活动"}),visible:e.visible,footer:null,width:574},on:{ok:e.handleOk,cancel:e.handleCancel}},[e.visible?n("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[n("a-form-model-item",{attrs:{label:"选择课程",prop:"courseId"}},[n("a-select",{attrs:{placeholder:"请选择课程",showSearch:!0,"option-filter-prop":"children","filter-option":e.filterOption,disabled:!!e.form.id},model:{value:e.form.courseId,callback:function(t){e.$set(e.form,"courseId",t)},expression:"form.courseId"}},e._l(e.courseData[0],(function(t,r){return n("a-select-option",{key:r,attrs:{value:t.id}},[e._v("\n            "+e._s(t.period&&t.period>0?t.name+"(第"+t.period+"期)":t.name)+"\n          ")])})),1)],1),e._v(" "),n("a-form-model-item",{staticClass:"price",attrs:{label:"拼团价格",prop:"price"}},[n("a-input-number",{attrs:{placeholder:"请输入拼团价格"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),n("a-form-model-item",{staticClass:"ts",attrs:{label:"拼团时间",prop:"ts"}},[n("a-input-number",{attrs:{min:1,placeholder:"请输入拼团时间"},model:{value:e.form.ts,callback:function(t){e.$set(e.form,"ts",t)},expression:"form.ts"}}),e._v("小时\n        "),n("span",{staticClass:"tips"},[e._v("设定时间最小不能小于1小时")])],1),e._v(" "),n("a-form-model-item",{attrs:{label:"活动时间",prop:"time"}},[n("a-range-picker",{attrs:{format:"YYYY-MM-DD HH:mm:ss","show-time":{defaultValue:[e.moment("00:00:00","HH:mm:ss"),e.moment("23:59:59","HH:mm:ss")]}},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1),e._v(" "),n("a-form-model-item",{attrs:{label:"拼团人数",prop:"numCond"}},[n("a-input-number",{attrs:{min:1,placeholder:"请输入拼团人数"},model:{value:e.form.numCond,callback:function(t){e.$set(e.form,"numCond",t)},expression:"form.numCond"}})],1),e._v(" "),n("a-form-model-item",{attrs:{label:e.$t("pages/CallActivity_34",{zh:"邀请语"}),prop:"share"}},[n("a-textarea",{attrs:{min:1,placeholder:e.$t("pages/CallActivity_35",{zh:"请输入邀请语"}),maxLength:80},model:{value:e.form.share,callback:function(t){e.$set(e.form,"share",t)},expression:"form.share"}})],1)],1):e._e(),e._v(" "),n("a-button",{staticClass:"formBtn",attrs:{type:"primary"},on:{click:e.handleOk}},[e._v("\n      "+e._s(e.$t("pages/CallActivity_14",{zh:"确定"}))+"\n    ")])],1),e._v(" "),n("GroupBookDetail",{ref:"GroupBookDetail"})],1)}),[],!1,null,"b63bf530",null).exports),B={layout:"organizers",components:{DiscountCoupon:z,Promotion:j,Tabs:n(1277).a,CallActivity:H,GroupBook:E},data:function(){return{}},computed:{list:function(){return[{title:this.$t("organizers/marketManage_1",{zh:"优惠券管理"}),key:"coupon"},{title:this.$t("organizers/promotion_14",{zh:"推广管理"}),key:"promotion"},{title:this.$t("pages/CallActivity_1",{zh:"集call活动"}),key:"CallActivity"},{title:"拼团活动",key:"GroupBook"}]}}},Y=(n(2080),Object(k.a)(B,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"market"},[t("div",{staticClass:"tabs"},[t("Tabs",{attrs:{data:this.list}},[t("div",{staticClass:"bgWhite",attrs:{slot:"coupon"},slot:"coupon"},[t("DiscountCoupon")],1),this._v(" "),t("div",{staticClass:"bgWhite",attrs:{slot:"promotion"},slot:"promotion"},[t("Promotion")],1),this._v(" "),t("div",{staticClass:"bgWhite",attrs:{slot:"CallActivity"},slot:"CallActivity"},[t("CallActivity")],1),this._v(" "),t("div",{staticClass:"bgWhite",attrs:{slot:"GroupBook"},slot:"GroupBook"},[t("GroupBook")],1)])],1)])}),[],!1,null,"176b77a2",null));t.default=Y.exports}}]);