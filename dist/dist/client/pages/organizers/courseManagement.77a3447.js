(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1059:function(t,e,r){"use strict";var n={data:function(){return{pagination:{current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["5","10","15","20","30","40"],showTotal:function(t){return" 共".concat(t,"条")}}}},methods:{resetPage:function(){this.pagination.current=1,this.pagination.total=0},handleTableChange:function(t){this.pagination=t,this.getListHand&&this.getListHand()},handlePaginatChange:function(t,e){this.pagination.current=t,this.pagination.pageSize=e,this.getListHand&&this.getListHand(),this.$backScrollTop()},setTotalHandle:function(data,t,e){this.pagination.total=+data.data.total,this.pagination.total&&!data.data[t].length?(this.pagination.current=this.pagination.current-1,this.getListHand&&this.getListHand()):e()}}},o=r(18),component=Object(o.a)(n,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null);e.a=component.exports},1066:function(t,e,r){"use strict";function n(source,t){if(null==source)return{};var e,i,r=function(source,t){if(null==source)return{};var e,i,r={},n=Object.keys(source);for(i=0;i<n.length;i++)e=n[i],t.indexOf(e)>=0||(r[e]=source[e]);return r}(source,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(source);for(i=0;i<n.length;i++)e=n[i],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(source,e)&&(r[e]=source[e])}return r}r.d(e,"a",(function(){return n}))},1073:function(t,e,r){"use strict";r.d(e,"H",(function(){return l})),r.d(e,"v",(function(){return m})),r.d(e,"k",(function(){return f})),r.d(e,"n",(function(){return h})),r.d(e,"u",(function(){return C})),r.d(e,"C",(function(){return v})),r.d(e,"i",(function(){return _})),r.d(e,"t",(function(){return y})),r.d(e,"r",(function(){return k})),r.d(e,"q",(function(){return w})),r.d(e,"s",(function(){return L})),r.d(e,"G",(function(){return O})),r.d(e,"F",(function(){return x})),r.d(e,"B",(function(){return H})),r.d(e,"I",(function(){return $})),r.d(e,"l",(function(){return j})),r.d(e,"N",(function(){return I})),r.d(e,"d",(function(){return A})),r.d(e,"L",(function(){return M})),r.d(e,"M",(function(){return F})),r.d(e,"f",(function(){return D})),r.d(e,"w",(function(){return z})),r.d(e,"h",(function(){return S})),r.d(e,"e",(function(){return T})),r.d(e,"g",(function(){return R})),r.d(e,"J",(function(){return P})),r.d(e,"K",(function(){return E})),r.d(e,"A",(function(){return N})),r.d(e,"x",(function(){return U})),r.d(e,"z",(function(){return B})),r.d(e,"y",(function(){return V})),r.d(e,"a",(function(){return Y})),r.d(e,"c",(function(){return G})),r.d(e,"j",(function(){return W})),r.d(e,"b",(function(){return J})),r.d(e,"m",(function(){return K})),r.d(e,"p",(function(){return X})),r.d(e,"D",(function(){return Q})),r.d(e,"E",(function(){return Z})),r.d(e,"o",(function(){return tt}));var n=r(1066),o=r(19),c=r(30),d=r.n(c),l=function(t){return o.a.post("/school/lecturer/course/previewTime/".concat(t.courseId,"/").concat(t.liveId),d.a.stringify(t.info))},m=function(t){return o.a.post("/school/lecturer/play/live/".concat(t.courseId,"/").concat(t.liveId))},f=function(t){return o.a.post("/school/lecturer/course/create",d.a.stringify(t))},h=function(t){return o.a.post("/school/lecturer/course/save/".concat(t.id),d.a.stringify(t))},C=function(t){return o.a.post("/school/lecturer/course/list",d.a.stringify(t))},v=function(t){return o.a.post("/school/lecturer/course/delete/".concat(t))},_=function(t){return o.a.post("/school/lecturer/course/status/".concat(t.courseId,"/").concat(t.onStore))},y=function(t){return o.a.post("/school/lecturer/course/info/".concat(t))},k=function(t){return o.a.post("/school/lecturer/series/list",d.a.stringify(t))},w=function(t){return o.a.post("/school/lecturer/series/child/list/".concat(t.courseId),d.a.stringify(t.info))},L=function(t){return o.a.post("/school/lecturer/series/chapter/list/".concat(t))},O=function(t){return o.a.post("/school/lecturer/series/chapter/save/".concat(t.courseId),t.info,{headers:{"Content-Type":"application/json;charset=utf-8"}})},x=function(t){return o.a.post("/school/lecturer/series/child/save/".concat(t.courseId),d.a.stringify(t.info))},H=function(t){return o.a.post("/school/lecturer/series/child/delete/".concat(t.courseId,"/").concat(t.liveId))},$=function(t){return o.a.post("/school/lecturer/series/child/status/".concat(t.courseId,"/").concat(t.liveId,"/").concat(t.onStore))},j=function(){return o.a.post("/school/lecturer/home/index")},I=function(t){return o.a.post("/school/lecturer/home/trend",d.a.stringify(t))},A=function(t){return o.a.post("/school/lecturer/home/conversion",d.a.stringify(t))},M=function(t){return o.a.post("/school/lecturer/student/list",d.a.stringify(t))},F=function(t){var e=t.suserId,r=Object(n.a)(t,["suserId"]);return o.a.post("/school/lecturer/student/push/".concat(e),d.a.stringify(r))},D=function(t){return o.a.post("/school/lecturer/coupon/list",d.a.stringify(t))},z=function(t){return o.a.post("/school/lecturer/data/course/simple",d.a.stringify(t))},S=function(t){var e=t.courseId,r=Object(n.a)(t,["courseId"]);return o.a.post("/school/lecturer/coupon/save/".concat(e),d.a.stringify(r))},T=function(t){var e=t.courseId,r=t.couponId;return o.a.post("/school/lecturer/coupon/".concat(e,"/delete/").concat(r))},R=function(t){var e=t.couponId,r=Object(n.a)(t,["couponId"]);return o.a.post("/school/lecturer/coupon/effect/".concat(e),d.a.stringify(r))},P=function(){return o.a.post("/school/lecturer/promotion/statData")},E=function(t){return o.a.post("/school/lecturer/promotion/statList",d.a.stringify(t))},N=function(t){var e=t.courseId,r=Object(n.a)(t,["courseId"]);return o.a.post("/school/lecturer/promotion/".concat(e,"/order/list"),d.a.stringify(r))},U=function(t){return o.a.post("/school/lecturer/promotion/courses",d.a.stringify(t))},B=function(t){return o.a.post("/school/lecturer/promotion/".concat(t,"/config/info"))},V=function(t){var e=t.courseId,r=Object(n.a)(t,["courseId"]);return o.a.post("/school/lecturer/promotion/".concat(e,"/config/save"),d.a.stringify(r))},Y=function(t){return o.a.post("/school/lecturer/camp/list",d.a.stringify(t))},G=function(t){return o.a.post("/school/lecturer/camp/save",d.a.stringify(t))},W=function(t){return o.a.post("/school/lecturer/course/copy/".concat(t))},J=function(t){var e=t.courseId,r=t.display;return o.a.post("/school/lecturer/camp/camp/".concat(e,"/").concat(r))},K=function(t){return o.a.post("/school/lecturer/series/live/documentUpload",t)},X=function(t){return o.a.post("/school/lecturer/activity/call/list",d.a.stringify(t))},Q=function(t){return o.a.post("/school/lecturer/activity/call/save",d.a.stringify(t))},Z=function(t){var e=t.id,r=t.onStore;return o.a.post("/school/lecturer/activity/call/status/".concat(e,"/").concat(r))},tt=function(t){var e=t.activityId,r=Object(n.a)(t,["activityId"]);return o.a.post("/school/lecturer/activity/record/list/".concat(e),d.a.stringify(r))}},1107:function(t,e,r){},1108:function(t,e,r){},1147:function(t,e,r){t.exports=r.p+"img/operation4.b240b32.png"},1180:function(t,e,r){t.exports=r.p+"img/operation2.d71f34a.png"},1181:function(t,e,r){"use strict";var n={props:{visible:{type:Boolean,required:!0},attr:{type:Object,default:function(){return{}}}},data:function(){return{maskStyle:{background:"#333333"}}}},o=(r(1211),r(1212),r(18)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("a-modal",t._b({staticClass:"commonModal",attrs:{visible:t.visible,destroyOnClose:"",footer:null},on:{cancel:function(e){return t.$emit("update:visible",!1)}}},"a-modal",t.attr,!1),[r("div",[t._t("body"),t._v(" "),t._t("foot",[r("div",{staticClass:"textCenter pt30 pb30"},[r("span",{staticClass:"btn confirmBtn c-fff c-main-btn inlineBlock vMiddle pt8 pb8 hand",on:{click:function(e){return t.$emit("confirmModalHandle")}}},[t._v("\n          确定\n        ")]),t._v(" "),r("span",{staticClass:"btn cancelBtn c-333 inlineBlock vMiddle ml35 pt8 pb8 hand",on:{click:function(e){return t.$emit("update:visible",!1)}}},[t._v("\n          取消\n        ")])])])],2)])}),[],!1,null,"5b8c9718",null);e.a=component.exports},1211:function(t,e,r){"use strict";var n=r(1107);r.n(n).a},1212:function(t,e,r){"use strict";var n=r(1108);r.n(n).a},1240:function(t,e,r){t.exports=r.p+"img/type01.2038b1c.png"},1323:function(t,e,r){t.exports=r.p+"img/type02.21ec655.png"},1459:function(t,e,r){t.exports=r.p+"img/operation1.20815af.png"},1460:function(t,e,r){t.exports=r.p+"img/operation6.522ce8a.png"},1461:function(t,e,r){t.exports=r.p+"img/operation3.a2f4b06.png"},1462:function(t,e,r){t.exports=r.p+"img/cope.99942dc.png"},1463:function(t,e,r){t.exports=r.p+"img/operation5.86e4e6d.png"},1464:function(t,e,r){},1465:function(t,e,r){},1466:function(t,e,r){},1467:function(t,e,r){},1468:function(t,e,r){},1469:function(t,e,r){},1470:function(t,e,r){},1471:function(t,e,r){},1472:function(t,e,r){},1473:function(t,e,r){},1474:function(t,e,r){},1475:function(t,e,r){},2064:function(t,e,r){"use strict";var n=r(1464);r.n(n).a},2065:function(t,e,r){"use strict";var n=r(1465);r.n(n).a},2066:function(t,e,r){"use strict";var n=r(1466);r.n(n).a},2067:function(t,e,r){"use strict";var n=r(1467);r.n(n).a},2068:function(t,e,r){"use strict";var n=r(1468);r.n(n).a},2069:function(t,e,r){"use strict";var n=r(1469);r.n(n).a},2070:function(t,e,r){"use strict";var n=r(1470);r.n(n).a},2071:function(t,e,r){"use strict";var n=r(1471);r.n(n).a},2072:function(t,e,r){"use strict";var n=r(1472);r.n(n).a},2073:function(t,e,r){"use strict";var n=r(1473);r.n(n).a},2074:function(t,e,r){"use strict";var n=r(1474);r.n(n).a},2075:function(t,e,r){"use strict";var n=r(1475);r.n(n).a},2180:function(t,e,r){"use strict";r.r(e);r(88),r(50);var n=r(41),o=(r(43),r(17)),c=(r(44),r(32),r(64),r(1059)),d={data:function(){return{liveData:{},currentTime:parseInt((new Date).getTime()/1e3)}},methods:{linkToDetail:function(t){this.$router.push("/courseDetail/".concat(t.id))},handleChangeAudition:function(t){this.audition=t},copyLink:function(){this.$message.success(this.$t("courseManagement/mixins_CommonHand/CommonHand_8",{zh:"复制成功"}))},editCourse:function(t,e){this.curItem=t,"visibleAudition"===e?this.audition=t.previewTime?t.previewTime+"":null:"visibleLive"===e&&this.getPlayLiveHand(),this[e]=!0},reloadData:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this[t]=!1,this.curItem={},e&&this.getListHand()},setLiveStatus:function(data){return 1===data.liveStatus||this.currentTime>data.start&&data.end>this.currentTime?"直播中":this.currentTime>data.end?"已结束":data.start-this.currentTime<900&&data.start-this.currentTime>0?"即将开始":data.start-this.currentTime>0?"暂未开始":void 0}}},l=r(18),m=Object(l.a)(d,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null).exports,f=r(20),h=r(90),C=r(1073),v=(r(1051),{components:{ModalCommon:r(1181).a},props:{visibleAudition:{type:Boolean,required:!0},curData:{type:Object,default:function(){}},curItem:{type:Object,required:!0},popType:{type:Number,default:1}},data:function(){return{audition:"",liveData:{url:""},showAudition:!1}},computed:{attrAudition:function(){return{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_24",{zh:"免费试听"}),width:"528px"}},attrLive:function(){return{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_25",{zh:"直播链接"}),width:"600px"}}},watch:{showAudition:function(t){t||this.$emit("toggleAudition")}},created:function(){this.showAudition=this.visibleAudition},mounted:function(){2===this.popType?this.getPlayLive():this.audition=this.curItem.previewTime||"5"},methods:{confirmModalHandle:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:1===t.popType&&t.setAudition();case 1:case"end":return e.stop()}}),e)})))()},copyLink:function(){this.$message.success(this.$t("courseManagement/mixins_CommonHand/CommonHand_8",{zh:"复制成功"}))},setAudition:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.audition){e.next=2;break}return e.abrupt("return",t.$message.error(t.$t("courseManagement/mixins_CommonHand/CommonHand_6",{zh:"请选择试听时间"})));case 2:return r={courseId:0===Object.keys(t.curData).length?t.curItem.id:t.curData.id,liveId:0===Object.keys(t.curData).length?t.curItem.liveId:t.curItem.id,info:{time:t.audition}},e.next=5,Object(C.H)(r);case 5:n=e.sent,0===n.data.code&&(t.$message.success(t.$t("courseManagement/mixins_CommonHand/CommonHand_7",{zh:"设置成功"})),t.$emit("reloadData","visibleAudition"));case 8:case"end":return e.stop()}}),e)})))()},getPlayLive:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n,o,code,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={courseId:0===Object.keys(t.curData).length?t.curItem.id:t.curData.id,liveId:0===Object.keys(t.curData).length?t.curItem.liveId:t.curItem.id},e.next=3,Object(C.v)(r);case 3:n=e.sent,o=n.data,code=o.code,c=o.data,0===code&&(t.liveData=c);case 8:case"end":return e.stop()}}),e)})))()}}});function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var y={components:{CourseAuditionOrLivePop:Object(l.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("ModalCommon",{attrs:{visible:t.showAudition,attr:1===t.popType?t.attrAudition:t.attrLive},on:{"update:visible":function(e){t.showAudition=e},confirmModalHandle:t.confirmModalHandle}},[1===t.popType?r("div",{attrs:{slot:"body"},slot:"body"},[r("a-row",{attrs:{type:"flex",align:"middle",justify:"start"}},[r("a-col",{staticClass:"fs16 c-333",attrs:{span:8}},[t._v("\n          "+t._s(t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_17",{zh:"请选择免费试听时间:"}))+"\n        ")]),t._v(" "),r("a-col",{attrs:{span:16}},[r("a-select",{staticStyle:{width:"100%"},model:{value:t.audition,callback:function(e){t.audition=e},expression:"audition"}},[r("a-select-option",{attrs:{value:"5"}},[t._v("\n              5"+t._s(t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_18",{zh:"分钟"}))+"\n            ")]),t._v(" "),r("a-select-option",{attrs:{value:"10"}},[t._v("\n              10"+t._s(t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_18",{zh:"分钟"}))+"\n            ")]),t._v(" "),r("a-select-option",{attrs:{value:"20"}},[t._v("\n              20"+t._s(t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_18",{zh:"分钟"}))+"\n            ")]),t._v(" "),r("a-select-option",{attrs:{value:"-1"}},[t._v("\n              "+t._s(t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_19",{zh:"整节课"}))+"\n            ")]),t._v(" "),r("a-select-option",{attrs:{value:"0"}},[t._v("\n              取消试听\n            ")])],1)],1)],1)],1):t._e(),t._v(" "),2===t.popType?r("div",{staticClass:"pb20",attrs:{slot:"body"},slot:"body"},[r("a-tabs",{attrs:{defaultActiveKey:"1"}},[r("a-tab-pane",{key:"1",attrs:{tab:t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_20",{zh:"讲师"})}},[r("a-row",{attrs:{type:"flex",align:"middle",justify:"start"}},[r("a-col",{staticClass:"c-333",attrs:{span:5}},[t._v("\n              "+t._s(t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_21",{zh:"网页开播链接:"}))+"\n            ")]),t._v(" "),r("a-col",{attrs:{span:14}},[r("a-input",{attrs:{disabled:"",value:t.liveData.url}})],1),t._v(" "),r("a-col",{staticClass:"textRight",attrs:{span:5}},[r("a",{staticClass:"fs14 inlineBlock vMiddle",attrs:{href:t.liveData.url,target:"_blank"}},[t._v("\n                "+t._s(t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_22",{zh:"打开"}))+"\n              ")]),t._v(" "),r("span",{staticClass:"c-999 inlineBlock vMiddle ml10 mr10"},[t._v("|")]),t._v(" "),r("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.liveData.url,expression:"liveData.url",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.copyLink,expression:"copyLink",arg:"success"}],staticClass:"fs14 hand c-3fd inlineBlock vMiddle"},[t._v(t._s(t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_23",{zh:"复制"})))])])],1)],1)],1)],1):t._e(),t._v(" "),2===t.popType?r("div",{attrs:{slot:"foot"},slot:"foot"}):t._e()])],1)}),[],!1,null,null,null).exports},mixins:[{methods:{removeChapterCurrChild:function(t){var e=this;this.$confirm({title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_36",{zh:"删除课程"}),content:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_37",{zh:"是否确定删除此课程?"}),onOk:function(){var r={courseId:e.curData.id,liveId:t.id};Object(C.B)(r).then((function(t){0===t.data.code&&(e.$message.success(e.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_38",{zh:"删除成功"})),e.$emit("getListHand"))}))},onCancel:function(){}})},setStatusChapterCurrChild:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(C.I)({courseId:e.curData.id,liveId:t.id,onStore:!t.status});case 2:n=r.sent,0===n.data.code&&(e.$message.success(t.status?e.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_34",{zh:"已下架"}):e.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_35",{zh:"已上架"})),e.$emit("getListHand"));case 5:case"end":return r.stop()}}),r)})))()},removeCourse:function(t){var e=this;this.$confirm({title:this.$t("courseManagement/mixins_CommonHand/CommonHand_3",{zh:"删除课程"}),content:this.$t("courseManagement/mixins_CommonHand/CommonHand_4",{zh:"是否确定删除此课程?"}),onOk:function(){Object(C.C)(t.id).then((function(t){0===t.data.code&&(e.$message.success(e.$t("courseManagement/mixins_CommonHand/CommonHand_5",{zh:"删除成功"})),e.$emit("getListHand"))}))},onCancel:function(){}})},couresOnStore:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(C.i)({courseId:t.id,onStore:!t.status});case 2:n=r.sent,0===n.data.code&&(e.$message.success(t.status?e.$t("courseManagement/mixins_CommonHand/CommonHand_1",{zh:"已下架"}):e.$t("courseManagement/mixins_CommonHand/CommonHand_2",{zh:"已上架"})),e.$emit("getListHand"));case 5:case"end":return r.stop()}}),r)})))()},courseCopy:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.id,r.next=3,Object(C.j)(n);case 3:o=r.sent,0===o.data.code&&(e.$message.success("复制成功"),e.$emit("getListHand"));case 6:case"end":return r.stop()}}),r)})))()}}}],props:{record:{type:Object,required:!0},curData:{type:Object,default:function(){return{}}},auth:{type:Array,default:function(){return[1,2,3,4]}},level:{type:Number,default:2}},data:function(){return{visibleAudition:!1,visibleLive:!1,curItem:{}}},methods:{removeCourseHand:function(t){this[["removeCourse","removeChapterCurrChild"][this.level-1]](t)},couresOnStoreHand:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e[["couresOnStore","setStatusChapterCurrChild"][e.level-1]](t);case 2:case"end":return r.stop()}}),r)})))()},editCourse:function(t,e){this.curItem=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t),this.toggleStatus(e,!0)},reloadData:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this[t]=!1,this.curItem={},e&&this.$emit("getListHand")},toggleStatus:function(t,e){this[t]=e}}},k=(r(2064),Object(l.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"courseHandle"},[n("div",[t._t("default"),t._v(" "),!t.auth.includes(1)||1===t.record.scene||2!==t.record.audit&&3!==t.record.audit?t._e():n("a-popover",{staticClass:"operateBtn mr10",attrs:{placement:"bottom"}},[n("template",{slot:"content"},[t._v("\n        "+t._s(t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_9",{zh:"开课"}))+"\n      ")]),t._v(" "),n("img",{staticClass:"hand",attrs:{src:r(1459)},on:{click:function(e){return t.editCourse(t.record,"visibleLive")}}})],2),t._v(" "),t.auth.includes(6)&&(2===t.record.audit||3===t.record.audit)&&t.record.status?n("a-popover",{staticClass:"operateBtn mr10",attrs:{placement:"bottom"}},[n("template",{slot:"content"},[t._v("\n        "+t._s(t.$t("courseManagement/CourseList_FormCommonHand/CourseList_32",{zh:"预览"}))+"\n      ")]),t._v(" "),n("img",{staticClass:"hand",attrs:{src:r(1460)},on:{click:function(e){return t.$router.push("/courseDetail/"+t.record.id)}}})],2):t._e(),t._v(" "),t.auth.includes(2)&&("{}"===JSON.stringify(t.curData)?t.record.price:t.curData.price)&&1===t.record.scene?n("a-popover",{staticClass:"operateBtn mr10",attrs:{placement:"bottom"},on:{click:function(e){return t.editCourse(t.record,"visibleAudition")}}},[n("template",{slot:"content"},[t._v("\n        "+t._s(t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_15",{zh:"免费试听"}))+"\n      ")]),t._v(" "),n("img",{staticClass:"hand",attrs:{src:r(1147)},on:{click:function(e){return t.editCourse(t.record,"visibleAudition")}}})],2):t._e(),t._v(" "),!t.auth.includes(3)||2!==t.record.audit&&3!==t.record.audit?t._e():n("a-popover",{staticClass:"mr10",attrs:{placement:"bottom"}},[n("template",{slot:"content"},[t._v("\n        "+t._s(t.record.status?t.$t("courseManagement/ChapterList_FormCommonHand/ChapterList_6",{zh:"下架"}):t.$t("courseManagement/ChapterList_FormCommonHand/ChapterList_7",{zh:"上架"}))+"\n      ")]),t._v(" "),n("img",{class:{up:!t.record.status},attrs:{src:r(1461)},on:{click:function(e){return t.couresOnStoreHand(t.record)}}})],2),t._v(" "),t.auth.includes(5)?n("a-popover",{staticClass:"mr10",attrs:{placement:"bottom"}},[n("template",{slot:"content"},[t._v("\n        复制\n      ")]),t._v(" "),n("img",{attrs:{src:r(1462)},on:{click:function(e){return t.courseCopy(t.record)}}})],2):t._e(),t._v(" "),t.auth.includes(4)?n("a-popover",{staticClass:"mr10",attrs:{placement:"bottom"}},[n("template",{slot:"content"},[t._v("\n        "+t._s(t.$t("courseManagement/ChapterList_FormCommonHand/ChapterList_8",{zh:"删除"}))+"\n      ")]),t._v(" "),n("img",{attrs:{src:r(1463)},on:{click:function(e){return t.removeCourseHand(t.record)}}})],2):t._e()],2),t._v(" "),t.visibleAudition?n("CourseAuditionOrLivePop",{attrs:{visibleAudition:t.visibleAudition,curItem:t.curItem,curData:t.curData},on:{toggleAudition:function(){t.toggleStatus("visibleAudition",!1)},reloadData:t.reloadData}}):t._e(),t._v(" "),t.visibleLive?n("CourseAuditionOrLivePop",{attrs:{visibleAudition:t.visibleLive,curItem:t.curItem,curData:t.curData,popType:2},on:{toggleAudition:function(){t.toggleStatus("visibleLive",!1)},reloadData:t.reloadData}}):t._e()],1)}),[],!1,null,"663496d0",null).exports),w=(r(89),r(196),r(91),r(108),r(1052),r(42)),L=r(76),O={data:function(){return{upload:{timeout:6e4,partSize:1048576,parallel:5,retryCount:3,retryDuration:2,region:"cn-shanghai",userId:f.a.aliyunsdk},file:null,authProgress:0,uploadDisabled:!0,resumeDisabled:!0,pauseDisabled:!0,uploader:null,statusText:""}},created:function(){this.initAliyunsdk()},methods:{initAliyunsdk:function(){return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.dynamicScript)("/schoolStatic/aliyun-upload-sdk/lib/es6-promise.min.js");case 2:return t.next=4,Object(w.dynamicScript)("/schoolStatic/aliyun-upload-sdk/lib/aliyun-oss-sdk-5.3.1.min.js");case 4:return t.next=6,Object(w.dynamicScript)("/schoolStatic/aliyun-upload-sdk/aliyun-upload-sdk-1.5.0.min.js","AliyunUpload");case 6:case"end":return t.stop()}}),t)})))()},fileChange:function(t){this.file=t;this.uploader&&(this.uploader.stopUpload(),this.authProgress=0,this.statusText=""),this.uploader=this.createUploader(),this.uploader.addFile(this.file.file,null,null,null,'{"Vod":{}}'),this.uploadDisabled=!1,this.pauseDisabled=!0,this.resumeDisabled=!0,this.authUpload()},createUploader:function(){var t=this,e=new window.AliyunUpload.Vod({timeout:t.upload.timeout||6e4,partSize:t.upload.partSize||1048576,parallel:t.upload.parallel||5,retryCount:t.upload.retryCount||3,retryDuration:t.upload.retryDuration||2,region:t.upload.region,userId:t.upload.userId,addFileSuccess:function(e){t.uploadDisabled=!1,t.resumeDisabled=!1,t.statusText="添加文件成功, 等待上传...",console.log("addFileSuccess: "+e.file.name)},onUploadstarted:function(r){if(r.videoId)console.log(r.videoId),Object(L.i)({videoId:r.videoId}).then((function(n){var data=n.data;if(0===data.code){var o=data.data.uploadAuth,c=data.data.uploadAddress,d=data.data.videoId;t.setVideoData(t.file,d),e.setUploadAuthAndAddress(r,o,c,d)}else t.setVideoData(!1)}));else{var n={filename:r.file.name};r.file.size&&(n.length=r.file.size),t.form.name&&(n.title=t.form.name),Object(L.b)(n).then((function(n){var data=n.data;if(0===data.code){var o=data.data.uploadAuth,c=data.data.uploadAddress,d=data.data.videoId;t.setVideoData(t.file,d),e.setUploadAuthAndAddress(r,o,c,d)}else t.setVideoData(!1)})),t.statusText="文件开始上传...",console.log("onUploadStarted文件开始上传:"+r.file.name+", endpoint:"+r.endpoint+", bucket:"+r.bucket+", object:"+r.object)}},onUploadSucceed:function(e){console.log("onUploadSucceed文件上传成功: "+e.file.name+", endpoint:"+e.endpoint+", bucket:"+e.bucket+", object:"+e.object),t.statusText="文件上传成功!"},onUploadFailed:function(e,code,r){console.log("onUploadFailed文件上传失败: file:"+e.file.name+",code:"+code+", message:"+r),t.statusText="文件上传失败!"},onUploadCanceled:function(e,code,r){console.log("Canceled file文件已暂停上传: "+e.file.name+", code: "+code+", message:"+r),t.statusText="文件已暂停上传"},onUploadProgress:function(e,r,progress){console.log("onUploadProgress文件上传中:file:"+e.file.name+", fileSize:"+r+", percent:"+Math.ceil(100*progress)+"%");var n=Math.ceil(100*progress);t.authProgress=n,t.statusText="文件上传中..."},onUploadTokenExpired:function(r){Object(L.i)({videoId:r.videoId}).then((function(t){var data=t.data;if(0===data.code){var r=data.data.uploadAuth;e.resumeUploadWithAuth(r),console.log("refreshUpload: 上传超时，重新上传 "+r)}})),t.statusText="文件超时..."},onUploadEnd:function(){console.log("onUploadEnd: 全部文件上传结束"),t.statusText="文件上传完毕"}});return e},authUpload:function(){null!==this.uploader&&(this.uploader.startUpload(),this.uploadDisabled=!0,this.pauseDisabled=!1)},pauseUpload:function(){null!==this.uploader&&(this.uploader.stopUpload(),this.resumeDisabled=!1,this.pauseDisabled=!0)},resumeUpload:function(){null!==this.uploader&&(this.uploader.startUpload(),this.resumeDisabled=!0,this.pauseDisabled=!1)}}},x=Object(l.a)(O,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,"14385a58",null).exports,H=r(21),$=r.n(H),j={mixins:[x],computed:{isEnglish:function(){return"en"===this.$i18n.locale}},methods:{beforeVideoUpload:function(t){return t.size/1073741824>3?this.$message.error("视频不能大于3G!"):t.type.includes("video")?void 0:this.$message.error(this.$t("courseManagement/mixins_FormCommonHand/FormCommonHand_1",{zh:"请上传视频"}))},customVideoRequest:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.fileChange(t);case 1:case"end":return r.stop()}}),r)})))()},setVideoData:function(t,data){t?(t.onSuccess(),this.videoList=[{uid:t.file.uid,name:t.file.name,status:"done",url:""}],this.$set(this.form,"videoId",data)):(t.onError(),this.handleVideoRemove())},handleVideoRemove:function(){this.videoList=[],this.form.videoId="",this.statusText=""},vaildVideo:function(t,e,r){if("1"===this.form.scene&&!e)return r(new Error(this.$t("courseManagement/mixins_FormCommonHand/FormCommonHand_1",{zh:"请上传视频"})));r()},vaildTime:function(t,e,r){if("1"!==this.form.scene){if(!e||!e.length)return r(new Error(this.$t("courseManagement/mixins_FormCommonHand/FormCommonHand_2",{zh:"请设置时间"})));if(e[1].valueOf()-e[0].valueOf()>864e5)return r(new Error(this.$t("courseManagement/mixins_FormCommonHand/FormCommonHand_3",{zh:"时间不能超过一天"})))}r()},vaildPrice:function(t,e,r){if("2"===this.form.priceType&&(!Number(e)||String(e).indexOf(".")>-1))return r(new Error(this.$t("courseManagement/mixins_FormCommonHand/FormCommonHand_4",{zh:"请输入正确的金额"})));r()},vaildDiscountTime:function(t,e,r){if(this.discount&&(!e||0===e.length))return r(new Error("优惠时间不能为空!"));r()},vaildDisprice:function(t,e,r){if(this.discount&&(!Number(e)||!Number.isInteger(+e))&&"0"!==e)return r(new Error(this.$t("courseManagement/mixins_FormCommonHand/FormCommonHand_4",{zh:"请输入正确的金额"})));r()},momentTime:function(time,t){return $()(time,t)}}},I=Object(l.a)(j,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null).exports,A={props:{value:{type:String,required:!0}},data:function(){return{editor:null,config:{allowDivTransToP:!1,autoHeightEnabled:!1,initialFrameHeight:450,initialFrameWidth:"100%",serverUrl:f.a.POST.school_pc+"/school/common/file/UEditor",UEDITOR_HOME_URL:"/schoolStatic/UE/",toolbars:[["source","undo","redo","bold","formatmatch","forecolor","insertorderedlist","insertunorderedlist","justifyleft","justifyright","justifycenter","indent","superscript","subscript","fontsize","link","simpleupload","insertimage","underline","inserttable","insertvideo"]],maximumWords:65535,catchRemoteImageEnable:!1,retainOnlyLabelPasted:!0,pasteplain:!0,filterTxtRules:{"-":"script style object iframe embed input select",img:"img",p:{$:{}}}}}},mounted:function(){this.init()},beforeDestroy:function(){this.destroyed()},methods:{init:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.UE){e.next=9;break}return e.next=3,Object(w.dynamicScript)("/schoolStatic/UE/ueditor.config.js");case 3:return e.next=5,Object(w.dynamicScript)("/schoolStatic/UE/ueditor.all.min.js");case 5:return e.next=7,Object(w.dynamicScript)("/schoolStatic/UE/lang/zh-cn/zh-cn.js");case 7:return e.next=9,Object(w.dynamicScript)("/schoolStatic/UE/ueditor.parse.min.js","UE");case 9:r=t,t.id="editor",t.editor=window.UE.getEditor(t.id,t.config),t.editor.addListener("ready",(function(){r.editor.setContent(r.value),r.editor.execCommand("justify","justify "),r.editor.execCommand("serverparam",(function(){return{token:r.$store.state.user.userInfo.token||""}}))}));case 13:case"end":return e.stop()}}),e)})))()},getContent:function(){return this.editor.getContent()},destroyed:function(){this.editor.removeListener("ready"),this.editor.destroy()},setContent:function(t,e){this.editor?this.editor.setContent(t,e):this.init(t,e)},getTxt:function(){return this.editor.getPlainTxt()}}};r(2065);function M(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function F(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?M(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):M(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var D={components:{Editor:Object(l.a)(A,(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("script",{attrs:{id:"editor",type:"text/plain"}})])}],!1,null,null,null).exports},mixins:[I],props:{curItem:{type:Object,required:!0},type:{type:Number,required:!0},campId:{type:Number,default:0}},data:function(){var t=this,e=Object(h.g)(this);return{schoolMeet:!1,date1:null,formTailLayout:{labelCol:{span:5},wrapperCol:{span:19}},posterList:[],videoList:[],documentList:[],form:{},content:"",showEditor:!1,discount:!1,courseList:[],couponData:[],formConfig:[{key:"name",label:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_2",{zh:"课程名称:"}),type:"INPUT",inputType:"text",rules:[{required:!0,message:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_3",{zh:"请输入课程名称"})}],placeholder:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_3",{zh:"请输入课程名称"}),auth:[1,2]},{key:"period",label:"课程期数",type:"INPUT",inputType:"number",rules:[{required:!0,message:"请输入课程期数"}],placeholder:"请输入课程期数",auth:[3]},{key:"description",label:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_4",{zh:"课程描述:"}),type:"INPUT",inputType:"text",rules:[{required:!0,message:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_5",{zh:"请输入40字以内文字描述"})}],placeholder:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_6",{zh:"允许输入40字以内文字描述"})},{key:"poster",label:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_7",{zh:"课程封面:"}),type:"POSTERUPLOAD",rules:[{required:!0,message:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_8",{zh:"请上传课程封面"}),trigger:"blur"}]},{key:"scene",label:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_11",{zh:"课程类型:"}),type:"SCENERADIO",rules:[{required:!0,message:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_12",{zh:"请选择课程类型"})}],auth:[1]},{key:"openCamp",label:"开营时间",type:"RANGE",rules:[{required:!0,message:"请选择开营时间"}],auth:[3]},{key:"priceType",label:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_19",{zh:"收费模式:"}),type:"PRICETYPE",rules:[{required:!0,message:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_20",{zh:"请选择收费模式"})}]},{key:"time",label:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_24",{zh:"设置时间"}),type:"RANGE",rules:[{required:!0,message:"请设置时间",type:"array",validator:this.vaildTime}],auth:[1]},{key:"categoryId",label:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_27",{zh:"课程分类"}),type:"SELECT",rules:[{required:!0,message:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_28",{zh:"请选择课程分类"})}],placeholder:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_27",{zh:"课程分类"}),options:Object.keys(e).map((function(t){return{key:e[t],value:+t}})).filter((function(e){return 1===t.type||7!==e.value})),auth:[1,2]},{key:"activityTime",label:"活动时间",type:"DATE",rules:[{required:!0,message:"请设置活动时间"}],auth:[1],canShow:function(){return 7===t.form.categoryId}},{key:"location",label:"活动地点",type:"INPUT",inputType:"text",rules:[{required:!0,message:"请设置活动地址"}],placeholder:"活动地址",auth:[1],canShow:function(){return 7===t.form.categoryId}},{key:"difficulty",label:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_45",{zh:"课程难度"}),type:"SELECT",rules:[{required:!0,message:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_45",{zh:"请选择课程难度"})}],placeholder:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_45",{zh:"请选择课程难度"}),options:Object.keys(Object(h.c)(this)).map((function(e){return{value:+e,key:Object(h.c)(t)[e]}}))},{key:"pushCourseId",label:"推荐课程",type:"SELECT",placeholder:"请选择推荐课程",options:[],auth:[1],filterable:!0,filterOption:function(t,option){return option.componentOptions.children[0].text.indexOf(t)>=0},allowClear:!0},{key:"pushCouponId",label:"推荐优惠券",type:"SELECT",placeholder:"请选择推荐优惠券",options:[],auth:[1],filterable:!0,filterOption:function(t,option){return option.componentOptions.children[0].text.indexOf(t)>=0},allowClear:!0},{key:"introduce",label:"课程说明",type:"INPUT",inputType:"text",placeholder:"课程说明"},{key:"studyNumber",label:"课程展示数据",type:"INPUT",inputType:"number",placeholder:"课程展示数据"}]}},computed:{courseDifficulty:function(){return Object(h.c)(this)},filterFormConfig:function(){var t=this;return this.formConfig.filter((function(e){return!e.auth||e.auth.includes(t.type)}))}},watch:{"form.pushCourseId":function(t){var e=this.couponData.filter((function(e){return e.ownId===+t})),r=this.formConfig.findIndex((function(t){return"pushCouponId"===t.key}));r>-1&&this.$set(this.formConfig,r,F(F({},this.formConfig[r]),{},{options:e.map((function(t){return{key:t.remark,value:t.id}}))})),-1===e.findIndex((function(e){return e.ownId===t}))&&(this.form.pushCouponId="")}},mounted:function(){Object.keys(this.curItem).length?this.getData():(this.getPushData(),this.showEditor=!0)},methods:{getPushData:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,code,c,d,l,m,f,h,v,_;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(C.w)({type:0,sceneType:0});case 2:return n=r.sent,o=n.data,code=o.code,c=o.data,0===code&&((d=e.formConfig.findIndex((function(t){return"pushCourseId"===t.key})))>-1&&e.$set(e.formConfig,d,F(F({},e.formConfig[d]),{},{options:c.map((function(t){return{key:t.period?"".concat(t.name,"(第").concat(t.period,"期)"):t.name,value:t.id}}))})),e.courseList=c),r.next=9,Object(C.f)({page:1,pageSize:100});case 9:l=r.sent,m=l.data,f=m.code,h=m.data.entries,0===f&&(e.couponData=h,t&&(v=e.couponData.filter((function(e){return e.ownId===+t})),(_=e.formConfig.findIndex((function(t){return"pushCouponId"===t.key})))>-1&&e.$set(e.formConfig,_,F(F({},e.formConfig[_]),{},{options:v.map((function(t){return{key:t.remark,value:t.id}}))}))));case 14:case"end":return r.stop()}}),r)})))()},getData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,data,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.t)(t.curItem.id);case 2:if(r=e.sent,0!==(data=r.data).code){e.next=17;break}return n=data.data,t.content=n.content,t.showEditor=!0,t.discount=!!n.discountPrice,e.next=11,t.getPushData(n.pushCourseId);case 11:t.form=F(F({},n),{},{pushCourseId:0===n.pushCourseId?"":n.pushCourseId,pushCouponId:0===n.pushCouponId?"":n.pushCouponId,priceType:n.price?"2":"1",price:n.price+"",discountTime:n.discountStart&&n.discountEnd?[n.discountStart+"",n.discountEnd+""]:[],time:1!==n.scene?[n.start+"",n.end+""]:[],openCamp:3===t.type?[n.start+"",n.end+""]:[]}),n.activityTime&&(t.form.activityTime=n.activityTime+""),n.scene&&(t.form.scene=n.scene+""),n.videoName&&1===n.scene&&(t.videoList=[{uid:-1,name:n.videoName,status:"done",url:""}]),n.poster&&(t.posterList=[{uid:-1,name:n.poster,status:"done",url:f.a.IMG_URL.default+n.poster}]),n.document&&(t.documentList=[{uid:-1,name:n.document,status:"done"}]);case 17:case"end":return e.stop()}}),e)})))()},beforeDocumentUpload:function(t){if(t.size/1024/1024>30)return this.$message.error("不能大于30M!"),!1},handleDocumentRemove:function(){this.documentList=[],this.form.document=""},customDocumentRequest:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,c,d,code,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=new FormData,o={uid:-1,status:"error",name:"上传失败"},n.append("file",t.file),r.next=5,Object(C.m)(n);case 5:c=r.sent,d=c.data,code=d.code,l=d.data,0===code&&(o.name=l,o.status="done"),e.documentList=[o],e.form.document=l;case 12:case"end":return r.stop()}}),r)})))()},handleSubmit:function(t){var e=this;t.preventDefault();var r=this.$refs.editor.getContent();if(!r)return this.$message.error(this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_37",{zh:"请输入课程详情"}));this.$refs.form.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n){var o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=20;break}if((o=JSON.parse(JSON.stringify(e.form))).type=e.type,o.content=r,1===e.type?"1"!==o.scene?(o.start=e.form.time[0],o.end=e.form.time[1],delete o.time,delete o.videoId):(o.videoName=e.videoList[0].name,delete o.start,delete o.end):3===e.type&&(o.start=e.form.openCamp[0],o.end=e.form.openCamp[1],o.campId=e.campId,e.curItem.name&&(o.name=e.curItem.name),delete o.openCamp),"1"===e.form.priceType?(delete o.price,delete o.discountPrice,delete o.discountStart,delete o.discountEnd):(e.discount?(o.discountStart=e.form.discountTime[0],o.discountEnd=e.form.discountTime[1]):(delete o.discountPrice,delete o.discountStart,delete o.discountEnd),delete o.discountTime),o.pushCourseId||delete o.pushCourseId,o.pushCouponId||delete o.pushCouponId,Object.keys(e.curItem).length){t.next=14;break}return t.next=11,Object(C.k)(o);case 11:t.t0=t.sent,t.next=17;break;case 14:return t.next=16,Object(C.n)(F(F({},o),{},{id:e.curItem.id}));case 16:t.t0=t.sent;case 17:c=t.t0,0===c.data.code&&e.$emit("reloadData","showAdd");case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},beforePosterUpload:function(t){if(!t.type.includes("image"))return this.$message.error(this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_38",{zh:"请上传图片"}))},customPosterRequest:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(n=new FormData).append("file",t.file),r.next=4,Object(L.d)(n);case 4:o=r.sent,0===(data=o.data).code?(t.onSuccess(),e.posterList=[{uid:t.file.uid,name:t.file.name,status:"done",url:f.a.IMG_URL.default+data.data}],e.form.poster=data.data,e.$refs.form.clearValidate("poster")):(t.onError(),e.handlePosterRemove());case 7:case"end":return r.stop()}}),r)})))()},handlePosterRemove:function(){this.posterList=[],this.form.poster=""},checkboxChange:function(t){this.discount=t.target.checked}}},z=(r(2066),Object(l.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["addCurriculum",{addCurriculumEn:t.isEnglish}]},[n("div",{staticClass:"title pl50 pt20 pb20 borderBottom fs16 c-3fd"},[t._v("\n    "+t._s(Object.keys(t.curItem).length?3===t.type?"编辑期数":t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_39",{zh:"编辑课程"}):3===t.type?"新增期数":t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_1",{zh:"新增课程"}))+"\n  ")]),t._v(" "),n("div",{staticClass:"pl50 pt10 formWrap"},[n("a-form-model",{ref:"form",attrs:{model:t.form,"label-col":t.formTailLayout.labelCol,"wrapper-col":t.formTailLayout.wrapperCol}},[t._l(t.filterFormConfig,(function(e){return["INPUT"!==e.type||e.canShow&&!e.canShow()?t._e():n("a-form-model-item",{key:e.key,attrs:{label:e.label,prop:e.key,rules:e.rules}},[n("a-input",{attrs:{placeholder:e.placeholder,type:e.inputType},model:{value:t.form[e.key],callback:function(r){t.$set(t.form,e.key,r)},expression:"form[item.key]"}})],1),t._v(" "),"POSTERUPLOAD"===e.type?n("a-form-model-item",{key:e.key,attrs:{label:e.label,prop:e.key,rules:e.rules,validateOnRuleChange:!1}},[n("div",{staticClass:"dropbox dropboxBanner"},[n("div",{staticClass:"inlineBlock vBottom",staticStyle:{width:"235px",height:"143px"}},[t.posterList.length?n("img",{attrs:{src:t.posterList[0].url,alt:"",width:"235px",height:"143px"}}):n("span",{staticClass:"defalutImg"})]),t._v(" "),n("div",{staticClass:"inlineBlock vBottom ml5"},[n("a-upload",{attrs:{name:"files",accept:".jpg, .jpeg, .png",action:"",fileList:t.posterList,remove:t.handlePosterRemove,beforeUpload:t.beforePosterUpload,customRequest:t.customPosterRequest}},[n("div",[n("span",{staticClass:"btns c-fff fs16 pt8 pb8 pl30 pr30 hand"},[t._v("\n                    "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_9",{zh:"选择本地图片"}))+"\n                  ")])]),t._v(" "),n("div",{staticClass:"fs12 c-333 pt10"},[t._v("\n                  "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_10",{zh:"建议尺寸438*260px JPG、PNG格式, 图片小于5M"}))+"\n                ")])])],1)])]):t._e(),t._v(" "),"SELECT"===e.type?n("a-form-model-item",{key:e.key,attrs:{label:e.label,prop:e.key,rules:e.rules}},[n("a-select",{attrs:{"show-search":e.filterable,filterOption:e.filterOption,placeholder:e.placeholder,allowClear:e.allowClear},model:{value:t.form[e.key],callback:function(r){t.$set(t.form,e.key,r)},expression:"form[item.key]"}},t._l(e.options,(function(e){return n("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v("\n              "+t._s(e.key)+"\n            ")])})),1)],1):t._e(),t._v(" "),"RANGE"===e.type?n("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:"1"!==t.form.scene,expression:"form.scene !== '1'"}],key:e.key,attrs:{label:e.label,prop:e.key,rules:e.rules}},[n("a-range-picker",{attrs:{showTime:{defaultValue:e.defaultTime||[t.momentTime("00:00:00","HH:mm:ss"),t.momentTime("23:59:59","HH:mm:ss")]},format:e.format||"YYYY-MM-DD HH:mm:ss",valueFormat:"X"},model:{value:t.form[e.key],callback:function(r){t.$set(t.form,e.key,r)},expression:"form[item.key]"}})],1):t._e(),t._v(" "),"DATE"!==e.type||e.canShow&&!e.canShow()?t._e():n("a-form-model-item",{key:e.key,attrs:{label:e.label,prop:e.key,rules:e.rules}},[n("a-date-picker",{attrs:{valueFormat:"X",format:e.format||"YYYY-MM-DD"},model:{value:t.form[e.key],callback:function(r){t.$set(t.form,e.key,r)},expression:"form[item.key]"}})],1),t._v(" "),"SCENERADIO"===e.type?n("a-form-model-item",{key:e.key,staticClass:"videoRadio",attrs:{label:e.label,prop:e.key,rules:e.rules}},[n("a-radio-group",{model:{value:t.form[e.key],callback:function(r){t.$set(t.form,e.key,r)},expression:"form[item.key]"}},[n("a-radio",{attrs:{value:"3"}},[n("div",{staticClass:"radioWrap pt22 pb22 textCenter"},[n("img",{staticClass:"vMiddle",attrs:{src:r(1240),alt:""}}),t._v(" "),n("div",{staticClass:"inlineBlock vMiddle"},[n("div",{staticClass:"c-333 fs16 textLeft"},[t._v("\n                    "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_13",{zh:"云课堂"}))+"\n                  ")]),t._v(" "),n("div",{staticClass:"c-666 fs12 textLeft"},[t._v("\n                    "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_14",{zh:"三分屏"}))+"\n                  ")])])])]),t._v(" "),n("a-radio",{attrs:{value:"2"}},[n("div",{staticClass:"radioWrap pt22 pb22 textCenter"},[n("img",{staticClass:"vMiddle",attrs:{src:r(1323),alt:""}}),t._v(" "),n("div",{staticClass:"inlineBlock vMiddle"},[n("div",{staticClass:"c-333 fs16 textLeft"},[t._v("\n                    "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_15",{zh:"云现场"}))+"\n                  ")]),t._v(" "),n("div",{staticClass:"c-666 fs12 textLeft"},[t._v("\n                    "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_16",{zh:"(纯视频)"}))+"\n                  ")])])])]),t._v(" "),n("a-radio",{attrs:{value:"1"}},[n("div",{staticClass:"radioWrap pt22 pb22 textCenter"},[n("img",{staticClass:"vMiddle",attrs:{src:r(1240),alt:""}}),t._v(" "),n("div",{staticClass:"inlineBlock vMiddle"},[n("div",{staticClass:"c-333 fs16 textLeft"},[t._v("\n                    "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_17",{zh:"录播"}))+"\n                  ")]),t._v(" "),n("div",{staticClass:"c-666 fs12 textLeft"},[t._v("\n                    "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_18",{zh:"任意录播视频"}))+"\n                  ")])])])])],1)],1):t._e(),t._v(" "),"PRICETYPE"===e.type?n("a-form-model-item",{key:e.key,staticClass:"payType",attrs:{prop:e.key,rules:e.rules,label:e.label}},[n("a-radio-group",{model:{value:t.form[e.key],callback:function(r){t.$set(t.form,e.key,r)},expression:"form[item.key]"}},[n("a-radio",{attrs:{value:"1"}},[t._v("\n              "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_21",{zh:"免费"}))+"\n            ")]),t._v(" "),n("a-radio",{staticClass:"payTypeTwo",attrs:{value:"2"}},[t._v("\n              "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_22",{zh:"收费"}))+"\n              "),n("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:"2"===t.form.priceType,expression:"form.priceType === '2'"}],attrs:{prop:"price",rules:[{validator:t.vaildPrice}]}},[n("a-input",{attrs:{placeholder:t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_23",{zh:"请输入金额"})},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),t._v(" "),n("a-checkbox",{directives:[{name:"show",rawName:"v-show",value:"2"===t.form.priceType,expression:"form.priceType === '2'"}],attrs:{checked:t.discount},on:{change:t.checkboxChange}},[t._v("\n                "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_41",{zh:"优惠"}))+"\n              ")])],1)],1),t._v(" "),n("a-row",{directives:[{name:"show",rawName:"v-show",value:t.discount&&"2"===t.form.priceType,expression:"discount && form.priceType === '2'"}],staticClass:"discount",attrs:{type:"flex",align:"top",justify:"space-between"}},[n("a-form-model-item",{attrs:{prop:"discountTime",rules:[{validator:t.vaildDiscountTime}]}},[n("a-range-picker",{attrs:{showTime:{defaultValue:e.defaultTime||[t.momentTime("00:00:00","HH:mm:ss"),t.momentTime("23:59:59","HH:mm:ss")]},format:e.format||"YYYY-MM-DD HH:mm:ss",valueFormat:"X"},model:{value:t.form.discountTime,callback:function(e){t.$set(t.form,"discountTime",e)},expression:"form.discountTime"}})],1),t._v(" "),n("a-form-model-item",{attrs:{prop:"discountPrice",rules:[{validator:t.vaildDisprice}]}},[n("a-input",{staticClass:"discountPrice",attrs:{placeholder:t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_42",{zh:"请输入优惠后的金额"})},model:{value:t.form.discountPrice,callback:function(e){t.$set(t.form,"discountPrice",e)},expression:"form.discountPrice"}})],1)],1)],1):t._e()]})),t._v(" "),n("a-row",{staticClass:"pb30",attrs:{type:"flex",align:"top",justify:"space-between"}},[n("a-col",{staticClass:"c-333 fs14 ant-form-item-required",attrs:{span:5}},[t._v("\n          "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_31",{zh:"课程详情:"}))+"\n        ")]),t._v(" "),n("a-col",{attrs:{span:19}},[t.showEditor?n("Editor",{ref:"editor",attrs:{value:t.content}}):t._e(),t._v(" "),n("p",{staticClass:"c-999 fs12 pt10"},[t._v("\n            "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_32",{zh:"提示：若上传长图，建议把图片裁成多张图片后上传，可提高图片加载速度。"}))+"\n          ")])],1)],1),t._v(" "),1!==t.type||"1"!==t.form.scene||t.form.name?t._e():n("a-row",{staticClass:"pb30",attrs:{type:"flex",align:"top",justify:"space-between"}},[n("a-col",{attrs:{span:19,offset:5}},[n("span",{staticClass:"videoUpload disabled"},[t._v("\n            "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_33",{zh:"上传视频"}))+"\n          ")]),t._v(" "),n("span",{staticClass:"warn"},[t._v("*"+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_40",{zh:"请输入课程名称后上传视频"})))])])],1),t._v(" "),1===t.type?n("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.form.scene&&t.form.name,expression:"form.scene === '1' && form.name"}],attrs:{"wrapper-col":{span:19,offset:5},rules:[{validator:t.vaildVideo}],prop:"videoId"}},[n("div",{staticClass:"dropbox"},[n("a-upload",{attrs:{name:"files",accept:"video/*",action:"",fileList:t.videoList,remove:t.handleVideoRemove,beforeUpload:t.beforeVideoUpload,customRequest:t.customVideoRequest}},[n("div",[n("span",{staticClass:"videoUpload hand"},[t._v(t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_33",{zh:"上传视频"})))]),t._v(" "),t.statusText?n("span",{staticClass:"inlineBlock vMiddle ml30 fs12 c-b00"},[t._v(t._s(t.statusText))]):t._e()]),t._v(" "),t.authProgress?n("a-progress",{attrs:{percent:t.authProgress,size:"small"}}):t._e(),t._v(" "),n("p",{staticClass:"fs12 c-999 pt10"},[t._v("\n              "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_34",{zh:"最大可上传3G以内的视频文件，支持3gp、avi、flv、mp4、mpg、asf、wmv、mkv、mov、webm等视频格式上传"}))+"\n            ")])],1)],1)]):t._e(),t._v(" "),1===t.type?n("a-form-model-item",{attrs:{"label-col":t.formTailLayout.labelCol,"wrapper-col":{span:19,offset:5},prop:"document"}},[n("div",{staticClass:"dropbox"},[n("a-upload",{attrs:{name:"files",action:"",accept:".doc,.docx,.zip,.7z,.rar,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",fileList:t.documentList,remove:t.handleDocumentRemove,beforeUpload:t.beforeDocumentUpload,customRequest:t.customDocumentRequest}},[n("div",[n("span",{staticClass:"videoUpload hand"},[t._v("上传附件")])]),t._v(" "),n("p",{staticClass:"fs12 c-999 pt10"},[t._v("\n              最大能上传30M以内文件\n            ")])])],1)]):t._e(),t._v(" "),n("a-row",{staticClass:"pb30",attrs:{type:"flex",align:"middle",justify:"space-between"}},[n("a-col",{attrs:{span:19,offset:5}},[n("span",{staticClass:"btn1 inlineBlock c-fff fs18 pt10 pb10 pl100 pr100",on:{click:t.handleSubmit}},[t._v("\n            "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_35",{zh:"发布"}))+"\n          ")]),t._v(" "),n("span",{staticClass:"btn2 inlineBlock c-333 fs18 pt10 pb10 ml20 pl100 pr100",on:{click:function(e){return t.$emit("reloadData","showAdd",!1)}}},[t._v("\n            "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_36",{zh:"取消"}))+"\n          ")])])],1)],2)],1)])}),[],!1,null,"68e132f0",null).exports);function S(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function T(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?S(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):S(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var R={components:{AddCurriculum:z,CourseHandle:k},mixins:[c.a,m],data:function(){return{showAdd:!1,loading:!1,visibleAudition:!1,audition:"5",data:[],searchForm:{status:-1,name:"",scene:-1,audit:-1,difficulty:-1},curItem:{},config:f.a}},computed:{attrAudition:function(){return{title:this.$t("courseManagement/CourseList_FormCommonHand/CourseList_21",{zh:"免费试听"}),width:"528px"}},attrLive:function(){return{title:this.$t("courseManagement/CourseList_FormCommonHand/CourseList_22",{zh:"直播链接"}),width:"600px"}},columns:function(){return[{title:this.$t("courseManagement/CourseList_FormCommonHand/CourseList_23",{zh:"封面"}),dataIndex:"poster",scopedSlots:{customRender:"poster"},width:"10%",align:"center"},{title:this.$t("courseManagement/CourseList_FormCommonHand/CourseList_24",{zh:"名称"}),dataIndex:"name",width:"15%",align:"center"},{title:this.$t("courseManagement/CourseList_FormCommonHand/CourseList_25",{zh:"类型"}),dataIndex:"scene",scopedSlots:{customRender:"scene"},width:"8%",align:"center"},{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_39",{zh:"上架状态"}),dataIndex:"status",scopedSlots:{customRender:"status"},width:"8%",align:"center"},{title:this.$t("courseManagement/CourseList_FormCommonHand/CourseList_27",{zh:"付费类型"}),dataIndex:"price",scopedSlots:{customRender:"price"},width:"8%",align:"center"},{title:this.$t("courseManagement/CourseList_FormCommonHand/CourseList_28",{zh:"开播时间"}),scopedSlots:{customRender:"start"},width:"10%",align:"center"},{title:this.$t("courseManagement/CourseList_FormCommonHand/CourseList_29",{zh:"转码状态"}),dataIndex:"transcode",scopedSlots:{customRender:"transcode"},width:"8%",align:"center"},{title:this.$t("courseManagement/CourseList_FormCommonHand/CourseList_30",{zh:"审核状态"}),dataIndex:"audit",scopedSlots:{customRender:"audit"},width:"8%",align:"center"},{title:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_45",{zh:"课程难度"}),dataIndex:"difficulty",scopedSlots:{customRender:"difficulty"},width:"10%",align:"center"},{title:this.$t("courseManagement/CourseList_FormCommonHand/CourseList_31",{zh:"操作"}),key:"operation",scopedSlots:{customRender:"operation"},width:"25%",align:"center"}]},courseStatus:function(){return Object(h.e)(this)},courseScene:function(){return Object(h.d)(this)},courseAudit:function(){return Object(h.b)(this)},courseDifficulty:function(){return Object(h.c)(this)},courseAuditWrap:function(){var t=this,e={};return Object.keys(this.courseAudit).forEach((function(r){3!=+r&&(e[r]=t.courseAudit[r])})),e}},mounted:function(){this.getListHand()},methods:{getListHand:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.pagination.current=t||e.pagination.current,n=T(T({},e.searchForm),{},{page:e.pagination.current,pageSize:e.pagination.pageSize}),r.next=4,Object(C.u)(n);case 4:o=r.sent,0===(data=o.data).code&&e.setTotalHandle(data,"entries",(function(){e.data=data.data.entries}));case 7:case"end":return r.stop()}}),r)})))()},addCourse:function(){this.curItem={},this.showAdd=!0},toggleShowAdd:function(){this.showAdd=!0}}},P=(r(2067),Object(l.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"CourseList"},[t.showAdd?n("AddCurriculum",{attrs:{type:1,curItem:t.curItem},on:{reloadData:t.reloadData}}):[n("div",{staticClass:"selectWrap pt25 pb25 pr50"},[n("a-row",{attrs:{type:"flex",align:"middle",justify:"space-between"}},[n("a-col",{staticClass:"fs16 c-333",attrs:{span:4}},[n("span",{staticClass:"btns c-fff fs16 pt10 pb10 pl35 pr35 hand",on:{click:t.addCourse}},[t._v("\n            "+t._s(t.$t("courseManagement/CourseList_FormCommonHand/CourseList_1",{zh:"新增课程"}))+"\n          ")])]),t._v(" "),n("a-col",{staticClass:"textRight",attrs:{span:20}},[n("a-input-search",{staticClass:"ml15 textLeft",staticStyle:{width:"220px"},attrs:{allowClear:"",placeholder:t.$t("courseManagement/CourseList_FormCommonHand/CourseList_4",{zh:"请输入课程名称"})},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}}),t._v(" "),n("a-select",{staticStyle:{width:"13%"},model:{value:t.searchForm.scene,callback:function(e){t.$set(t.searchForm,"scene",e)},expression:"searchForm.scene"}},[n("a-select-option",{attrs:{value:-1}},[t._v("\n              "+t._s(t.$t("courseManagement/CourseList_FormCommonHand/CourseList_3",{zh:"全部"}))+"\n            ")]),t._v(" "),t._l(t.courseScene,(function(e,r,o){return n("a-select-option",{key:o,attrs:{value:r}},[t._v("\n              "+t._s(e)+"\n            ")])}))],2),t._v(" "),n("a-select",{staticStyle:{width:"13%"},model:{value:t.searchForm.audit,callback:function(e){t.$set(t.searchForm,"audit",e)},expression:"searchForm.audit"}},[n("a-select-option",{attrs:{value:-1}},[t._v("\n              "+t._s(t.$t("courseManagement/CourseList_FormCommonHand/CourseList_3",{zh:"全部"}))+"\n            ")]),t._v(" "),t._l(t.courseAuditWrap,(function(e,r,o){return n("a-select-option",{key:o,attrs:{value:r}},[t._v("\n              "+t._s(e)+"\n            ")])}))],2),t._v(" "),n("a-select",{staticStyle:{width:"13%"},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},[n("a-select-option",{attrs:{value:-1}},[t._v("\n              "+t._s(t.$t("courseManagement/CourseList_FormCommonHand/CourseList_3",{zh:"全部"}))+"\n            ")]),t._v(" "),t._l(t.courseStatus,(function(e,r,o){return n("a-select-option",{key:o,attrs:{value:r}},[t._v("\n              "+t._s(e)+"\n            ")])}))],2),t._v(" "),n("div",{staticClass:"searchBtn",on:{click:function(e){return t.getListHand(1)}}},[t._v("\n            查询\n          ")])],1)],1)],1),t._v(" "),n("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},dataSource:t.data,pagination:t.pagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"difficulty",fn:function(e){return[n("span",{staticClass:"c-b00"},[t._v(t._s(t.courseDifficulty[e]))])]}},{key:"audit",fn:function(e){return[n("span",{staticClass:"c-b00"},[t._v(t._s(t.courseAudit[e]))])]}},{key:"status",fn:function(e){return[n("span",{staticClass:"c-b00"},[t._v(t._s(t.courseStatus[e]))])]}},{key:"poster",fn:function(e){return[n("img",{staticClass:"poter",attrs:{src:t.config.IMG_URL.default+e,alt:""}})]}},{key:"scene",fn:function(e){return[t._v("\n        "+t._s(t.courseScene[e])+"\n      ")]}},{key:"price",fn:function(e){return[t._v("\n        "+t._s(e?t.$t("courseManagement/CourseList_FormCommonHand/CourseList_5",{zh:"付费"}):t.$t("courseManagement/CourseList_FormCommonHand/CourseList_6",{zh:"免费"}))+"\n      ")]}},{key:"start",fn:function(e){return[e.scene>1?n("div",[t._v("\n          "+t._s(t.setLiveStatus(e))+"\n        ")]):t._e(),t._v("\n        "+t._s(e.start?t.$changeTime(e.start,"YYYY-MM-DD HH:mm"):"-")+"\n      ")]}},{key:"transcode",fn:function(e){return[t._v("\n        "+t._s(1===e?t.$t("courseManagement/CourseList_FormCommonHand/CourseList_7",{zh:"已转码"}):"-")+"\n      ")]}},{key:"operation",fn:function(e){return[n("course-handle",{attrs:{record:e,level:1,auth:[1,2,3,4,6]},on:{getListHand:t.getListHand,reloadData:t.reloadData}},[n("a-popover",{staticClass:"operateBtn mr10",attrs:{placement:"bottom"}},[n("template",{slot:"content"},[t._v("\n              "+t._s(t.$t("courseManagement/CourseList_FormCommonHand/CourseList_9",{zh:"编辑"}))+"\n            ")]),t._v(" "),n("img",{staticClass:"hand",attrs:{src:r(1180)},on:{click:function(r){return t.editCourse(e,"showAdd")}}})],2)],1)]}}],null,!1,4063841912)})]],2)}),[],!1,null,"21a86c41",null).exports),E=(r(280),r(282),{props:{curData:{type:Object,required:!0},nuationList:{type:Array,required:!0}},data:function(){return{id:1,formTailLayout:{labelCol:{span:5},wrapperCol:{span:14}}}},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"form"}),this.form.getFieldDecorator("keys",{initialValue:[],preserve:!0})},mounted:function(){this.getNutationHand()},methods:{getNutationHand:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.nuationList.length&&(t.id=t.nuationList[t.nuationList.length-1].id),t.form.setFieldsValue({keys:t.nuationList.length?t.nuationList:[]});case 2:case"end":return e.stop()}}),e)})))()},handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFieldsAndScroll(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(r,n){var o,c,d,l,m,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=19;break}if(o=[],c=[],d=!1,n.names||Object.keys(n).forEach((function(t){if(t.startsWith("name")){if(c.includes(n[t]))return e.$message.error("不能上传重复的章节"),void(d=!0);c.push(n[t])}})),!d){t.next=7;break}return t.abrupt("return");case 7:return(n.names?n.names:c).forEach((function(t,r){var c=e.nuationList.find((function(e){return n.names?e.id===r:e.name===t}));o.push({id:c?c.id:0,name:t})})),l=[],e.nuationList.forEach((function(t){t.id&&(o.find((function(e){return e.id===t.id}))||l.push(t.id))})),m={courseId:e.curData.id,info:{deleteIds:l,entries:o}},t.next=14,Object(C.G)(m);case 14:f=t.sent,0===f.data.code&&(e.$emit("getNutationHand"),e.$emit("reloadData","showNutation",!1)),t.next=20;break;case 19:return t.abrupt("return",!1);case 20:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())},addFormItem:function(){var form=this.form,t=form.getFieldValue("keys").concat([{id:++this.id}]);form.setFieldsValue({keys:t})},removeFormItem:function(t){var form=this.form,e=form.getFieldValue("keys");1!==e.length&&form.setFieldsValue({keys:e.filter((function(e){return e.id!==t.id}))})}}}),N=(r(2068),Object(l.a)(E,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"addCurriculum"},[r("div",{staticClass:"title pl50 pt20 pb20 borderBottom fs16 c-3fd"},[t._v("\n    "+t._s(t.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperNutation_1",{zh:"新增章节"}))+"\n  ")]),t._v(" "),r("div",{staticClass:"pl50 pt10 formWrap"},[r("a-form",{attrs:{form:t.form}},t._l(t.form.getFieldValue("keys"),(function(e){return r("a-form-item",{key:e.id,attrs:{"label-col":t.formTailLayout.labelCol,"wrapper-col":t.formTailLayout.wrapperCol,label:t.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperNutation_2",{zh:"章节名称:"})}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["names["+e.id+"]",{rules:[{required:!0,message:t.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperNutation_3",{zh:"请输入章节名称"})}],initialValue:e.name}],expression:"[\n            `names[${k.id}]`,\n            {\n              rules: [{ required: true, message: $t('courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperNutation_3', {zh:'请输入章节名称'}) }],\n              initialValue: k.name\n            },\n          ]"}],staticStyle:{width:"90%","margin-right":"8px"},attrs:{placeholder:t.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperNutation_3",{zh:"请输入章节名称"})}}),t._v(" "),t.form.getFieldValue("keys").length>1?r("a-icon",{staticClass:"dynamic-delete-button",attrs:{type:"minus-circle-o",disabled:1===t.form.getFieldValue("keys").length},on:{click:function(){return t.removeFormItem(e)}}}):t._e()],1)})),1),t._v(" "),r("a-row",{attrs:{type:"flex",align:"middle",justify:"start"}},[r("a-col",{staticClass:"fs16 c-333",attrs:{span:14,offset:5}},[r("span",{staticClass:"inlineBlock c-border-main-btn pt7 pb7 pl30 pr30 fs16 ellipse",on:{click:t.addFormItem}},[t._v("\n          "+t._s(t.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperNutation_4",{zh:"新增章节"}))+"\n        ")])])],1),t._v(" "),r("a-row",{staticClass:"pt30 pb30",attrs:{type:"flex",align:"middle",justify:"space-between"}},[r("a-col",{attrs:{span:19,offset:5}},[r("span",{staticClass:"btn1 inlineBlock c-fff fs18 pt10 pb10 pl100 pr100",on:{click:t.handleSubmit}},[t._v("\n          "+t._s(t.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperCurriculum_19",{zh:"发布"}))+"\n        ")]),t._v(" "),r("span",{staticClass:"btn2 inlineBlock c-333 fs18 pt10 pb10 ml20 pl100 pr100",on:{click:function(e){return t.$emit("reloadData","showNutation",!1)}}},[t._v("\n          "+t._s(t.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperCurriculum_20",{zh:"取消"}))+"\n        ")])])],1)],1)])}),[],!1,null,"5577f2b4",null).exports);function U(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function B(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?U(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):U(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var V={mixins:[I],props:{curItem:{type:Object,required:!0},type:{type:Number,required:!0},nuationList:{type:Array,required:!0}},data:function(){return{formTailLayout:{labelCol:{span:5},wrapperCol:{span:19}},videoList:[],documentList:[],form:{pushCouponId:null},courseList:[],couponData:[],formConfig:[{key:"name",label:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_2",{zh:"课程名称:"}),type:"INPUT",inputType:"text",rules:[{required:!0,message:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_3",{zh:"请输入课程名称"})}],placeholder:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_3",{zh:"请输入课程名称"})},{key:"scene",label:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_11",{zh:"课程类型:"}),type:"SCENERADIO",rules:[{required:!0,message:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_12",{zh:"请选择课程类型"})}]},{key:"chapterId",label:this.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperCurriculum_12",{zh:"关联章节"}),type:"SELECT",rules:[{required:!1,message:this.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperCurriculum_13",{zh:"请选择关联章节"})}],placeholder:this.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperCurriculum_13",{zh:"请选择关联章节"}),options:this.nuationList.map((function(t){return{value:t.id,key:t.name}}))},{key:"sort",label:"排序层级",type:"INPUT",inputType:"number",rules:[{required:!0,message:"请填写排序层级"}],placeholder:"请填写排序层级"},{key:"pushCourseId",label:"推荐课程",type:"SELECT",placeholder:"请选择推荐课程",options:[],filterable:!0,filterOption:function(t,option){return option.componentOptions.children[0].text.indexOf(t)>=0},allowClear:!0},{key:"pushCouponId",label:"推荐优惠券",type:"SELECT",placeholder:"请选择推荐优惠券",options:[],filterable:!0,filterOption:function(t,option){return option.componentOptions.children[0].text.indexOf(t)>=0},allowClear:!0},{key:"time",label:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_24",{zh:"设置时间"}),type:"RANGE",rules:[{required:!0,message:"请设置时间",type:"array",validator:this.vaildTime}]}]}},watch:{"form.pushCourseId":function(t){var e=this.couponData.filter((function(e){return e.ownId===+t})),r=this.formConfig.findIndex((function(t){return"pushCouponId"===t.key}));r>-1&&this.$set(this.formConfig,r,B(B({},this.formConfig[r]),{},{options:e.map((function(t){return{key:t.remark,value:t.id}}))}));var n=this.form.pushCouponId;-1===e.findIndex((function(t){return t.id===+n}))&&(this.form.pushCouponId=null)}},mounted:function(){this.getInitData()},methods:{getInitData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPushData();case 2:t.curItem.id&&t.setFormData();case 3:case"end":return e.stop()}}),e)})))()},getPushData:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,code,c,d,l,m,f,h,v,_;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(C.w)({type:0,sceneType:0});case 2:return n=r.sent,o=n.data,code=o.code,c=o.data,0===code&&((d=e.formConfig.findIndex((function(t){return"pushCourseId"===t.key})))>-1&&e.$set(e.formConfig,d,B(B({},e.formConfig[d]),{},{options:c.map((function(t){return{key:t.period?"".concat(t.name,"(第").concat(t.period,"期)"):t.name,value:t.id}}))})),e.courseList=c),r.next=9,Object(C.f)({page:1,pageSize:100});case 9:l=r.sent,m=l.data,f=m.code,h=m.data.entries,0===f&&(e.couponData=h,t&&(v=e.couponData.filter((function(e){return e.ownId===+t})),(_=e.formConfig.findIndex((function(t){return"pushCouponId"===t.key})))>-1&&e.$set(e.formConfig,_,B(B({},e.formConfig[_]),{},{options:v.map((function(t){return{key:t.remark,value:t.id}}))}))));case 14:case"end":return r.stop()}}),r)})))()},setFormData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.form=B(B({},t.curItem),{},{pushCourseId:0===t.curItem.pushCourseId?"":t.curItem.pushCourseId,pushCouponId:0===t.curItem.pushCouponId?"":t.curItem.pushCouponId,scene:t.curItem.scene+""}),1!==t.curItem.scene?t.$set(t.form,"time",[t.curItem.start+"",t.curItem.end+""]):t.curItem.videoName&&1===t.curItem.scene&&(t.videoList=[{uid:-1,name:t.curItem.videoName,status:"done",url:""}],t.form.videoId=1),t.curItem.document&&(t.documentList=[{uid:-1,name:t.curItem.document,status:"done"}]);case 3:case"end":return e.stop()}}),e)})))()},beforeDocumentUpload:function(t){if(t.size/1024/1024>30)return this.$message.error("不能大于30M!"),!1},handleDocumentRemove:function(){this.documentList=[],this.form.document=""},customDocumentRequest:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,c,d,code,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=new FormData,o={uid:-1,status:"error",name:"上传失败"},n.append("file",t.file),r.next=5,Object(C.m)(n);case 5:c=r.sent,d=c.data,code=d.code,l=d.data,0===code&&(o.name=l,o.status="done"),e.documentList=[o],e.form.document=l;case 12:case"end":return r.stop()}}),r)})))()},handleSubmit:function(t){var e=this;t.preventDefault(),this.$refs.form.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(r){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return"1"!==(n=JSON.parse(JSON.stringify(e.form))).scene?(n.start=e.form.time[0],n.end=e.form.time[1],delete n.time,delete n.videoId):(n.videoName=e.videoList[0].name,1===n.videoId&&delete n.videoId,delete n.start,delete n.end),n.pushCourseId||delete n.pushCourseId,n.pushCouponId||delete n.pushCouponId,t.next=7,Object(C.F)({info:B(B({},n),{},{id:e.curItem.id}),courseId:e.curItem.curDataId});case 7:o=t.sent,0===o.data.code&&e.$emit("reloadData","showCurriculum");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},Y=(r(2069),Object(l.a)(V,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["addCurriculum",{addCurriculumEn:t.isEnglish}]},[n("div",{staticClass:"title pl50 pt20 pb20 borderBottom fs16 c-3fd"},[t._v("\n    "+t._s(t.curItem.isEdit?3===t.type||2===t.type?"编辑课程":t.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperNutation_5",{zh:"编辑章节"}):3===t.type||2===t.type?"新增课程":t.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperNutation_4",{zh:"新增章节"}))+"\n  ")]),t._v(" "),n("div",{staticClass:"pl50 pt10 formWrap"},[n("a-form-model",{ref:"form",attrs:{model:t.form,"label-col":t.formTailLayout.labelCol,"wrapper-col":t.formTailLayout.wrapperCol}},[t._l(t.formConfig,(function(e){return["INPUT"!==e.type||e.canShow&&!e.canShow()?t._e():n("a-form-model-item",{key:e.key,attrs:{label:e.label,prop:e.key,rules:e.rules}},[n("a-input",{attrs:{placeholder:e.placeholder,type:e.inputType},model:{value:t.form[e.key],callback:function(r){t.$set(t.form,e.key,r)},expression:"form[item.key]"}})],1),t._v(" "),"SELECT"===e.type?n("a-form-model-item",{key:e.key,attrs:{label:e.label,prop:e.key,rules:e.rules}},[n("a-select",{attrs:{"show-search":e.filterable,filterOption:e.filterOption,placeholder:e.placeholder,allowClear:e.allowClear},model:{value:t.form[e.key],callback:function(r){t.$set(t.form,e.key,r)},expression:"form[item.key]"}},t._l(e.options,(function(e){return n("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v("\n              "+t._s(e.key)+"\n            ")])})),1)],1):t._e(),t._v(" "),"RANGE"===e.type?n("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:"1"!==t.form.scene,expression:"form.scene !== '1'"}],key:e.key,attrs:{label:e.label,prop:e.key,rules:e.rules}},[n("a-range-picker",{attrs:{showTime:{defaultValue:e.defaultTime||[t.momentTime("00:00:00","HH:mm:ss"),t.momentTime("23:59:59","HH:mm:ss")]},format:e.format||"YYYY-MM-DD HH:mm:ss",valueFormat:"X"},model:{value:t.form[e.key],callback:function(r){t.$set(t.form,e.key,r)},expression:"form[item.key]"}})],1):t._e(),t._v(" "),"DATE"!==e.type||e.canShow&&!e.canShow()?t._e():n("a-form-model-item",{key:e.key,attrs:{label:e.label,prop:e.key,rules:e.rules}},[n("a-date-picker",{attrs:{valueFormat:"X",format:e.format||"YYYY-MM-DD"},model:{value:t.form[e.key],callback:function(r){t.$set(t.form,e.key,r)},expression:"form[item.key]"}})],1),t._v(" "),"SCENERADIO"===e.type?n("a-form-model-item",{key:e.key,staticClass:"videoRadio",attrs:{label:e.label,prop:e.key,rules:e.rules}},[n("a-radio-group",{model:{value:t.form[e.key],callback:function(r){t.$set(t.form,e.key,r)},expression:"form[item.key]"}},[n("a-radio",{attrs:{value:"3"}},[n("div",{staticClass:"radioWrap pt22 pb22 textCenter"},[n("img",{staticClass:"vMiddle",attrs:{src:r(1240),alt:""}}),t._v(" "),n("div",{staticClass:"inlineBlock vMiddle"},[n("div",{staticClass:"c-333 fs16 textLeft"},[t._v("\n                    "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_13",{zh:"云课堂"}))+"\n                  ")]),t._v(" "),n("div",{staticClass:"c-666 fs12 textLeft"},[t._v("\n                    "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_14",{zh:"三分屏"}))+"\n                  ")])])])]),t._v(" "),n("a-radio",{attrs:{value:"2"}},[n("div",{staticClass:"radioWrap pt22 pb22 textCenter"},[n("img",{staticClass:"vMiddle",attrs:{src:r(1323),alt:""}}),t._v(" "),n("div",{staticClass:"inlineBlock vMiddle"},[n("div",{staticClass:"c-333 fs16 textLeft"},[t._v("\n                    "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_15",{zh:"云现场"}))+"\n                  ")]),t._v(" "),n("div",{staticClass:"c-666 fs12 textLeft"},[t._v("\n                    "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_16",{zh:"(纯视频)"}))+"\n                  ")])])])]),t._v(" "),n("a-radio",{attrs:{value:"1"}},[n("div",{staticClass:"radioWrap pt22 pb22 textCenter"},[n("img",{staticClass:"vMiddle",attrs:{src:r(1240),alt:""}}),t._v(" "),n("div",{staticClass:"inlineBlock vMiddle"},[n("div",{staticClass:"c-333 fs16 textLeft"},[t._v("\n                    "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_17",{zh:"录播"}))+"\n                  ")]),t._v(" "),n("div",{staticClass:"c-666 fs12 textLeft"},[t._v("\n                    "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_18",{zh:"任意录播视频"}))+"\n                  ")])])])])],1)],1):t._e()]})),t._v(" "),"1"!==t.form.scene||t.form.name?t._e():n("a-row",{staticClass:"pb30",attrs:{type:"flex",align:"top",justify:"space-between"}},[n("a-col",{attrs:{span:19,offset:5}},[n("span",{staticClass:"videoUpload disabled"},[t._v("\n            "+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_33",{zh:"上传视频"}))+"\n          ")]),t._v(" "),n("span",{staticClass:"warn"},[t._v("*"+t._s(t.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_40",{zh:"请输入课程名称后上传视频"})))])])],1),t._v(" "),"1"===t.form.scene&&t.form.name?n("a-form-model-item",{attrs:{"label-col":t.formTailLayout.labelCol,"wrapper-col":{span:19,offset:5},rules:[{validator:t.vaildVideo}],prop:"videoId"}},[n("div",{staticClass:"dropbox"},[n("a-upload",{attrs:{name:"files",accept:"video/*",action:"",fileList:t.videoList,remove:t.handleVideoRemove,beforeUpload:t.beforeVideoUpload,customRequest:t.customVideoRequest}},[n("div",[n("span",{staticClass:"videoUpload hand"},[t._v(t._s(t.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperCurriculum_17",{zh:"上传视频"})))])]),t._v(" "),t.authProgress?n("a-progress",{attrs:{percent:t.authProgress,size:"small"}}):t._e(),t._v(" "),n("p",{staticClass:"fs12 c-999 pt10"},[t._v("\n              "+t._s(t.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperCurriculum_18",{zh:" 最大可上传3G以内的视频文件，支持3gp、avi、flv、mp4、mpg、asf、wmv、mkv、mov、webm等视频格式上传"}))+"\n            ")])],1)],1)]):t._e(),t._v(" "),2===t.type||3===t.type?n("a-form-model-item",{attrs:{"label-col":t.formTailLayout.labelCol,"wrapper-col":{span:19,offset:5},prop:"document"}},[n("div",{staticClass:"dropbox"},[n("a-upload",{attrs:{name:"files",action:"",accept:".doc,.docx,.zip,.7z,.rar,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",fileList:t.documentList,remove:t.handleDocumentRemove,beforeUpload:t.beforeDocumentUpload,customRequest:t.customDocumentRequest}},[n("div",[n("span",{staticClass:"videoUpload hand"},[t._v("上传附件")])]),t._v(" "),n("p",{staticClass:"fs12 c-999 pt10"},[t._v("\n              最大能上传30M以内文件\n            ")])])],1)]):t._e(),t._v(" "),n("a-row",{staticClass:"pb30",attrs:{type:"flex",align:"middle",justify:"space-between"}},[n("a-col",{attrs:{span:19,offset:5}},[n("span",{staticClass:"btn1 inlineBlock c-fff fs18 pt10 pb10 pl100 pr100",on:{click:t.handleSubmit}},[t._v("\n            "+t._s(t.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperCurriculum_19",{zh:"发布"}))+"\n          ")]),t._v(" "),n("span",{staticClass:"btn2 inlineBlock c-333 fs18 pt10 pb10 ml20 pl100 pr100",on:{click:function(e){return t.$emit("reloadData","showCurriculum",!1)}}},[t._v("\n            "+t._s(t.$t("courseManagement/AddChaperCurriculum_FormCommonHand/AddChaperCurriculum_20",{zh:"取消"}))+"\n          ")])])],1)],2)],1)])}),[],!1,null,"fc4ae064",null).exports);function G(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function W(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?G(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):G(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var J={components:{AddCurriculum:z,AddChaperNutation:N,AddChaperCurriculum:Y,CourseHandle:k},mixins:[c.a,m],props:{curData:{type:Object,required:!0}},data:function(){return{showNutation:!1,showCurriculum:!1,showAdd:!1,loading:!1,visibleAudition:!1,visibleLive:!1,audition:"5",nuationList:[],data:[],curItem:{},config:f.a}},computed:{attrAudition:function(){return{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_24",{zh:"免费试听"}),width:"528px"}},attrLive:function(){return{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_25",{zh:"直播链接"}),width:"600px"}},columns:function(){return[{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_26",{zh:"章节"}),dataIndex:"chapterId",scopedSlots:{customRender:"chapterId"},width:"8%",align:"center"},{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_27",{zh:"课程名称"}),dataIndex:"name",width:"20%",align:"center"},{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_28",{zh:"类型"}),dataIndex:"scene",scopedSlots:{customRender:"scene"},width:"8%",align:"center"},{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_39",{zh:"上架状态"}),dataIndex:"status",scopedSlots:{customRender:"status"},width:"8%",align:"center"},{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_30",{zh:"开播时间"}),scopedSlots:{customRender:"start"},width:"13%",align:"center"},{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_31",{zh:"转码状态"}),dataIndex:"transcode",scopedSlots:{customRender:"transcode"},width:"8%",align:"center"},{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_32",{zh:"审核状态"}),dataIndex:"audit",scopedSlots:{customRender:"audit"},width:"10%",align:"center"},{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_33",{zh:"操作"}),key:"operation",scopedSlots:{customRender:"operation"},width:"25%",align:"center"}]},courseStatus:function(){return Object(h.e)(this)},courseScene:function(){return Object(h.d)(this)},courseAudit:function(){return Object(h.b)(this)}},mounted:function(){this.getNutationHand(),this.getListHand()},methods:{getNutationHand:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.s)(t.curData.id);case 2:r=e.sent,0===(data=r.data).code&&(t.nuationList=data.data.entries);case 5:case"end":return e.stop()}}),e)})))()},getListHand:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={courseId:t.curData.id,info:{page:t.pagination.current,pageSize:t.pagination.pageSize}},e.next=3,Object(C.q)(r);case 3:n=e.sent,0===(data=n.data).code&&t.setTotalHandle(data,"entries",(function(){t.data=data.data.entries}));case 6:case"end":return e.stop()}}),e)})))()},couresOnStoreHand:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(C.I)({courseId:e.curData.id,liveId:t.id,onStore:!t.status});case 2:n=r.sent,0===n.data.code&&(e.$message.success(t.status?e.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_34",{zh:"已下架"}):e.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_35",{zh:"已上架"})),e.getListHand());case 5:case"end":return r.stop()}}),r)})))()},removeCourseHand:function(t){var e=this;this.$confirm({title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_36",{zh:"删除课程"}),content:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_37",{zh:"是否确定删除此课程?"}),onOk:function(){var r={courseId:e.curData.id,liveId:t.id};Object(C.B)(r).then((function(t){0===t.data.code&&(e.$message.success(e.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_38",{zh:"删除成功"})),e.getListHand())}))},onCancel:function(){}})},setNutation:function(t){var e=this.nuationList.find((function(e){return e.id===t}));return e?e.name:"-"},editCourse:function(t,e){this.curItem=W(W({},t),{},{isEdit:Object.keys(t).length>0,curDataId:this.curData.id}),"visibleAudition"===e?this.audition=t.previewTime?t.previewTime+"":null:"visibleLive"===e&&this.getPlayLiveHand(),this[e]=!0}}};r(2070);function K(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function X(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?K(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):K(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Q={components:{AddCurriculum:z,ChapterCourseList:Object(l.a)(J,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"CourseList"},[t.showAdd||t.showNutation||t.showCurriculum?t._e():[n("div",{staticClass:"selectWrap pt25 pb25 pr50"},[n("a-row",{attrs:{type:"flex",align:"middle",justify:"space-between"}},[n("a-col",{staticClass:"fs16 c-333",attrs:{span:14}},[n("img",{staticClass:"chapterInfoImg",attrs:{src:t.config.IMG_URL.default+t.curData.poster,alt:""}}),t._v(" "),n("div",{staticClass:"inlineBlock chapterInfoConts pl25"},[n("div",{staticClass:"fs18 c-333 f600"},[t._v("\n              "+t._s(t.curData.name)+"\n            ")]),t._v(" "),n("div",{staticClass:"pt25"},[n("div",{staticClass:"c-666 fs14"},[t._v("\n                "+t._s(t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_1",{zh:"付费类型:"}))+"\n                "),n("span",{staticClass:"c-333"},[t._v(t._s(t.curData.price?t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_2",{zh:"付费"}):t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_3",{zh:"免费"})))])]),t._v(" "),t.curData.price?n("div",[n("span",{staticClass:"fs12 c-101"},[t._v("¥")]),t._v(" "),n("span",{staticClass:"c-101 f600 fs30"},[t._v(t._s(t.curData.price))]),t._v(" "),n("span",{staticClass:"c-333 fs12"},[t._v(t._s(t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_4",{zh:"元"})))])]):t._e()])])]),t._v(" "),n("a-col",{staticClass:"textRight",attrs:{span:9,offset:1}},[n("div",[n("span",{staticClass:"inlineBlock c-main-btn pt10 pb10 pl35 pr35 fs16 ellipse",on:{click:function(e){t.showNutation=!0}}},[t._v("\n              "+t._s(t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_5",{zh:"新增章节"}))+"\n            ")])]),t._v(" "),n("div",{staticClass:"mt15"},[n("span",{staticClass:"inlineBlock c-border-main-btn pt10 pb10 pl35 pr35 fs16 ellipse",on:{click:function(e){return t.editCourse({},"showCurriculum")}}},[t._v("\n              "+t._s(t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_6",{zh:"新增课程"}))+"\n            ")])]),t._v(" "),n("div",{staticClass:"mt15"},[n("span",{staticClass:"inlineBlock chapBtn pt10 pb10 pl35 pr35 fs16 hand",on:{click:function(e){return t.$emit("closeList")}}},[t._v("\n              "+t._s(t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_7",{zh:"返回列表"}))+"\n            ")])])])],1)],1),t._v(" "),n("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},dataSource:t.data,pagination:t.pagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"audit",fn:function(e){return[n("span",{staticClass:"c-b00"},[t._v(t._s(t.courseAudit[e]))])]}},{key:"status",fn:function(e){return[n("span",{staticClass:"c-b00"},[t._v(t._s(t.courseStatus[e]))])]}},{key:"chapterId",fn:function(e){return[t._v("\n        "+t._s(t.setNutation(e))+"\n      ")]}},{key:"scene",fn:function(e){return[t._v("\n        "+t._s(t.courseScene[e])+"\n      ")]}},{key:"price",fn:function(e){return[t._v("\n        "+t._s(e?t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_2",{zh:"付费"}):t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_3",{zh:"免费"}))+"\n      ")]}},{key:"start",fn:function(e){return[e.scene>1?n("div",[t._v("\n          "+t._s(t.setLiveStatus(e))+"\n        ")]):t._e(),t._v("\n        "+t._s(e.start?t.$changeTime(e.start,"YYYY-MM-DD HH:mm"):"-")+"\n      ")]}},{key:"transcode",fn:function(e){return[t._v("\n        "+t._s(1===e?t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_8",{zh:"已转码"}):"-")+"\n      ")]}},{key:"operation",fn:function(e){return[n("course-handle",{attrs:{record:e,curData:t.curData},on:{getListHand:t.getListHand,reloadData:t.reloadData}},[n("a-popover",{staticClass:"mr10",attrs:{placement:"bottom"}},[n("template",{slot:"content"},[t._v("\n              "+t._s(t.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_10",{zh:"编辑"}))+"\n            ")]),t._v(" "),n("img",{staticClass:"hand",attrs:{src:r(1180)},on:{click:function(r){return t.editCourse(e,"showCurriculum")}}})],2)],1)]}}],null,!1,839604818)})],t._v(" "),t.showAdd?n("AddCurriculum",{attrs:{type:1,curItem:t.curItem},on:{reloadData:t.reloadData}}):t._e(),t._v(" "),t.showNutation?n("AddChaperNutation",{attrs:{curData:t.curData,nuationList:t.nuationList},on:{reloadData:t.reloadData,getNutationHand:t.getNutationHand}}):t._e(),t._v(" "),t.showCurriculum?n("AddChaperCurriculum",{attrs:{curItem:t.curItem,nuationList:t.nuationList,type:2},on:{reloadData:t.reloadData}}):t._e()],2)}),[],!1,null,"08880b41",null).exports,CourseHandle:k},mixins:[c.a,m],data:function(){return{showAdd:!1,loading:!1,showList:!1,data:[],searchForm:{name:"",feeType:-1,difficulty:-1},curItem:{},config:f.a}},computed:{columns:function(){return[{title:this.$t("courseManagement/ChapterList_FormCommonHand/ChapterList_9",{zh:"封面"}),dataIndex:"poster",scopedSlots:{customRender:"poster"},width:"10%",align:"center"},{title:this.$t("courseManagement/ChapterList_FormCommonHand/ChapterList_10",{zh:"名称"}),dataIndex:"name",width:"20%",align:"center"},{title:this.$t("courseManagement/ChapterList_FormCommonHand/ChapterList_11",{zh:"付费类型"}),dataIndex:"price",scopedSlots:{customRender:"price"},width:"10%",align:"center"},{title:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_39",{zh:"上架状态"}),dataIndex:"status",scopedSlots:{customRender:"status"},width:"10%",align:"center"},{title:this.$t("courseManagement/ChapterList_FormCommonHand/ChapterList_13",{zh:"审核状态"}),dataIndex:"audit",scopedSlots:{customRender:"audit"},width:"10%",align:"center"},{title:this.$t("courseManagement/AddCurriculum_FormCommonHand/AddCurriculum_45",{zh:"课程难度"}),dataIndex:"difficulty",scopedSlots:{customRender:"difficulty"},width:"10%",align:"center"},{title:this.$t("courseManagement/ChapterList_FormCommonHand/ChapterList_14",{zh:"操作"}),key:"operation",scopedSlots:{customRender:"operation"},width:"30%",align:"center"}]},courseStatus:function(){return Object(h.e)(this)},courseAudit:function(){return Object(h.b)(this)},courseDifficulty:function(){return Object(h.c)(this)},feeTypeList:function(){return{1:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_3",{zh:"免费"}),2:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_2",{zh:"付费"})}}},mounted:function(){this.getListHand()},methods:{getListHand:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.pagination.current=t||e.pagination.current,n=X(X({},e.searchForm),{},{page:e.pagination.current,pageSize:e.pagination.pageSize}),r.next=4,Object(C.r)(n);case 4:o=r.sent,0===(data=o.data).code&&e.setTotalHandle(data,"entries",(function(){e.data=data.data.entries}));case 7:case"end":return r.stop()}}),r)})))()},closeList:function(){this.curItem={},this.showList=!1},toggleShowAdd:function(){this.showAdd=!0}}},Z=(r(2071),Object(l.a)(Q,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"CourseList"},[t.showAdd||t.showList?t._e():[n("div",{staticClass:"selectWrap pt25 pb25 pr50"},[n("a-row",{attrs:{type:"flex",align:"middle",justify:"space-between"}},[n("a-col",{staticClass:"fs16 c-333",attrs:{span:4}},[n("span",{staticClass:"btns c-fff fs16 pt10 pb10 pl35 pr35 hand",on:{click:function(e){t.showAdd=!0}}},[t._v("\n            "+t._s(t.$t("courseManagement/ChapterList_FormCommonHand/ChapterList_1",{zh:"新增系列课"}))+"\n          ")])]),t._v(" "),n("a-col",{staticClass:"textRight",attrs:{span:20}},[n("a-input-search",{staticClass:"ml15 textLeft",staticStyle:{width:"220px"},attrs:{allowClear:"",placeholder:t.$t("courseManagement/CourseList_FormCommonHand/CourseList_4",{zh:"请输入课程名称"})},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}}),t._v(" "),n("a-select",{staticStyle:{width:"240px"},model:{value:t.searchForm.feeType,callback:function(e){t.$set(t.searchForm,"feeType",e)},expression:"searchForm.feeType"}},[n("a-select-option",{attrs:{value:-1}},[t._v("\n              "+t._s(t.$t("courseManagement/CourseList_FormCommonHand/CourseList_3",{zh:"全部"}))+"\n            ")]),t._v(" "),t._l(t.feeTypeList,(function(e,r,o){return n("a-select-option",{key:o,attrs:{value:r}},[t._v("\n              "+t._s(e)+"\n            ")])}))],2),t._v(" "),n("div",{staticClass:"searchBtn",on:{click:function(e){return t.getListHand(1)}}},[t._v("\n            查询\n          ")])],1)],1)],1),t._v(" "),n("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},dataSource:t.data,pagination:t.pagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"difficulty",fn:function(e){return[n("span",{staticClass:"c-b00"},[t._v(t._s(t.courseDifficulty[e]))])]}},{key:"audit",fn:function(e){return[n("span",{staticClass:"c-b00"},[t._v(t._s(t.courseAudit[e]))])]}},{key:"poster",fn:function(e){return[n("img",{staticClass:"poter",attrs:{src:t.config.IMG_URL.default+e,alt:""}})]}},{key:"price",fn:function(e){return[n("span",{staticClass:"c-b00"},[t._v("\n          "+t._s(e>0?t.$t("courseManagement/ChapterList_FormCommonHand/ChapterList_2",{zh:"付费"}):t.$t("courseManagement/ChapterList_FormCommonHand/ChapterList_3",{zh:"免费"}))+"\n        ")])]}},{key:"status",fn:function(e){return[n("span",{staticClass:"c-b00 ml10"},[t._v(t._s(t.courseStatus[e]))])]}},{key:"operation",fn:function(e){return[n("course-handle",{attrs:{record:e,auth:[3,4,6],level:1},on:{getListHand:t.getListHand,reloadData:t.reloadData}},[n("span",{staticClass:"chapBtn hand pt10 pb10 pl30 pr30",on:{click:function(r){return t.editCourse(e,"showList")}}},[t._v(t._s(t.$t("courseManagement/ChapterList_FormCommonHand/ChapterList_4",{zh:"进入课程"})))]),t._v(" "),n("a-popover",{staticClass:"mr10 ml10",attrs:{placement:"bottom"}},[n("template",{slot:"content"},[t._v("\n              "+t._s(t.$t("courseManagement/ChapterList_FormCommonHand/ChapterList_5",{zh:"编辑"}))+"\n            ")]),t._v(" "),n("img",{staticClass:"hand",attrs:{src:r(1180)},on:{click:function(r){return t.editCourse(e,"showAdd")}}})],2)],1)]}}],null,!1,160975130)})],t._v(" "),t.showAdd?n("AddCurriculum",{attrs:{type:2,curItem:t.curItem},on:{reloadData:t.reloadData}}):t._e(),t._v(" "),t.showList?n("ChapterCourseList",{attrs:{curData:t.curItem},on:{closeList:t.closeList}}):t._e()],2)}),[],!1,null,"128be8de",null).exports);function tt(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function et(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?tt(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):tt(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var nt={components:{AddChaperNutation:N,AddChaperCurriculum:Y,CourseHandle:k},mixins:[c.a,m],props:{curData:{type:Object,required:!0}},data:function(){var t;return t={list:[],loading:!1,showNutation:!1,nuationList:[]},Object(n.a)(t,"showNutation",!1),Object(n.a)(t,"showCurriculum",!1),Object(n.a)(t,"curItem",{}),Object(n.a)(t,"config",f.a),t},computed:{columns:function(){var t=Object(h.d)(this),e=Object(h.e)(this),r=Object(h.b)(this);return[{title:"章节",dataIndex:"chapterName",key:"chapterName"},{title:"课程名称",dataIndex:"name",key:"name"},{title:"类型",dataIndex:"scene",key:"scene",customRender:function(e){return t[e]}},{title:"状态",dataIndex:"status",key:"status",customRender:function(t){return e[t]}},{title:"开播时间",dataIndex:"start",key:"start",scopedSlots:{customRender:"start"}},{title:"转码状态",dataIndex:"transcode",key:"transcode",customRender:function(t){return 1===t?"已转码":"-"}},{title:"审核状态",dataIndex:"audit",key:"audit",customRender:function(t){return r[t]}},{key:"hanle",scopedSlots:{customRender:"handle"},align:"right"}]}},mounted:function(){this.getNutationHand(),this.getListHand()},methods:{getNutationHand:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.s)(t.curData.id);case 2:r=e.sent,0===(data=r.data).code&&(t.nuationList=data.data.entries);case 5:case"end":return e.stop()}}),e)})))()},getListHand:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.pagination.current=t||e.pagination.current,n={type:3,courseId:e.curData.id,info:{page:e.pagination.current,pageSize:e.pagination.pageSize}},r.next=4,Object(C.q)(n);case 4:o=r.sent,0===(data=o.data).code&&e.setTotalHandle(data,"entries",(function(){e.list=data.data.entries}));case 7:case"end":return r.stop()}}),r)})))()},editCourse:function(t,e){this.curItem=et(et({},t),{},{isEdit:Object.keys(t).length>0,curDataId:this.curData.id}),this[e]=!0}}};r(2072);function at(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function ot(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?at(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):at(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var st={components:{AddCurriculum:z,CampChapterCourseList:Object(l.a)(nt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"camp"},[t.showNutation||t.showCurriculum?t._e():[n("div",{staticClass:"card mt30"},[n("img",{attrs:{src:t.config.IMG_URL.default+t.curData.poster,alt:"",width:"150px",height:"137px"}}),t._v(" "),n("div",{staticClass:"cardContent ml10"},[n("p",{staticClass:"fs18 f600"},[n("span",{staticClass:"mr10"},[t._v(t._s(t.curData.name))]),n("span",[t._v("第"+t._s(t._f("toChineseNum")(t.curData.period))+"期")])]),t._v(" "),n("p",{staticClass:"fs14"},[n("span",{staticClass:"mr10"},[t._v("付费类型")]),n("span",[t._v(t._s(t.curData.price>0?"付费":"免费"))])]),t._v(" "),t.curData.price>0?n("p",[n("span",{staticClass:"fs12 mr5",staticStyle:{color:"#F98101"}},[t._v("¥")]),n("span",{staticClass:"fs30 mr5",staticStyle:{color:"#F98101"}},[t._v(t._s(t.curData.price?""+t.curData.price:""))]),n("span",{staticClass:"fs12"},[t._v("元")])]):t._e()])]),t._v(" "),n("div",{staticClass:"pt25 pb25 pr50"},[n("a-row",{attrs:{type:"flex",align:"middle",justify:"space-between"}},[n("a-col",{staticClass:"fs16 c-333",staticStyle:{display:"flex"},attrs:{span:12}},[n("span",{staticClass:"btn c-fff fs16 pt10 pb10 pl35 pr35",on:{click:function(e){t.showNutation=!0}}},[t._v("\n            新增章节\n          ")]),t._v(" "),n("span",{staticClass:"btn c-fff fs16 pt10 pb10 pl35 pr35",on:{click:function(e){return t.editCourse({},"showCurriculum")}}},[t._v("\n            新增课程\n          ")]),t._v(" "),n("span",{staticClass:"course c-fff fs16 pt10 pb10 pl35 pr35",on:{click:function(e){return t.$emit("back","showList",!1,{})}}},[t._v("\n            返回列表\n          ")])])],1)],1),t._v(" "),n("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},"data-source":t.list,pagination:t.pagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"start",fn:function(e){return n("div",{},[n("span",[t._v(t._s(e?t.$changeTime(e):"-"))])])}},{key:"handle",fn:function(e){return n("div",{staticClass:"handle"},[n("course-handle",{attrs:{record:e,curData:t.curData},on:{getListHand:t.getListHand,reloadData:t.reloadData}},[n("a-popover",{staticClass:"mr10",attrs:{placement:"bottom"}},[n("template",{slot:"content"},[t._v("\n              "+t._s(t.$t("courseManagement/ChapterList_FormCommonHand/ChapterList_5",{zh:"编辑"}))+"\n            ")]),t._v(" "),n("img",{attrs:{src:r(1180)},on:{click:function(r){return t.editCourse(e,"showCurriculum")}}})],2)],1)],1)}}],null,!1,3424948470)})],t._v(" "),t.showNutation?n("AddChaperNutation",{attrs:{curData:t.curData,nuationList:t.nuationList},on:{reloadData:t.reloadData,getNutationHand:t.getNutationHand}}):t._e(),t._v(" "),t.showCurriculum?n("AddChaperCurriculum",{attrs:{curItem:t.curItem,type:3,nuationList:t.nuationList},on:{reloadData:t.reloadData}}):t._e()],2)}),[],!1,null,"25788320",null).exports,CourseHandle:k},mixins:[c.a,m],props:{campId:{type:Number,required:!0}},data:function(){return{columns:[{title:"封面",dataIndex:"poster",key:"poster",scopedSlots:{customRender:"poster"}},{title:"期数",dataIndex:"period",key:"period",scopedSlots:{customRender:"period"},align:"left"},{title:"课程状态",dataIndex:"status",key:"status",customRender:function(t){return 0===t?"未上架":"已上架"}},{title:"付费类型",dataIndex:"price",key:"price",customRender:function(t){return 0===t?"免费":t}},{title:"开营时间",dataIndex:"start",key:"start",scopedSlots:{customRender:"start"}},{title:"展示训练营",key:"camp",scopedSlots:{customRender:"camp"}},{key:"hanle",scopedSlots:{customRender:"handle"},align:"right"}],form:{},rules:{name:[{required:!0,message:"请输入训练营课程名称",trigger:"blur"}]},list:[],searchParams:{feeType:"-1"},loading:!1,showAdd:!1,curItem:{},showList:!1,config:f.a}},computed:{feeTypeList:function(){return{"-1":this.$t("courseManagement/CourseList_FormCommonHand/CourseList_3",{zh:"全部"}),1:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_3",{zh:"免费"}),2:this.$t("courseManagement/ChapterCourseList_FormCommonHand/ChapterCourseList_2",{zh:"付费"})}}},mounted:function(){this.getListHand()},methods:{getListHand:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.pagination.current=t||e.pagination.current,n=ot(ot({},e.searchParams),{},{type:3,campId:e.campId,page:e.pagination.current,pageSize:e.pagination.pageSize}),r.next=4,Object(C.r)(n);case 4:o=r.sent,0===(data=o.data).code&&e.setTotalHandle(data,"entries",(function(){e.list=data.data.entries}));case 7:case"end":return r.stop()}}),r)})))()},toggleStatus:function(t,e,r){this.curItem=r,this[t]=e},handleChange:function(t,e){var r=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.id,n.next=3,Object(C.b)({courseId:o,display:t});case 3:c=n.sent,0===c.data.code&&(r.$message.success("切换状态成功"),r.getListHand());case 6:case"end":return n.stop()}}),n)})))()}}};r(2073);function it(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function ut(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?it(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):it(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var ct={components:{CampCourse:Object(l.a)(st,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"camp"},[t.showAdd||t.showList?t._e():[n("div",{staticClass:"pt25 pb25 pr50"},[n("a-row",{attrs:{type:"flex",align:"middle",justify:"space-between"}},[n("a-col",{staticClass:"fs16 c-333",staticStyle:{display:"flex"},attrs:{span:8}},[n("span",{staticClass:"btn c-fff fs16 pt10 pb10 pl35 pr35",on:{click:function(e){t.showAdd=!0}}},[t._v("\n            新增期数\n          ")]),t._v(" "),n("span",{staticClass:"course c-fff fs16 pt10 pb10 pl35 pr35",on:{click:function(e){return t.$emit("back")}}},[t._v("\n            返回训练营\n          ")])]),t._v(" "),n("a-col",{staticClass:"textRight search",attrs:{span:16}},[n("a-select",{staticStyle:{width:"300px",height:"44px"},attrs:{"default-value":"lucy"},model:{value:t.searchParams.feeType,callback:function(e){t.$set(t.searchParams,"feeType",e)},expression:"searchParams.feeType"}},t._l(t.feeTypeList,(function(e,r,o){return n("a-select-option",{key:o,attrs:{value:r}},[t._v("\n              "+t._s(e)+"\n            ")])})),1),t._v(" "),n("a-button",{staticClass:"searchBtn ml10 pl20 pr20",attrs:{type:"primary"},on:{click:function(e){return t.getListHand(1)}}},[t._v("\n            查询\n          ")])],1)],1)],1),t._v(" "),n("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},"data-source":t.list,pagination:t.pagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"poster",fn:function(e){return n("div",{},[n("img",{attrs:{src:t.config.IMG_URL.default+e,alt:"",width:"100px"}})])}},{key:"period",fn:function(e){return n("div",{},[n("span",[t._v("第"+t._s(e)+"期")])])}},{key:"start",fn:function(e){return n("div",{},[n("span",[t._v(t._s(t.$changeTime(e)))])])}},{key:"camp",fn:function(e){return n("div",{},[n("a-switch",{attrs:{checked:!Boolean(e.noDisplay)},on:{change:function(r){t.handleChange(r,e)}}})],1)}},{key:"handle",fn:function(e){return n("div",{staticClass:"handle"},[n("course-handle",{attrs:{record:e,auth:[3,4,5],level:1},on:{getListHand:t.getListHand,reloadData:t.reloadData}},[n("span",{staticClass:"mr10 course pl30 pr30 pt10 pb10",on:{click:function(r){return t.toggleStatus("showList",!0,e)}}},[t._v("课程列表")]),t._v(" "),n("a-popover",{staticClass:"mr10",attrs:{placement:"bottom"}},[n("template",{slot:"content"},[t._v("\n              "+t._s(t.$t("courseManagement/ChapterList_FormCommonHand/ChapterList_5",{zh:"编辑"}))+"\n            ")]),t._v(" "),n("img",{attrs:{src:r(1180)},on:{click:function(r){return t.toggleStatus("showAdd",!0,e)}}})],2)],1)],1)}}],null,!1,4083451827)})],t._v(" "),t.showAdd?n("AddCurriculum",{attrs:{type:3,curItem:t.curItem,campId:t.campId},on:{reloadData:t.reloadData}}):t._e(),t._v(" "),t.showList?n("CampChapterCourseList",{attrs:{curData:t.curItem},on:{back:t.toggleStatus}}):t._e()],2)}),[],!1,null,"275eb9be",null).exports},mixins:[c.a],data:function(){return{columns:[{title:"名称",dataIndex:"name",key:"name"},{title:"开营期数",dataIndex:"periodNum",key:"periodNum",customRender:function(text){return text||"-"}},{key:"hanle",scopedSlots:{customRender:"handle"},align:"right"}],form:{},rules:{name:[{required:!0,message:"请输入训练营课程名称",trigger:"blur"}]},campVisiable:!1,data:[],campName:"",loading:!1,campCourse:!1,campId:null}},mounted:function(){this.getListHand()},methods:{getListHand:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.pagination.current=t||e.pagination.current,n={name:e.campName,page:e.pagination.current,pageSize:e.pagination.pageSize},r.next=4,Object(C.a)(n);case 4:o=r.sent,0===(data=o.data).code&&e.setTotalHandle(data,"entries",(function(){e.data=data.data.entries}));case 7:case"end":return r.stop()}}),r)})))()},createCourse:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$refs.ruleForm.validate(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return e.next=3,Object(C.c)(ut({},t.form));case 3:n=e.sent,0===n.data.code&&(t.$message.success("添加成功"),t.form={},t.campVisiable=!1,t.getListHand());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))()},edit:function(t){this.form=ut({},t),this.campVisiable=!0},cancel:function(){this.campVisiable=!1,this.form={}},goCampCourse:function(t){var e=t.id;this.campCourse=!0,this.campId=e}}},lt=(r(2074),{layout:"organizers",components:{CourseList:P,ChapterList:Z,TrainingCamp:Object(l.a)(ct,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"camp"},[t.campCourse?t._e():[n("div",{staticClass:"pt25 pb25 pr50"},[n("a-row",{attrs:{type:"flex",align:"middle",justify:"space-between"}},[n("a-col",{staticClass:"fs16 c-333",attrs:{span:4}},[n("span",{staticClass:"btn c-fff fs16 pt10 pb10 pl35 pr35",on:{click:function(e){t.campVisiable=!0}}},[t._v("\n            新增训练营\n          ")])]),t._v(" "),n("a-col",{staticClass:"textRight search",attrs:{span:20}},[n("a-input",{staticStyle:{width:"300px",height:"44px"},attrs:{placeholder:"请输入训练营名称"},model:{value:t.campName,callback:function(e){t.campName=e},expression:"campName"}}),t._v(" "),n("a-button",{staticClass:"searchBtn ml10 pl20 pr20",attrs:{type:"primary"},on:{click:function(e){return t.getListHand(1)}}},[t._v("\n            查询\n          ")])],1)],1)],1),t._v(" "),n("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},"data-source":t.data,pagination:t.pagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"handle",fn:function(e){return n("div",{staticClass:"handle"},[n("span",{staticClass:"mr30 course pl30 pr30 pt10 pb10",on:{click:function(r){return t.goCampCourse(e)}}},[t._v("进入课程")]),t._v(" "),n("a-popover",{staticClass:"operateBtn",attrs:{placement:"bottom"}},[n("template",{slot:"content"},[t._v("\n            "+t._s(t.$t("courseManagement/ChapterList_FormCommonHand/ChapterList_5",{zh:"编辑"}))+"\n          ")]),t._v(" "),n("img",{staticClass:"hand",attrs:{src:r(1180)},on:{click:function(r){return t.edit(e)}}})],2)],1)}}],null,!1,834810072)}),t._v(" "),n("div",[n("a-modal",{attrs:{title:"新增训练营"},on:{ok:t.createCourse,cancel:t.cancel},model:{value:t.campVisiable,callback:function(e){t.campVisiable=e},expression:"campVisiable"}},[n("a-form-model",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-col":{span:7},"wrapper-col":{span:17}}},[n("a-form-model-item",{attrs:{label:"训练营课程名称",prop:"name"}},[n("a-input",{staticStyle:{height:"44px"},attrs:{placeholder:"训练营课程名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1)],1)],1)],t._v(" "),t.campCourse?n("CampCourse",{attrs:{campId:t.campId},on:{back:function(e){t.campCourse=!1}}}):t._e()],2)}),[],!1,null,"216caa86",null).exports},data:function(){return{type:1,list:[{title:"单课",key:"course"},{title:"系列课",key:"chapter"}]}},watch:{$route:function(){var t=this;this.type=null,this.$nextTick((function(){t.type=1}))}},mounted:function(){this.formCollege()},methods:{formCollege:function(){var t=this,e=this.$route.query.course;"1"===e?this.$refs.course.toggleShowAdd():"2"===e&&(this.type=2,this.$nextTick((function(){t.$refs.chapter.toggleShowAdd()})))}},head:function(){return{title:"课程管理",meta:[{hid:"description",name:"description",content:"课程管理"}]}}}),mt=(r(2075),Object(l.a)(lt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"courseManagement"},[r("div",{staticClass:"tabs"},[r("div",{staticClass:"tabItem",class:{active:1===t.type},on:{click:function(e){t.type=1}}},[r("span",{staticClass:"itemInner fs16 c-666"},[t._v(t._s(t.$t("organizers/courseManagement_organizers/courseManagement_1",{zh:"单课"})))])]),t._v(" "),r("div",{staticClass:"tabItem",class:{active:2===t.type},on:{click:function(e){t.type=2}}},[r("span",{staticClass:"itemInner fs16 c-666"},[t._v(t._s(t.$t("organizers/courseManagement_organizers/courseManagement_2",{zh:"系列课"})))])]),t._v(" "),r("div",{staticClass:"tabItem",class:{active:3===t.type},on:{click:function(e){t.type=3}}},[r("span",{staticClass:"itemInner fs16 c-666"},[t._v("训练营")])])]),t._v(" "),t.type?r("div",{staticClass:"conterWrap bg-fff pl25 pr25"},[r("div",{staticClass:"tableList"},[1===t.type?r("CourseList",{ref:"course"}):t._e(),t._v(" "),2===t.type?r("ChapterList",{ref:"chapter"}):t._e(),t._v(" "),3===t.type?r("TrainingCamp",{ref:"camp"}):t._e()],1)]):t._e()])}),[],!1,null,"a5686138",null));e.default=mt.exports}}]);