(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{1058:function(t,e,n){"use strict";var r={data:function(){return{pagination:{current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["5","10","15","20","30","40"],showTotal:function(t){return" 共".concat(t,"条")}}}},methods:{resetPage:function(){this.pagination.current=1,this.pagination.total=0},handleTableChange:function(t){this.pagination=t,this.getListHand&&this.getListHand()},handlePaginatChange:function(t,e){this.pagination.current=t,this.pagination.pageSize=e,this.getListHand&&this.getListHand(),this.$backScrollTop()},setTotalHandle:function(data,t,e){this.pagination.total=+data.data.total,this.pagination.total&&!data.data[t].length?(this.pagination.current=this.pagination.current-1,this.getListHand&&this.getListHand()):e()}}},o=n(18),component=Object(o.a)(r,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null);e.a=component.exports},1084:function(t,e,n){t.exports=n.p+"img/icon.14fa948.png"},1085:function(t,e,n){t.exports=n.p+"img/certificateLogo.e264faf.png"},1086:function(t,e,n){t.exports=n.p+"img/studentLogo.415301d.png"},1087:function(t,e,n){t.exports=n.p+"img/arrowDown.5678e9e.png"},1088:function(t,e,n){},1108:function(t,e,n){t.exports=n.p+"img/upload_icon.0dffd19.png"},1117:function(t,e,n){t.exports=n.p+"img/collect_tip.1c8d1c9.png"},1119:function(t,e,n){t.exports=n.p+"img/right-circle.55fe38a.png"},1121:function(t,e,n){t.exports=n.p+"img/master.e1780ae.png"},1122:function(t,e,n){t.exports=n.p+"img/socreNone.8a3767d.png"},1123:function(t,e,n){t.exports=n.p+"img/warn.09bfcde.png"},1124:function(t,e,n){},1125:function(t,e,n){},1126:function(t,e,n){},1127:function(t,e,n){},1135:function(t,e,n){"use strict";var r={props:{data:{type:Object,required:!0},showMore:{type:Boolean,default:!0}}},o=(n(1140),n(18)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"indexTitle"},[r("div",[t._t("icon"),t._v(" "),r("span",{staticClass:"c-333 f600 fs20 inlineBlock vMiddle title"},[t._v(t._s(t.data.title))])],2),t._v(" "),t.showMore?r("nuxt-link",{attrs:{to:t.data.path||"/allCourse"}},[r("span",{staticClass:"fs12 link"},[t._v("查看更多")]),t._v(" "),r("img",{staticClass:"img",attrs:{src:n(1119)}})]):t._e()],1)}),[],!1,null,"12c658fc",null);e.a=component.exports},1140:function(t,e,n){"use strict";var r=n(1088);n.n(r).a},1146:function(t,e,n){t.exports=n.p+"img/operation4.b240b32.png"},1147:function(t,e,n){t.exports=n.p+"img/download.844b833.png"},1164:function(t,e,n){t.exports=n.p+"img/favor.e607531.png"},1165:function(t,e,n){t.exports=n.p+"img/unfavor.5f9f94d.png"},1166:function(t,e,n){t.exports=n.p+"img/flash.addcd9d.png"},1167:function(t,e,n){t.exports=n.p+"img/chatIcon.687be35.png"},1168:function(t,e,n){t.exports=n.p+"img/punClock.8b69e03.png"},1169:function(t,e,n){t.exports=n.p+"img/greenArrow.9a75e22.png"},1170:function(t,e,n){t.exports=n.p+"img/noTalk.55162e0.png"},1171:function(t,e,n){var map={"./aisLogo.png":1191,"./arrowDown.png":1087,"./bg.png":1247,"./bg1.png":1248,"./buy.png":1192,"./buy1.png":1249,"./buy2.png":1193,"./call.png":1226,"./certificate.png":1250,"./certificateLogo.png":1085,"./chatIcon.png":1167,"./codeBG.png":1251,"./collect_tip.png":1117,"./courseSuccessBg.png":1252,"./courseSuccessBg1.png":1253,"./downArrow.png":1194,"./download.png":1147,"./exceGraduate@2x.png":1195,"./favor.png":1164,"./flash.png":1166,"./flower.png":1196,"./greenArrow.png":1169,"./icon.png":1084,"./iconArrow.png":1172,"./join.png":1197,"./master.png":1121,"./msg.png":1254,"./noTalk.png":1170,"./open.png":1227,"./punClock.png":1168,"./qq.png":1082,"./rightIcon.png":1173,"./socreNone.png":1122,"./studentLogo.png":1086,"./talkBg.png":1255,"./titIcon.png":1198,"./title_bg.png":1256,"./unMsg.png":1257,"./unfavor.png":1165,"./upload_icon.png":1108,"./warn.png":1123,"./weibo.png":1083,"./weixin.png":1081,"./wxIcon.png":1258};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=o,t.exports=r,r.id=1171},1172:function(t,e,n){t.exports=n.p+"img/iconArrow.dc2501d.png"},1173:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMBAMAAACkW0HUAAAAIVBMVEVHcEzvcCD1fCL2eiP1fCP/gCr2eyP1eyP2eyP2fCL1eyN3cRYPAAAACnRSTlMAEMuwggaimMN3PjVWfwAAADNJREFUCNdjUGdgb2RgYLBK4FwkwMAQvIzBS5GBgdUqgQWFW8CyAk5BBKFKoCqg2iGGAQB1Vg75evfpKgAAAABJRU5ErkJggg=="},1188:function(t,e,n){},1189:function(t,e,n){},1190:function(t,e,n){},1191:function(t,e,n){t.exports=n.p+"img/aisLogo.5584b1e.png"},1192:function(t,e,n){t.exports=n.p+"img/buy.55c18b2.png"},1193:function(t,e,n){t.exports=n.p+"img/buy2.e198acf.png"},1194:function(t,e,n){t.exports=n.p+"img/downArrow.b9f8aae.png"},1195:function(t,e,n){t.exports=n.p+"img/exceGraduate@2x.cabf6b9.png"},1196:function(t,e,n){t.exports=n.p+"img/flower.c2d9574.png"},1197:function(t,e,n){t.exports=n.p+"img/join.5a7e45e.png"},1198:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOBAMAAADtZjDiAAAAD1BMVEVHcEzrYwDrZQDtYgDsYwCk9dMYAAAABHRSTlMATSZ/yLWXgAAAADZJREFUCNctylENADAIA9FaAAWTgAfqX9PGuP5c8lJJOtolDSCAAGKgpg/6N+Xak5sCBgx44QLxLgaRPT0j3AAAAABJRU5ErkJggg=="},1199:function(t,e,n){},1200:function(t,e,n){},1226:function(t,e,n){t.exports=n.p+"img/call.96b085f.png"},1227:function(t,e,n){t.exports=n.p+"img/open.a957b44.png"},1244:function(t,e,n){t.exports=n.p+"img/smallCode.e14f95c.jpg"},1245:function(t,e,n){"use strict";var r=n(1124);n.n(r).a},1246:function(t,e,n){"use strict";var r=n(1125);n.n(r).a},1247:function(t,e,n){t.exports=n.p+"img/bg.c2260cb.png"},1248:function(t,e,n){t.exports=n.p+"img/bg1.94e8e79.png"},1249:function(t,e,n){t.exports=n.p+"img/buy1.f131c5e.png"},1250:function(t,e,n){t.exports=n.p+"img/certificate.b0f1da3.png"},1251:function(t,e,n){t.exports=n.p+"img/codeBG.642fbd1.png"},1252:function(t,e,n){t.exports=n.p+"img/courseSuccessBg.487e707.png"},1253:function(t,e,n){t.exports=n.p+"img/courseSuccessBg1.6cb68eb.png"},1254:function(t,e,n){t.exports=n.p+"img/msg.f95ddce.png"},1255:function(t,e,n){t.exports=n.p+"img/talkBg.ba9e9b4.png"},1256:function(t,e,n){t.exports=n.p+"img/title_bg.88c67b3.png"},1257:function(t,e,n){t.exports=n.p+"img/unMsg.ecc752b.png"},1258:function(t,e,n){t.exports=n.p+"img/wxIcon.b9b7148.png"},1259:function(t,e,n){"use strict";var r=n(1126);n.n(r).a},1260:function(t,e,n){"use strict";var r=n(1127);n.n(r).a},1279:function(t,e,n){"use strict";n(44);var r=n(17),o=(n(1050),n(196),n(1375)),c=n.n(o),l={whiteList:c.a.getDefaultWhiteList(),onTagAttr:function(t,e,n){if("style"===e)return"".concat(e,'="').concat(n,'"')}},d=new c.a.FilterXSS(l),m=n(1216),v=n(20),h=n(43),f=n(1061),C=n(1135),_=(n(76),n(45),n(54),n(33)),y=n(109),w=(n(42),n(30),n(281),n(91),n(108),n(90)),k=n(1225);n(478);function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function I(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(_.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var O={props:{data:{type:Object,required:!0},currentTime:{type:Number,required:!0}},data:function(){return{clockVisible:!1,clockPage:1,clockTotal:0,clockList:[],clockType:1,clockDay:0,clockRole:w.a,config:v.a}},methods:{getFirstInfo:function(){0===this.clockTotal&&(this.getCourseClockInfo(),this.getClockRecordList())},clockBtnClick:function(){this.clockVisible=!0},goApply:function(){this.data.price>0&&(this.clockVisible=!1),this.$emit("goApply")},getCourseClockInfo:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.i)(t.data.courseId);case 2:n=e.sent,0===(data=n.data).code&&(t.clockDay=data.data.dayClock);case 5:case"end":return e.stop()}}),e)})))()},clockSwitch:function(){this.clockType=1===this.clockType?0:1,this.clockPage=1,this.getClockRecordList()},changePic:function(t){return(t?t.includes(",")?t.split(","):[t]:[]).filter((function(p){return p}))},getClockRecordList:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.h)(t.data.courseId,{page:t.clockPage,pageSize:10,type:t.clockType});case 2:n=e.sent,0===(data=n.data).code&&(t.clockList=1===t.clockPage?data.data.entries:[].concat(Object(y.a)(t.clockList),Object(y.a)(data.data.entries)),t.clockTotal=+data.data.total);case 5:case"end":return e.stop()}}),e)})))()},getClockCommentList:function(t,e){var n=arguments,o=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var c,l,data,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(!(n.length>2&&void 0!==n[2])||n[2])){r.next=10;break}return c=(e.page||0)+1,r.next=5,Object(f.g)(e.id,{page:c,pageSize:100});case 5:l=r.sent,0===(data=l.data).code&&(d=1===c?data.data.entries:[].concat(Object(y.a)(e.commentList),Object(y.a)(data.data.entries)),o.$set(o.clockList,t,I(I({},e),{},{page:c,total:data.data.total,commentList:d}))),r.next=14;break;case 10:delete e.page,delete e.total,delete e.commentList,o.$set(o.clockList,t,e);case 14:case"end":return r.stop()}}),r)})))()},showMoreClock:function(){this.clockPage+=1,this.getClockRecordList()},picClick:function(t,e){for(var n=this.changePic(e),i=0;i<n.length;i++)n[i].includes(v.a.IMG_URL.default)||(n[i]={src:"".concat(v.a.IMG_URL.default).concat(n[i])});Object(k.api)({options:{toolbar:!0,url:"src",initialViewIndex:t},images:n})},onload:function(t){this.$nextTick((function(){t.target.width>1&&Object(h.imgsSize)(t.target,".pic")}))}}},T=(n(1245),n(18)),j=Object(T.a)(O,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"clockWrap"},[r("div",{staticClass:"clockTab"},[r("img",{attrs:{src:n(1166),height:"17"}}),t._v(" "),r("div",[t._v("\n      "+t._s("今日已有"+t.clockDay+"人打卡")+"\n    ")]),t._v(" "),r("ul",{staticClass:"switch"},[r("li",{on:{click:t.clockSwitch}},[t._v("\n        精华\n      ")]),t._v(" "),r("li",{on:{click:t.clockSwitch}},[t._v("\n        最新\n      ")]),t._v(" "),r("li",{class:["switchMove",0===t.clockType?"moveLeft":"moveRight"]},[t._v("\n        "+t._s(1===t.clockType?"精华":"最新")+"\n      ")])])]),t._v(" "),t.clockTotal>0?r("ul",[t._l(t.clockList,(function(e,o){return r("li",{key:e.id,staticClass:"clockItem"},[r("img",{staticClass:"avatar",attrs:{src:""+(e.avatar?e.avatar:n(1121))}}),t._v(" "),r("div",{staticClass:"pl10 wrap"},[r("div",{staticClass:"f500 name"},[t._v("\n          "+t._s(e.nickname)+"\n        ")]),t._v(" "),r("div",{staticClass:"createTime"},[t._v("\n          "+t._s(t.$changeTime(e.createTime)+" 打卡")+"\n        ")]),t._v(" "),e.content&&"undefined"!==e.content?r("div",{staticClass:"f500 content mt5 mb5"},[t._v("\n          "+t._s(e.content)+"\n        ")]):t._e(),t._v(" "),t._l(t.changePic(e.pic),(function(n,o){return r("div",{key:o,staticClass:"pic mr7"},[r("img",{staticClass:"hand",attrs:{src:""+t.config.IMG_URL.default+n},on:{click:function(n){return t.picClick(o,e.pic)},load:t.onload}})])})),t._v(" "),e.teacherComment&&e.teacherComment.length?r("ul",t._l(e.teacherComment,(function(e){return r("li",{key:e.id,staticClass:"teacherItem"},[r("div",{staticClass:"textCenter"},[r("img",{staticClass:"avatar",attrs:{src:""+(e.avatar?e.avatar:n(1121))}}),t._v(" "),r("p",{class:["role","role"+e.role]},[t._v("\n                "+t._s(t.clockRole[e.role])+"\n              ")])]),t._v(" "),r("div",{staticClass:"desc"},[r("div",{staticClass:"descName"},[t._v("\n                "+t._s(e.userName)+"\n              ")]),t._v(" "),r("div",{staticClass:"descContent"},[t._v("\n                "+t._s(e.content)+"\n              ")])])])})),0):t._e(),t._v(" "),e.comments-e.teacherComment.length>0?r("p",{staticClass:"hand mt16 chatIcon",on:{click:function(n){t.getClockCommentList(o,e,!e.hasOwnProperty("commentList"))}}},[r("img",{staticClass:"mr5",attrs:{src:n(1167)}}),t._v("\n          "+t._s("查看全部评论("+(e.comments-e.teacherComment.length)+")")+"\n        ")]):t._e(),t._v(" "),e.commentList?r("ul",{staticClass:"commentWrap"},[t._l(e.commentList,(function(n){return r("li",{key:n.id},[r("div",{staticClass:"c-333 f500"},[r("div",[r("span",{staticStyle:{color:"#EC8567"}},[t._v(t._s(n.userName||"艾思用户"))]),t._v(" "),n.replyUserName?r("span",[t._v("@"+t._s(n.replyUserName||"艾思用户")+" : "+t._s(n.replyContent))]):t._e()]),t._v(" "),r("div",[t._v("\n                "+t._s(n.content)+"\n              ")])]),t._v(" "),r("div",{staticClass:"c-666 mt5"},[t._v("\n              "+t._s(t.$changeTime(e.createTime))+"\n            ")])])})),t._v(" "),e.commentList.length<e.total?r("div",{staticClass:"hand textCenter",on:{click:function(n){return t.getClockCommentList(o,e,!0)}}},[t._v("\n            查看更多\n          ")]):t._e()],2):t._e()],2)])})),t._v(" "),t.clockTotal>t.clockList.length?r("div",{staticClass:"c-f57 hand textCenter mb25",on:{click:t.showMoreClock}},[t._v("\n      展开更多评论\n      "),r("a-icon",{attrs:{type:"caret-down"}})],1):t._e()],2):t._e(),t._v(" "),0==t.clockTotal?r("div",{staticClass:"textCenter pt60"},[r("img",{attrs:{src:n(1122)}}),t._v(" "),r("p",{staticClass:"c-666 fs16 mt40"},[t._v("\n      暂无数据\n    ")])]):t._e(),t._v(" "),r("div",{staticClass:"mt20 textCenter"},[r("img",{staticClass:"hand",attrs:{src:n(1168)},on:{click:t.clockBtnClick}})]),t._v(" "),r("a-modal",{staticClass:"ClockModal",attrs:{visible:t.clockVisible,footer:null,width:400},on:{cancel:function(e){t.clockVisible=!1}}},[t.data&&1===t.data.type&&t.data.lives&&t.data.lives[0]&&t.data.lives[0].end&&t.data.lives[0].end<t.currentTime?r("div",{staticClass:"textCenter"},[r("img",{attrs:{src:n(1123),width:"40",height:"40"}}),t._v(" "),r("div",{staticClass:"mt10 c-666 fs13"},[t._v("\n        课程已结束报名，请您参加下一期课程\n      ")]),t._v(" "),r("a-button",{staticClass:"ml5 mr5 btnClock btnClockWhite",on:{click:function(e){t.clockVisible=!1}}},[t._v("\n        关闭\n      ")])],1):t.data.apply?r("div",{staticClass:"textCenter"},[r("img",{attrs:{src:n(1169),width:"40",height:"40"}}),t._v(" "),r("div",{staticClass:"mt10 c-666 fs13"},[t._v("\n        请前往艾思打卡小程序进行报名，添加小程序二维码\n      ")]),t._v(" "),r("div",{staticClass:"textCenter mt15 mb5"},[r("img",{attrs:{src:n(1244),width:"130",height:"130"}})]),t._v(" "),r("a-button",{staticClass:"ml5 mr5 btnClock btnClockWhite",on:{click:function(e){t.clockVisible=!1}}},[t._v("\n        关闭\n      ")])],1):r("div",{staticClass:"textCenter pl30 pr30 f500"},[r("img",{attrs:{src:n(1123),width:"40",height:"40"}}),t._v(" "),r("div",{staticClass:"c-666 fs13"},[t._v("\n        "+t._s("您还未"+(t.data.price>0?"购买":"报名")+"该课程，请"+(t.data.price>0?"购买":"报名")+"参加吧。")+"\n      ")]),t._v(" "),r("a-button",{staticClass:"ml5 mr5 btnClock btnClockColor",on:{click:t.goApply}},[t._v("\n        确定\n      ")]),t._v(" "),r("a-button",{staticClass:"ml5 mr5 btnClock btnClockWhite",on:{click:function(e){t.clockVisible=!1}}},[t._v("\n        取消\n      ")])],1)])],1)}),[],!1,null,"6c15ad75",null).exports,L={mixins:[n(1058).a],props:{data:{type:Object,required:!0}},data:function(){return{commonForm:{score:null,content:null},starArr:["很差","差","一般","好","非常好"],rules:{score:[{validator:this.vaildScore}],content:[{required:!0,message:"请填写评价!"}]},scoreList:[],initScoreList:!1}},methods:{getFirstInfo:function(){this.initScoreList||this.getListHand()},getListHand:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={page:t.pagination.current,pageSize:20},e.next=3,Object(f.p)(t.data.courseId,n);case 3:r=e.sent,0===(data=r.data).code&&t.setTotalHandle(data,"entries",(function(){t.scoreList=1===t.pagination.current?data.data.entries:[].concat(Object(y.a)(t.scoreList),Object(y.a)(data.data.entries)),t.initScoreList=!0}));case 6:case"end":return e.stop()}}),e)})))()},vaildScore:function(t,e,n){if(e<1||!e)return n("请评分!");n()},showMoreScore:function(){this.pagination.current+=1,this.getListHand()},handleSubmit:function(){var t=this;this.$refs.ruleForm.validate(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=8;break}return e.next=3,Object(f.x)(t.data.courseId,t.commonForm);case 3:r=e.sent,0===r.data.code&&(t.$message.success("提交成功!"),t.pagination.current=1,t.getListHand(),t.$emit("getCourseDetail")),e.next=9;break;case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},R=(n(1246),Object(T.a)(L,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"min490"},[t.data.apply&&!t.data.evaluated?r("a-form-model",{ref:"ruleForm",staticClass:"commonForm",attrs:{model:t.commonForm,rules:t.rules}},[r("a-form-model-item",{staticClass:"starWrap",attrs:{prop:"score",label:"给课程评星"}},[r("a-rate",{model:{value:t.commonForm.score,callback:function(e){t.$set(t.commonForm,"score",e)},expression:"commonForm.score"}}),t._v(" "),r("span",{staticClass:"ml15 starTip"},[t._v(t._s(t.starArr[t.commonForm.score-1]))])],1),t._v(" "),r("a-form-model-item",{attrs:{prop:"content"}},[r("a-textarea",{attrs:{placeholder:"说点什么…",rows:4,maxLength:200},model:{value:t.commonForm.content,callback:function(e){t.$set(t.commonForm,"content",e)},expression:"commonForm.content"}})],1),t._v(" "),r("a-form-model-item",{staticClass:"textRight mt10"},[r("a-button",{staticClass:"btns",on:{click:t.handleSubmit}},[t._v("\n        发表评价\n      ")])],1)],1):t._e(),t._v(" "),t.pagination.total>0?[r("div",{staticClass:"pt5 pb5 borderBottom_ef c-9898"},[r("span",{staticClass:"f500 c-333"},[t._v("全部评价")]),t._v(" "),r("span",{staticClass:"fs12"},[t._v("("+t._s(t.pagination.total)+")")])]),t._v(" "),r("ul",{staticClass:"mt5 scoreListWrap"},t._l(t.scoreList,(function(e,n){return r("li",{key:n,staticClass:"pt15 pb15 fs12 borderBottom_ef"},[r("div",{staticClass:"fs12 oneLine c-333"},[t._v("\n          "+t._s(e.nickname)+"\n        ")]),t._v(" "),r("a-rate",{attrs:{value:e.score,disabled:""}}),t._v(" "),r("a-row",{staticClass:"c-9898"},[r("a-col",{staticClass:"breakAll",attrs:{span:22}},[t._v("\n            "+t._s(e.content)+"\n          ")]),t._v(" "),r("a-col",{attrs:{span:2}},[t._v("\n            "+t._s(t.$changeTime(e.createTime,"YYYY/MM/DD"))+"\n          ")])],1),t._v(" "),e.replyContent?r("div",{staticClass:"mt10 scoreListAns"},[r("p",{staticClass:"f500 c-076"},[t._v("\n            艾思云课堂官方回复：\n          ")]),t._v(" "),r("div",{staticClass:"c-666 breakAll"},[t._v("\n            "+t._s(e.replyContent)+"\n          ")])]):t._e()],1)})),0),t._v(" "),t.pagination.total>t.scoreList.length?r("div",{staticClass:"c-f57 hand textCenter mb25",on:{click:t.showMoreScore}},[t._v("\n      展开更多评价\n      "),r("a-icon",{attrs:{type:"caret-down"}})],1):t._e()]:t._e(),t._v(" "),t.initScoreList&&0===t.pagination.total?r("div",{staticClass:"textCenter pt60"},[r("img",{attrs:{src:n(1122)}}),t._v(" "),r("p",{staticClass:"c-666 fs16 mt40"},[t._v("\n      暂无评价\n    ")])]):t._e()],2)}),[],!1,null,"363cd9fe",null).exports),S=n(77);function D(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function P(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?D(Object(source),!0).forEach((function(e){Object(_.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):D(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var A={props:{data:{type:Object,required:!0}},data:function(){return{commentPageSize:20,commentPage:1,commentTotal:0,commentAllTotal:0,commentList:[],commentForm:{},commentReply:{},commentEdit:{},initComment:!1,posterList:{},config:v.a,isShowBottomForm:!0}},methods:{getFirstInfo:function(){this.initComment||this.getCourseCommentList()},changePic:function(t){return t?t.includes(",")?t.split(","):[t]:[]},picClick:function(t,e){for(var n=this.changePic(e),i=0;i<n.length;i++)n[i].includes(v.a.IMG_URL.default)||(n[i]={src:"".concat(v.a.IMG_URL.default).concat(n[i])});Object(k.api)({options:{toolbar:!0,url:"src",initialViewIndex:t},images:n})},customPosterRequest:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,c,code,l,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.posterList[t.data.replyId]&&e.posterList[t.data.replyId].length>2)){n.next=2;break}return n.abrupt("return",e.$message.error("回复最多只能上传3张图片!"));case 2:return(r=new FormData).append("file",t.file),n.next=6,Object(S.d)(r);case 6:o=n.sent,c=o.data,code=c.code,l=c.data,0===code&&(d=[],e.posterList[t.data.replyId]&&(d=e.posterList[t.data.replyId]),d.push(l),e.$set(e.posterList,t.data.replyId,d));case 11:case"end":return n.stop()}}),n)})))()},removePoster:function(t,e){this.posterList[t].splice(e,1)},getCourseCommentList:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,code,o,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.j)(t.data.courseId,{page:t.commentPage,pageSize:t.commentPageSize});case 2:n=e.sent,r=n.data,code=r.code,o=r.data,c=o.total,l=o.entries,d=o.sum,0===code&&(t.commentTotal=+c,t.commentAllTotal=+d,t.commentList=1===t.commentPage?l:[].concat(Object(y.a)(t.commentList),Object(y.a)(l)),t.initComment=!0);case 10:case"end":return e.stop()}}),e)})))()},getCousrCommentSublist:function(t,e){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var o,data,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(f.q)({courseId:t,parentId:e});case 2:o=r.sent,0===(data=o.data).code&&(c=n.commentList.findIndex((function(p){return p.id===e})),n.$set(n.commentList,c,P(P({},n.commentList[c]),{},{children:data.data.entries})));case 5:case"end":return r.stop()}}),r)})))()},submitComment:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.commentForm[t.prop]){n.next=2;break}return n.abrupt("return",e.$message.error("请添加发布内容!"));case 2:return r={content:e.commentForm[t.prop],parentId:t.parentId,replyId:t.replyId,topticId:t.courseId},(o=e.posterList[t.replyId])&&o.length&&(o=o.join(","),r.pic=o),n.next=7,Object(f.w)(r);case 7:c=n.sent,0===c.data.code&&(e.$set(e.commentForm,t.prop,null),e.$set(e.posterList,t.replyId,null),e.$message.success("发布成功!"),t.parentId?(e.commentEdit[t.parentId]&&e.getCousrCommentSublist(t.courseId,t.parentId),l=e.commentList.findIndex((function(p){return p.id===t.parentId})),e.$set(e.commentList,l,P(P({},e.commentList[l]),{},{replies:e.commentList[l].replies+1}))):(e.commentPage=1,e.getCourseCommentList()),"parent"!==t.prop&&e.$set(e.commentReply,t.prop,!1),e.isShowBottomForm=!0,e.commentAllTotal+=1);case 10:case"end":return n.stop()}}),n)})))()},showReply:function(t){this.isShowBottomForm=this.commentReply[t],this.commentReply={},this.$set(this.commentReply,t,!this.isShowBottomForm),this.$nextTick((function(){document.getElementById("commentReply".concat(t)).focus()}))},openCommentReply:function(t){var e=t.id,n=t.topticId;this.commentEdit[e]||this.getCousrCommentSublist(n,e),this.$set(this.commentEdit,e,!this.commentEdit[e])},showMoreComment:function(){this.commentPage+=1,this.getCourseCommentList()},onload:function(t){this.$nextTick((function(){t.target.width>1&&Object(h.imgsSize)(t.target,".pic")}))}}},M=(n(1259),Object(T.a)(A,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.initComment?r("div",[0===t.commentTotal?r("div",{staticClass:"textCenter pt80"},[r("img",{attrs:{src:n(1170)}}),t._v(" "),r("p",{staticClass:"c-666 fs16 mt37"},[t._v("\n      快来发布第一条讨论吧\n    ")])]):t._e(),t._v(" "),t.commentTotal>0?r("div",{staticClass:"pt20 c-333 fs14"},[r("div",{staticClass:"f500"},[r("span",[t._v("全部评论")]),t._v(" "),r("span",{staticClass:"c-98"},[t._v("("+t._s(t.commentAllTotal)+")")])]),t._v(" "),r("ul",{staticClass:"mt14"},t._l(t.commentList,(function(e){return r("li",{key:e.id,staticClass:"pt12 borderBottom pb10"},[r("div",{staticClass:"f600 oneLine"},[t._v("\n          "+t._s(e.userName)+"\n        ")]),t._v(" "),r("div",{staticClass:"c-666 mt14 breakAll"},[t._v("\n          "+t._s(e.content)+"\n        ")]),t._v(" "),e.pic?r("ul",{staticClass:"posterWrap"},t._l(t.changePic(e.pic),(function(n,o){return r("li",{key:o,staticClass:"hand pic",on:{click:function(n){return t.picClick(o,e.pic)}}},[r("img",{attrs:{src:""+t.config.IMG_URL.default+n}})])})),0):t._e(),t._v(" "),e.insideReply?r("div",{staticClass:"officeWrap fs12 borderAll"},[r("div",[r("span",{staticClass:"name c-009"},[t._v("艾思云课堂官方")]),t._v(" "),r("span",[t._v("回复")]),t._v(" "),r("span",[t._v(t._s(e.userName)+":")])]),t._v(" "),r("div",[t._v("\n            "+t._s(e.insideReply)+"\n          ")])]):t._e(),t._v(" "),r("div",{staticClass:"c-98 flexBox fs12 mt10"},[r("span",[t._v(t._s(t.$changeTime(e.createTime,"YYYY/MM/DD HH:mm")))]),t._v(" "),r("div",{class:["hand",{"c-076":t.commentReply[""+e.id]}],on:{click:function(n){return t.showReply(e.id)}}},[r("img",{staticClass:"icon",attrs:{src:n(1171)("./"+(t.commentReply[""+e.id]?"msg":"unMsg")+".png")}}),t._v(" "),r("span",[t._v(t._s(t.commentReply[e.id]?"收起":"回复"))])])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.commentReply[e.id],expression:"commentReply[item.id]"}],staticClass:"mt10"},[r("a-textarea",{attrs:{id:"commentReply"+e.id,placeholder:"回复评论...",rows:4},model:{value:t.commentForm[e.id],callback:function(n){t.$set(t.commentForm,e.id,n)},expression:"commentForm[item.id]"}}),t._v(" "),r("div",{staticClass:"mt18 textRight"},[r("ul",{staticClass:"posterWrap"},t._l(t.posterList[e.id],(function(n,o){return r("li",{key:o},[r("a-icon",{staticClass:"closeIcon",attrs:{type:"close-circle"},on:{click:function(n){return t.removePoster(e.id,o)}}}),t._v(" "),r("img",{attrs:{src:""+t.config.IMG_URL.default+n}})],1)})),0),t._v(" "),r("div",{staticClass:"btnsWrap"},[r("a-upload",{attrs:{name:"files",accept:".jpg, .jpeg, .png","show-upload-list":!1,customRequest:t.customPosterRequest,data:{replyId:e.id}}},[r("a-button",{staticClass:"btns btns-c",attrs:{type:"primary"}},[t._v("\n                  上传图片\n                  "),r("img",{staticClass:"ml5",attrs:{src:n(1108)}})])],1),t._v(" "),r("a-button",{staticClass:"btns",attrs:{type:"primary"},on:{click:function(n){return t.submitComment({prop:e.id,parentId:e.id,replyId:e.id,courseId:e.topticId})}}},[t._v("\n                发布\n              ")])],1)])],1),t._v(" "),e.replies>0?r("div",{staticClass:"c-076 hand mt10",on:{click:function(n){return t.openCommentReply(e)}}},[t._v("\n          "+t._s(t.commentEdit[e.id]?"收起":"展开")+"其他"+t._s(e.replies)+"条回复\n        ")]):t._e(),t._v(" "),t.commentEdit[e.id]?r("ul",t._l(e.children,(function(o){return r("li",{key:o.id,staticClass:"bg-f6 pt9 pr18 pb14 pl14 mt10 fs12 c-333"},[r("p",[r("span",[t._v(t._s(o.userName))]),t._v(" "),r("span",{staticClass:"c-98"},[t._v("回复")]),t._v("\n              "+t._s(o.replyUserName)+"：\n            ")]),t._v(" "),r("div",{staticClass:"mt8 breakAll"},[t._v("\n              "+t._s(o.content)+"\n            ")]),t._v(" "),o.pic?r("ul",{staticClass:"posterWrap"},t._l(t.changePic(o.pic),(function(e,n){return r("li",{key:n,staticClass:"hand pic",on:{click:function(e){return t.picClick(n,o.pic)}}},[r("img",{attrs:{src:""+t.config.IMG_URL.default+e}})])})),0):t._e(),t._v(" "),r("div",{staticClass:"mt10 c-98 flexBox"},[r("div",{class:["hand",{"c-076":t.commentReply[""+e.id+o.id]}],on:{click:function(n){return t.showReply(""+e.id+o.id)}}},[r("img",{staticClass:"icon",attrs:{src:n(1171)("./"+(t.commentReply[""+e.id+o.id]?"msg":"unMsg")+".png")}}),t._v(" "),r("span",[t._v(t._s(t.commentReply[""+e.id+o.id]?"收起":"回复"))])]),t._v(" "),r("span",[t._v(t._s(t.$changeTime(o.createTime,"YYYY/MM/DD HH:mm")))])]),t._v(" "),o.insideReply?r("div",{staticClass:"officeWrap fs12 borderAll"},[r("div",[r("span",{staticClass:"name c-009"},[t._v("艾思云课堂官方")]),t._v(" "),r("span",[t._v("回复")]),t._v(" "),r("span",[t._v(t._s(o.userName)+":")])]),t._v(" "),r("div",[t._v("\n                "+t._s(o.insideReply)+"\n              ")])]):t._e(),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.commentReply[""+e.id+o.id],expression:"commentReply[`${item.id}${pItem.id}`]"}],staticClass:"mt10"},[r("a-textarea",{attrs:{id:"commentReply"+e.id+o.id,placeholder:"回复评论...",rows:4},model:{value:t.commentForm[""+e.id+o.id],callback:function(n){t.$set(t.commentForm,""+e.id+o.id,n)},expression:"commentForm[`${item.id}${pItem.id}`]"}}),t._v(" "),r("div",{staticClass:"textRight mt18"},[r("ul",{staticClass:"posterWrap"},t._l(t.posterList[o.id],(function(e,n){return r("li",{key:n},[r("a-icon",{staticClass:"closeIcon",attrs:{type:"close-circle"},on:{click:function(e){return t.removePoster(o.id,n)}}}),t._v(" "),r("img",{attrs:{src:""+t.config.IMG_URL.default+e}})],1)})),0),t._v(" "),r("div",{staticClass:"btnsWrap"},[r("a-upload",{attrs:{name:"files",accept:".jpg, .jpeg, .png","show-upload-list":!1,customRequest:t.customPosterRequest,data:{replyId:o.id}}},[r("a-button",{staticClass:"btns btns-c",attrs:{type:"primary"}},[t._v("\n                      上传图片\n                      "),r("img",{staticClass:"ml5",attrs:{src:n(1108)}})])],1),t._v(" "),r("a-button",{staticClass:"btns",attrs:{type:"primary"},on:{click:function(n){return t.submitComment({prop:""+e.id+o.id,parentId:e.id,replyId:o.id,courseId:o.topticId})}}},[t._v("\n                    发布\n                  ")])],1)])],1)])})),0):t._e()])})),0)]):t._e(),t._v(" "),t.commentTotal>t.commentList.length?r("div",{staticClass:"c-f57 hand textCenter mb25",on:{click:t.showMoreComment}},[t._v("\n    展开更多评论\n    "),r("a-icon",{attrs:{type:"caret-down"}})],1):t._e(),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowBottomForm,expression:"isShowBottomForm"}]},[r("a-textarea",{attrs:{placeholder:"发表评论...",rows:4},model:{value:t.commentForm.parent,callback:function(e){t.$set(t.commentForm,"parent",e)},expression:"commentForm.parent"}}),t._v(" "),r("div",{staticClass:"mt18"},[r("ul",{staticClass:"posterWrap"},t._l(t.posterList[0],(function(e,n){return r("li",{key:n},[r("a-icon",{staticClass:"closeIcon",attrs:{type:"close-circle"},on:{click:function(e){return t.removePoster("0",n)}}}),t._v(" "),r("img",{attrs:{src:""+t.config.IMG_URL.default+e}})],1)})),0),t._v(" "),r("div",{staticClass:"btnsWrap"},[r("a-upload",{attrs:{name:"files",accept:".jpg, .jpeg, .png","show-upload-list":!1,customRequest:t.customPosterRequest,data:{replyId:0}}},[r("a-button",{staticClass:"btns btns-c",attrs:{type:"primary"}},[t._v("\n            上传图片\n            "),r("img",{staticClass:"ml5",attrs:{src:n(1108)}})])],1),t._v(" "),r("a-button",{staticClass:"btns",attrs:{type:"primary"},on:{click:function(e){return t.submitComment({prop:"parent",parentId:0,replyId:0,courseId:t.data.courseId})}}},[t._v("\n          发布\n        ")])],1)])],1)]):t._e()}),[],!1,null,"68116220",null).exports),$={components:{ComfirmOrder:m.a,IndexTitle:C.a,CourseClock:j,CourseEval:R,CourseComment:M},props:{data:{type:Object,required:!0,default:function(){return{content:null}}},isVideoPage:{type:Boolean,default:!1}},data:function(){return{config:v.a,activeKey:"1",visible:!1,currentTime:parseInt((new Date).getTime()/1e3),isVideoLives:!1}},computed:{tops:function(){return this.$store.state.home.homeTops.tops},tabData:function(){var t=[{title:"课程介绍",value:"1"}];return 1!==this.data.type&&t.push({title:"课程目录",value:"2"}),t.push({title:"评价",value:"3"}),this.isVideoLives||t.push({title:"讨论区",value:"4"}),t.push({title:"打卡区",value:"5"}),t}},mounted:function(){var t=this;if(!this.isVideoPage&&this.$route.query.activeKey&&this.handleChange(this.$route.query.activeKey),this.isVideoPage){var e=this.data.lives.findIndex((function(p){return p.id===+t.$route.params.id}));this.isVideoLives=1!==this.data.lives[e].scene}},methods:{xssDefense:function(content){return d.process(content)},timeFn:function(t){if(1===t.scene){var e=Object(h.secondsChangeFormat)(t.duration),n=e.h,r=e.m,s=e.s;return Number(n)>0?"".concat(n,":").concat(r,":").concat(s,"(录播)"):"".concat(r,":").concat(s,"(录播)")}var o=parseInt((new Date).getTime()/1e3),c="".concat(this.$changeTime(t.start));return 1===t.liveStatus||o>t.start&&t.end>o?c+="(直播中)":o>t.end?c+="(直播已结束)":t.start-o>0&&(c+=0<t.start-o&&t.start-o<900?"(直播即将开始)":"直播"),c},verifyCourseStatus:function(t){return!!this.data.apply||((t.previewTime>0||-1===t.previewTime)&&1===t.scene?(this.$router.push({path:"/videoDetail/".concat(t.id,"?isPreview=true")}),!1):this.data.price>0?(this.visible=!0,!1):(this.$message.error("请先报名课程"),!1))},courseClick:function(t){return!!this.verifyCourseStatus(t)&&(!(1!==t.scene&&this.currentTime>t.end)&&(1===t.scene||1===t.liveStatus||t.end>this.currentTime&&this.currentTime>t.start||t.start-this.currentTime<900&&0===t.liveStatus?void this.$router.push({path:"/videoDetail/".concat(t.id)}):this.$message.info("直播未开始!")))},goCourseList:function(){this.activeKey="2"},handleChange:function(t){"3"===t&&this.$refs.CourseEval.getFirstInfo(),"4"===t&&this.$refs.CourseComment.getFirstInfo(),"5"===t&&this.$refs.CourseClock.getFirstInfo(),this.activeKey=t},downLoadCourse:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,code,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.data.apply){n.next=2;break}return n.abrupt("return",0===e.data.price?e.$message.error("请先报名课程"):e.visible=!0);case 2:return n.next=4,Object(f.d)({courseId:e.data.courseId,liveId:t.id});case 4:r=n.sent,o=r.data,code=o.code,c=o.data,0===code&&window.open(c.document);case 9:case"end":return n.stop()}}),n)})))()},goApply:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.data.price>0)){e.next=4;break}t.visible=!0,e.next=9;break;case 4:return e.next=6,Object(f.a)(t.data.courseId);case 6:n=e.sent,0===n.data.code&&(t.$message.success("报名成功!"),t.$router.push("/pay/finish/".concat(t.data.courseId)));case 9:case"end":return e.stop()}}),e)})))()}}},N=(n(1260),Object(T.a)($,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"courseDetail mt24"},[r("div",{staticClass:"leftWrap"},[r("ul",{staticClass:"c-666 fs16 f600 pt10 headerWrap"},t._l(t.tabData,(function(e){return r("li",{key:e.value,class:{headerSelect:t.activeKey===e.value},on:{click:function(n){return t.handleChange(e.value)}}},[t._v("\n        "+t._s(e.title)+"\n      ")])})),0),t._v(" "),[r("div",{directives:[{name:"show",rawName:"v-show",value:"1"===t.activeKey,expression:"activeKey==='1'"}],staticClass:"pt20 pb5 descript min490 ueEditorStyle",domProps:{innerHTML:t._s(t.xssDefense(t.data.content))}}),t._v(" "),1!==t.data.type?r("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.activeKey,expression:"activeKey==='2'"}],staticClass:"min490"},t._l(t.data.livesObj,(function(e,o,c){return r("div",{key:c},["null"!==o?r("div",{staticClass:"fs16 mt20 c-333 f500"},[t._v("\n            "+t._s(o)+"\n          ")]):t._e(),t._v(" "),t._l(e,(function(e){return r("div",{key:e.id,staticClass:"historyListWrap",on:{click:function(n){return t.courseClick(e)}}},[r("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{href:"/videoDetail/"+e.id}},[t._v("\n              "+t._s(e.name)+"\n            ")]),t._v(" "),r("div",{staticClass:"historyList mt10 hand"},[r("div",{staticClass:"c-666 oneLine classTitle"},[t._v("\n                "+t._s(e.name)+"\n              ")]),t._v(" "),r("div",{staticClass:"c-98 f500 classTime"},[(e.previewTime>0||-1===e.previewTime)&&1===e.scene&&!t.data.apply?r("img",{staticClass:"previewImg",attrs:{src:n(1146),title:"免费试听"}}):t._e(),t._v(" "),r("span",[t._v(t._s(t.timeFn(e)))]),t._v(" "),e.document?r("div",{staticClass:"courseDownload ml10",on:{click:function(n){return n.stopPropagation(),t.downLoadCourse(e)}}},[r("span",[t._v("课件下载")]),t._v(" "),r("img",{staticClass:"ml5 mb2",attrs:{src:n(1147),alt:"课件下载"}})]):t._e()])])])}))],2)})),0):t._e(),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"3"===t.activeKey,expression:"activeKey==='3'"}],staticClass:"min490"},[r("CourseEval",{ref:"CourseEval",attrs:{data:t.data}})],1),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"4"===t.activeKey,expression:"activeKey==='4'"}],staticClass:"min490"},[t._t("CourseLastBuy"),t._v(" "),r("CourseComment",{ref:"CourseComment",attrs:{data:t.data}})],2),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"5"===t.activeKey,expression:"activeKey==='5'"}],staticClass:"clockWrap"},[r("CourseClock",{ref:"CourseClock",attrs:{data:t.data,currentTime:t.currentTime},on:{goApply:t.goApply}})],1)]],2),t._v(" "),r("div",{staticClass:"rightWrap ml24"},[r("IndexTitle",{staticClass:"rightTitle",attrs:{data:{title:"精品推荐",path:"/allCourse"}}}),t._v(" "),r("div",{staticClass:"rightUl"},t._l(t.tops,(function(e,n){return r("nuxt-link",{key:n,staticClass:"rightItem ml15 mt20 ",attrs:{to:"/courseDetail/"+e.id}},[r("img",{staticClass:"rightImg",attrs:{src:""+t.config.IMG_URL.default+e.poster}}),t._v(" "),r("div",{staticClass:"mt5 twoLine fs12 textCenter c-333"},[t._v("\n          "+t._s(e.name)+"\n        ")])])})),1)],1),t._v(" "),t.visible?r("ComfirmOrder",{attrs:{visible:t.visible,courseId:t.data.courseId},on:{"update:visible":function(e){t.visible=e}}}):t._e()],1)}),[],!1,null,"0e547ef7",null));e.a=N.exports},1363:function(t,e,n){t.exports=n.p+"img/eye.d1d57c5.png"},1364:function(t,e,n){t.exports=n.p+"img/100.557368e.png"},1365:function(t,e,n){t.exports=n.p+"img/clock.85bbd3f.png"},1366:function(t,e,n){t.exports=n.p+"img/buy.8a58671.png"},1367:function(t,e,n){t.exports=n.p+"img/reload.22d8a5e.png"},1369:function(t,e,n){"use strict";var r=n(1188);n.n(r).a},1370:function(t,e,n){t.exports=n.p+"img/pushCourseIcon.b4c0d74.png"},1371:function(t,e,n){t.exports=n.p+"img/pushCouponIcon.fdfba94.png"},1372:function(t,e,n){t.exports=n.p+"img/pushCouponImage.3d2ee4a.png"},1373:function(t,e,n){"use strict";var r=n(1189);n.n(r).a},1374:function(t,e,n){"use strict";var r=n(1190);n.n(r).a},1378:function(t,e,n){"use strict";var r=n(1199);n.n(r).a},1379:function(t,e,n){"use strict";var r=n(1200);n.n(r).a},1526:function(t,e,n){"use strict";n(76),n(45),n(89);var r=n(33),o=(n(42),n(30),n(54),n(44),n(17)),c=(n(1050),n(280),n(43)),l=n(20),d=n(1077),m=n(1216),v=n(1061),h={props:{visible:{type:Boolean,required:!0},courseId:{type:Number,required:!0}},data:function(){return{starArr:["很差","差","一般","好","非常好"],form:{score:null,content:null},rules:{score:[{validator:this.vaildScore}],content:[{required:!0,message:"请填写评价!"}]}}},methods:{vaildScore:function(t,e,n){if(e<1||!e)return n("请评分!");n()},handleSubmit:function(){var t=this;this.$refs.ruleForm.validate(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=8;break}return e.next=3,Object(v.x)(t.courseId,t.form);case 3:r=e.sent,0===r.data.code&&(t.$message.success("提交成功!"),t.$emit("updateData")),e.next=9;break;case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},f=(n(1369),n(18)),C=Object(f.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-modal",{attrs:{title:null,footer:null,width:370,visible:t.visible},on:{cancel:function(e){return t.$emit("update:visible",!1)}}},[n("div",{staticClass:"fs18 c-333 textCenter mt10 f600"},[t._v("\n    课程已结束\n  ")]),t._v(" "),n("a-form-model",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules}},[n("a-form-model-item",{staticClass:"starWrap",attrs:{prop:"score"}},[n("a-rate",{model:{value:t.form.score,callback:function(e){t.$set(t.form,"score",e)},expression:"form.score"}})],1),t._v(" "),n("div",{staticClass:"textCenter fs14 scoreDec"},[t._v("\n      "+t._s(t.starArr[t.form.score-1])+"\n    ")]),t._v(" "),n("div",{staticClass:"mt15 c-333 f600 fs14 mb15"},[t._v("\n      写下您的评价\n    ")]),t._v(" "),n("a-form-model-item",{attrs:{prop:"content"}},[n("a-textarea",{attrs:{placeholder:"说点什么…",rows:4,maxLength:200},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),n("a-form-model-item",[n("a-button",{staticClass:"btns",on:{click:t.handleSubmit}},[t._v("\n        发表评价\n      ")])],1)],1)],1)}),[],!1,null,"7a59a691",null).exports,_={components:{Qrcode:n(1072).a},props:{loadMsg:{type:Object,required:!0},courseId:{type:Number,required:!0}},data:function(){return{config:l.a,currentTime:parseInt((new Date).getTime()/1e3),pushCourseHidden:!1,pushCourseRec:!1,pushCouponTipHidden:!0,couponTimer:null,codeOptions:{},codeShow:!1}},computed:{isShowCoupon:function(){var t;return(null===(t=this.loadMsg)||void 0===t?void 0:t.pushCoupon)&&this.loadMsg.pushCoupon.drawEnd>this.currentTime},isCouponUse:function(){return this.currentTime>this.loadMsg.pushCoupon.start&&this.loadMsg.pushCoupon.end>this.currentTime},realPrice:function(){var t=this.loadMsg.pushCoupon.money,e=this.coursePrice-t;return this.isShowCoupon?e>0?e:0:this.coursePrice},coursePrice:function(){var t=this.loadMsg.pushCourse,e=t.price,n=t.discountPrice,r=t.discountStart,o=t.discountEnd;return r&&r&&n&&this.currentTime>r&&o>this.currentTime?n:e}},mounted:function(){var t=this;this.pushCourseHidden=!1;var e=setTimeout((function(){t.pushCourseHidden=!0,clearTimeout(e)}),15e3),n=setTimeout((function(){t.pushCouponTipHidden=!1,clearTimeout(n)}),1e4);this.couponTimer=setInterval((function(){t.isShowCoupon?(t.pushCouponTipHidden=!0,setTimeout((function(){t.pushCouponTipHidden=!1}),1e4)):clearInterval(t.couponTimer)}),3e5)},beforeDestroy:function(){clearInterval(this.couponTimer)},methods:{couponClick:function(){this.pushCourseRec="pushCoupon",this.pushCouponTipHidden=!1,clearInterval(this.couponTimer)},buyClick:function(){this.loadMsg.apply?this.$router.push({path:"/courseDetail/".concat(this.loadMsg.pushCourse.id)}):this.isShowCoupon&&!this.loadMsg.drawStatus?this.pushCourseRec="pushCoupon":this.$emit("buyCourse",this.loadMsg.pushCourse.id)},modalCouponClick:function(){this.loadMsg.drawStatus?this.$router.push({path:"/courseDetail/".concat(this.loadMsg.pushCoupon.ownId)}):(this.codeOptions={value:"".concat(l.a.LINK.school_h5,"/courseDetail/").concat(this.courseId,"?inviterCode=").concat(this.loadMsg.inviterCode),size:100,title:"请打开微信扫一扫"},this.codeShow=!0)}}},y=(n(1373),Object(f.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return Object.keys(t.loadMsg).length>0?r("a-row",{staticClass:"pl20 recommendWrap",attrs:{type:"flex",justify:"space-between",align:"bottom"}},[r("a-col",{attrs:{span:18}},[Object.keys(t.loadMsg.pushCourse).length>0?r("div",{on:{click:function(e){t.pushCourseRec="pushCourse"}}},[r("a-row",{directives:[{name:"show",rawName:"v-show",value:!t.pushCourseHidden,expression:"!pushCourseHidden"}],staticClass:"pushCourse hand",attrs:{type:"flex"}},[r("a-col",[r("img",{attrs:{src:""+t.config.IMG_URL.default+t.loadMsg.pushCourse.poster,width:"106"}})]),t._v(" "),r("a-col",{staticClass:"pl10 courseDetailWrap",attrs:{flex:"1"}},[r("div",{staticClass:"twoLine fs12 f500 pushCourseName"},[t._v("\n            "+t._s(t.loadMsg.pushCourse.name+(t.loadMsg.pushCourse.period>0?"(第"+t.loadMsg.pushCourse.period+"期)":""))+"\n          ")]),t._v(" "),t.isShowCoupon?r("div",[r("span",{staticClass:"fs20 c-ED3 f600"},[t._v("¥"+t._s(t.realPrice))]),t._v(" "),r("span",{staticClass:"c-999 fakePrice"},[t._v("¥"+t._s(t.loadMsg.pushCourse.price))])]):r("div",{staticClass:"fs20 c-ED3 f600"},[t._v("\n            ¥"+t._s(t.coursePrice)+"\n          ")])]),t._v(" "),r("a-icon",{staticClass:"hand pushCourseIcon c-999",attrs:{type:"close-circle"},on:{click:function(e){e.stopPropagation(),t.pushCourseHidden=!0}}})],1),t._v(" "),r("div",[r("img",{staticClass:"hand",attrs:{src:n(1370),width:"77"}})])],1):t._e()]),t._v(" "),t.isShowCoupon?r("a-col",{staticClass:"textCenter hand pushCoupon",attrs:{span:6}},[t.loadMsg.drawStatus?t._e():r("img",{directives:[{name:"show",rawName:"v-show",value:t.pushCouponTipHidden,expression:"pushCouponTipHidden"}],staticClass:"pushCouponIcon",attrs:{src:n(1371),width:"62"}}),t._v(" "),r("img",{staticClass:"pushCouponImage",attrs:{src:n(1372),width:"88"},on:{click:t.couponClick}})]):t._e(),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.pushCourseRec,expression:"pushCourseRec"}],class:["c-333","fs16","f500","bg-fff","pb10",1===t.loadMsg.scene?"pushCourseModal":"pushCourseLiveModal"]},[r("div",{staticClass:"textCenter c-333 borderBottom pt5 pb5 fs16"},[t._v("\n      "+t._s("pushCourse"===t.pushCourseRec?"推荐课程":"优惠券")+"\n      "),r("a-icon",{staticClass:"hand pushCourseIcon c-999",attrs:{type:"close-circle"},on:{click:function(e){t.pushCourseRec=!1}}})],1),t._v(" "),"pushCourse"===t.pushCourseRec?r("a-row",{staticClass:"pd10",attrs:{type:"flex"}},[r("a-col",[r("img",{attrs:{src:""+t.config.IMG_URL.default+t.loadMsg.pushCourse.poster,height:"82"}})]),t._v(" "),r("a-col",{staticClass:"ml10",attrs:{flex:"1"}},[r("div",{staticClass:"twoLine fs14 f500 pushCourseName"},[t._v("\n          "+t._s(t.loadMsg.pushCourse.name+(t.loadMsg.pushCourse.period>0?"(第"+t.loadMsg.pushCourse.period+"期)":""))+"\n        ")]),t._v(" "),r("a-row",{attrs:{type:"flex",justify:"space-between",align:"bottom"}},[r("a-col",[r("div",[r("div",{staticClass:"c-999 fs12 fakePrice h16"},[t.isShowCoupon?r("span",[t._v("¥"+t._s(t.loadMsg.pushCourse.price))]):t._e()]),t._v(" "),r("div",{staticClass:"fs20 c-ED3 f600"},[t._v("\n                ¥"+t._s(t.isShowCoupon?t.realPrice:t.coursePrice)+"\n              ")])])]),t._v(" "),r("a-col",{staticClass:"c-fff fs12 pl15 pr15 pt5 pb5 hand buyBtns",on:{click:t.buyClick}},[t._v("\n            "+t._s(t.loadMsg.apply?"查看课程":t.isShowCoupon&&!t.loadMsg.drawStatus?"领券购买":"立即购买")+"\n          ")])],1)],1)],1):"pushCoupon"===t.pushCourseRec?r("div",{staticClass:"pt10"},[r("div",{staticClass:"pl30 c-fff fs12 couponWrap"},[r("div",{staticClass:"pt3 f600 c-674"},[t._v("\n          课程优惠券\n        ")]),t._v(" "),r("div",{staticClass:"iconFont"},[t._v("\n          有效券\n        ")]),t._v(" "),r("div",{staticClass:"fs16 mt5"},[t._v("\n          ¥ "),r("span",{staticClass:"fs36"},[t._v(t._s(t.loadMsg.pushCoupon.money))])]),t._v(" "),r("a-row",{staticClass:"pr15",attrs:{type:"flex",justify:"space-between",align:"middle"}},[r("a-col",{staticClass:"feeCondWrap"},[t._v("\n            "+t._s(t.loadMsg.pushCoupon.feeCond>0?"满"+t.loadMsg.pushCoupon.feeCond+"元可用":"无门槛")+"\n          ")]),t._v(" "),t.loadMsg.apply?r("a-col",{staticClass:"useBtn hasBuyBtn"},[t._v("\n            已购买\n          ")]):r("a-col",{staticClass:"hand f600 useBtn",on:{click:t.modalCouponClick}},[t._v("\n            "+t._s(t.loadMsg.drawStatus?"立即使用":"立即邀请")+"\n          ")]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.codeShow,expression:"codeShow"}],staticClass:"Qrcode",on:{click:function(e){t.codeShow=!1}}},[r("Qrcode",{attrs:{options:t.codeOptions}})],1)],1),t._v(" "),r("div",{staticClass:"mt7 h16 f500"},[r("span",{directives:[{name:"show",rawName:"v-show",value:t.isCouponUse,expression:"isCouponUse"}]},[t._v("\n            有效期:  "+t._s(t.$changeTime(t.loadMsg.pushCoupon.start,"YYYY/MM/DD"))+" ~ "+t._s(t.$changeTime(t.loadMsg.pushCoupon.end,"YYYY/MM/DD"))+"\n          ")])]),t._v(" "),r("div",{staticClass:"mt16 pr15"},[t._v("\n          "+t._s(t.loadMsg.drawStatus?"适用于:  "+t.loadMsg.pushCoupon.ownName:"领取条件:  邀请1位好友进直播间,双方均可获得此优惠券")+"\n        ")])],1)]):t._e()],1)],1):t._e()}),[],!1,null,"c6da51e8",null).exports),w={props:{courseId:{type:Number,required:!0}},data:function(){return{data:{},timer:null,isUpdate:!0}},mounted:function(){var t=this;this.getLastBuyData(),this.timer=setInterval((function(){t.getLastBuyData()}),3e4)},beforeDestroy:function(){clearInterval(this.timer)},methods:{getLastBuyData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,code,data,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.l)(t.courseId);case 2:n=e.sent,r=n.data,code=r.code,data=r.data,0===code&&(t.isUpdate=(null==t||null===(o=t.data)||void 0===o?void 0:o.nickName)!==data.nickName,t.data=data,t.isUpdate&&setTimeout((function(){t.isUpdate=!1}),5e3));case 7:case"end":return e.stop()}}),e)})))()}}},k=(n(1374),Object(f.a)(w,(function(){var t=this.$createElement,e=this._self._c||t;return Object.keys(this.data).length>0&&this.data.nickName?e("div",{directives:[{name:"show",rawName:"v-show",value:this.isUpdate,expression:"isUpdate"}],staticClass:"CourseLastBuyWrap"},[e("div",{staticClass:"CourseLastBuy"},[this._v("\n    "+this._s(this.data.nickName+"已购买了该推荐课程")+"\n  ")])]):this._e()}),[],!1,null,"9444afee",null).exports),x=n(1279),I=n(8);function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function T(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var j={components:{ThirdShare:d.a,ComfirmOrder:m.a,CourseEvaluate:C,VideoRecommend:y,CourseLastBuy:k,CourseDetailContent:x.a},props:{courseData:{type:Object,required:!0}},data:function(){return{data:{},liveInfo:{},config:l.a,timer:null,liveTimer:null,liveInfoTimer:null,shareData:{options:{}},chatRoom:null,player:null,liveSdk:null,scene:0,watchedTime:0,isChange:!0,liveId:null,isPreviewEnd:!1,visible:!1,evalVisible:!1,isLiveEnd:!1,loadMsg:{},commonOrderId:0,liveTimeInterval:2e3}},computed:{tops:function(){return this.$store.state.home.homeTops.tops}},watch:{$route:function(){this.scene=0,this.chatRoom=null,this.player&&this.player.dispose(),this.liveSdk&&this.liveSdk.destroy(!0),this.liveSdk=null,this.player=null,clearTimeout(this.timer),clearTimeout(this.liveTimer),clearTimeout(this.liveInfoTimer),this.init()}},mounted:function(){this.init()},beforeDestroy:function(){this.liveSdk&&this.liveSdk.destroy(!0),this.player&&this.player.dispose(),this.player=null,this.chatRoom=null,this.liveSdk=null,clearTimeout(this.timer),clearTimeout(this.liveTimer),clearTimeout(this.liveInfoTimer)},methods:{init:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,d,m,h,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.liveId=t.$route.query.liveId||t.$route.params.id,n=t.courseData.lives.find((function(p){return p.id===+t.liveId})),r=t.courseData.apply?0:n.previewTime,d={},(t.$route.query.isPreview||r)&&(d.preview=1),(m=c.storage.get("inviterObj"))&&+m.courseId===t.courseData.courseId&&(d.inviterCode=m.inviterCode,c.storage.remove("inviterObj")),e.next=9,Object(v.m)("".concat(t.courseData.courseId,"/").concat(t.liveId),d);case 9:h=e.sent,0===(data=h.data).code&&(t.scene=data.data.scene,t.$nextTick(Object(o.a)(regeneratorRuntime.mark((function e(){var n,d,m,h,code,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.data=data.data,window.PolyvLiveSdk||window.PolyvChatRoom||1===t.data.scene){e.next=9;break}return e.next=4,Object(c.dynamicScript)(l.a.liveUrl,"PolyvLiveSdk");case 4:return e.next=6,Object(c.dynamicScript)(l.a.chatUrl,"PolyvChatRoom");case 6:Object(c.dynamicCss)(l.a.chatCss),e.next=15;break;case 9:if(window.Aliplayer||!t.data.videoId||1!==t.data.scene){e.next=15;break}return e.next=12,Object(c.dynamicScript)(l.a.recordUrl,"Aliplayer");case 12:return e.next=14,Object(c.dynamicScript)("/schoolStatic/js/aliplayercomponents-1.0.6.min.js"," AliPlayerComponent");case 14:Object(c.dynamicCss)(l.a.recordCSS);case 15:if(1!==t.data.scene&&(t.chatRoom=new window.PolyvChatRoom({roomId:Number(t.data.channelId),userId:t.data.chatUserId,nick:t.data.chatNickName?t.data.chatNickName:"艾思用户",pic:t.data.chatAvatar?"".concat(t.data.chatAvatar):"".concat(l.a.staticImgUrl,"/user/avator.png"),userType:"slice",token:t.data.chatToken[0],mediaChannelKey:t.data.chatToken[1],version:"2.0",container:"#wrap",width:"100%",height:"100%",enableAsk:!1,showUserList:!1}),n=t.chatRoom.chat,t.liveSdk=new window.PolyvLiveSdk({channelId:Number(t.data.channelId),sign:t.data.sign,timestamp:t.data.timestamp,appId:t.data.appId,user:{userId:t.data.chatUserId,userName:t.data.chatNickName?t.data.chatNickName:"艾思用户",pic:t.data.chatAvatar?"".concat(t.data.chatAvatar):"".concat(l.a.staticImgUrl,"/user/avator.png")},socket:n.socket}),d={pptEl:"#ppt",el:"#player",type:"auto",autoplay:!0,audioMode:!1,width:"100%",height:"100%",pptWidth:"100%",pptHeight:"100%",controller:!0,pptNav:!0,switchPlayer:!0,pptNavBottom:"30px",pptPlaceholder:!0,fileId:void 0,url:void 0,sessionId:void 0},t.liveSdk.on(window.PolyvLiveSdk.EVENTS.CHANNEL_DATA_INIT,(function(){t.liveSdk.setupPlayer(T({},d)),t.liveSdk.player.on("playing",(function(){t.getLiveInfo()})),setTimeout((function(){t.liveSdk.player.setVolume(.5)}),500),t.liveSdk.player.on("switchPlayer",(function(){t.isChange=!t.isChange,setTimeout((function(){t.liveSdk.player.resize(),t.liveSdk.player.switchPPTDocMode(!0)}),0)})),3===t.data.scene&&document.getElementsByClassName("pv-icon-fullscreen")[0].addEventListener("click",t.setFullScreen,!1),t.liveReport()}))),1===t.data.scene&&(t.player=new window.Aliplayer({id:"players",width:"828",height:"486",autoplay:!1,vid:t.data.videoId,playauth:t.data.playAuth,playConfig:{MtsHlsUriToken:t.data.hlsUriToken},encryptType:1,preload:!1,hlsUriToken:t.data.hlsUriToken,isPreview:t.$route.query.isPreview||r,components:[{name:"RateComponent",type:window.AliPlayerComponent.RateComponent}]},(function(e){t.data.watched&&t.data.watched<t.data.duration&&(!t.$route.query.isPreview||r)&&e.seek(t.data.watched),t.$route.query.isPreview&&t.data.previewTime>0?e.setPreviewTime(60*t.data.previewTime):r>0&&e.setPreviewTime(60*r)})),t.player.on("playing",(function(){t.report()})),t.player.on("pause",(function(){clearTimeout(t.timer)})),t.player.on("ended",Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t.$route.query.isPreview||r>0)&&(t.isPreviewEnd=!0),t.watchedTime=parseInt(t.player.getCurrentTime()),n={courseId:t.courseData.courseId,liveId:t.liveId,options:{duration:parseInt(t.player.getDuration()),watched:t.watchedTime}},e.next=5,Object(v.v)(n);case 5:clearTimeout(t.timer),t.courseData.evaluated||t.$route.query.isPreview||(t.evalVisible=!0);case 7:case"end":return e.stop()}}),e)}))))),t.shareData={url:window.location.href,desc:"我已参加这个课程，你也来一起参加吧!",title:t.data.name,pics:"",options:{value:"".concat(l.a.LINK.school_h5,"/videoDetail/").concat(t.liveId),size:100,title:"请打开微信扫一扫!"},courseId:t.courseData.courseId},!t.data.hasOwnProperty("push")){e.next=26;break}return e.next=21,Object(v.r)({courseId:t.courseData.courseId,liveId:t.liveId});case 21:m=e.sent,h=m.data,code=h.code,f=h.data,0===code&&(t.loadMsg=T(T({},f),{},{scene:t.scene}));case 26:case"end":return e.stop()}}),e)})))));case 12:case"end":return e.stop()}}),e)})))()},collectCourse:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.c)(t.courseData.courseId,!t.courseData.favorite);case 2:n=e.sent,0===n.data.code&&t.$set(t.courseData,"favorite",!t.courseData.favorite);case 5:case"end":return e.stop()}}),e)})))()},report:function(){var t=this;this.timer=setTimeout(Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=parseInt(t.player.getCurrentTime()))-t.watchedTime<9)){e.next=3;break}return e.abrupt("return");case 3:return r=parseInt(t.player.getDuration()),o={courseId:t.courseData.courseId,liveId:t.liveId,options:{duration:r,watched:n}},e.next=7,Object(v.v)(o);case 7:c=e.sent,0===c.data.code&&(t.watchedTime=n,t.report());case 10:case"end":return e.stop()}}),e)}))),1e4)},liveReport:function(){var t=this;this.liveTimer=setTimeout(Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0!==(n=parseInt(t.liveSdk.player.currentTime))&&n-t.watchedTime<9)){e.next=3;break}return e.abrupt("return");case 3:return r={courseId:t.courseData.courseId,liveId:t.liveId,options:{duration:0,watched:n}},e.next=6,Object(v.v)(r);case 6:o=e.sent,0===o.data.code&&(t.watchedTime=n,t.liveReport());case 9:case"end":return e.stop()}}),e)}))),1e4)},getLiveInfo:function(){var t=this;clearTimeout(this.liveInfoTimer),this.liveInfoTimer=setTimeout((function(){I.default.jsonp("".concat(l.a.POST.school_pc,"/school/course/info/live/").concat(t.liveId)).then((function(e){t.$set(t.data,"visits",e.visits),t.courseData.evaluated||t.isLiveEnd||2!==e.liveStatus||(t.evalVisible=!0,t.isLiveEnd=!0),t.liveTimeInterval=1===e.liveStatus?5e3:2e3,t.getLiveInfo()}))}),this.liveTimeInterval)},previewLoad:function(){this.isPreviewEnd=!1,this.player.seek(0),this.player.replay()},setFullScreen:function(){this.liveSdk.player.fullScreen.request(document.getElementsByClassName("ppt")[0])},evaluatedUpdate:function(){this.$set(this.courseData,"evaluated",!0),this.evalVisible=!1},buyCourse:function(t){this.visible=!0,this.commonOrderId=t}}};n(1378);function L(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function R(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?L(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):L(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var S={components:{VideoDetailHeader:Object(f.a)(j,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pt15 pb20 page"},[r("div",{staticClass:"content"},[r("div",[r("div",{staticClass:"c-333 fs16 f500"},[t._v("\n        "+t._s(t.data.name)+"\n      ")]),t._v(" "),r("div",{staticClass:"headerWrap c-666 fs12"},[r("div",{staticClass:"headerWrapLeft"},[r("div",[r("img",{staticClass:"icon",attrs:{src:n(1363)}}),t._v(" "),r("span",{staticClass:"c-666 fs12"},[t._v("观看人数："+t._s(t.data.visits)+"人次")])]),t._v(" "),r("div",{staticClass:"ml18"},[r("img",{staticClass:"icon",attrs:{src:n(1364)}}),t._v(" "),r("span",{staticClass:"c-666 fs12"},[t._v("讲师："+t._s(t.data.teacherName))])]),t._v(" "),2===t.scene||3===t.scene?r("div",{staticClass:"ml25"},[r("img",{staticClass:"icon",attrs:{src:n(1365)}}),t._v(" "),r("span",{staticClass:"c-666 fs12"},[t._v("时间："+t._s(t.$changeTime(t.data.start)))])]):t._e()]),t._v(" "),r("div",{staticClass:"headerWrapRight"},[r("ThirdShare",{attrs:{data:t.shareData}}),t._v(" "),r("div",{staticClass:"collect textCenter hand",on:{click:t.collectCourse}},[t.courseData.favorite?r("img",{staticClass:"collectImg",attrs:{src:n(1164)}}):r("img",{staticClass:"collectImg",attrs:{src:n(1165)}}),t._v(" "),r("span",{staticClass:"fs14 c-333"},[t._v(t._s(t.courseData.favorite?"已收藏":"未收藏"))])])],1)]),t._v(" "),1===t.scene?r("div",{staticClass:"container mt16"},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.isPreviewEnd,expression:"isPreviewEnd"}],staticClass:"previewWrap textCenter",staticStyle:{width:"828px",height:"486px"}},[t._m(0),t._v(" "),r("div",{staticClass:"c-fff buyBtn mt60 hand",on:{click:function(e){return t.buyCourse(t.courseData.courseId)}}},[r("img",{staticClass:"mr5",attrs:{src:n(1366)}}),t._v(" "),r("span",{staticClass:"ml5"},[t._v("购买课程")])]),t._v(" "),r("div",{staticClass:"reload mt20 hand",on:{click:t.previewLoad}},[r("img",{staticClass:"reloadIcon",attrs:{src:n(1367)}}),t._v(" "),r("span",[t._v("重新播放")])])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.isPreviewEnd,expression:"!isPreviewEnd"}],staticStyle:{width:"828px",height:"486px"},attrs:{id:"players"}}),t._v(" "),r("div",{staticClass:"videoWrap"},[r("ul",{staticClass:"c-fe ulWrap"},t._l(t.tops,(function(e,n){return r("li",{key:n,staticClass:"oneLine item hand"},[e.id?r("nuxt-link",{staticStyle:{color:"#fff"},attrs:{to:"/courseDetail/"+e.id}},[t._v("\n                "+t._s(e.name)+"\n              ")]):r("span",{staticClass:"ml20"},[t._v(t._s(e.name))])],1)})),0),t._v(" "),r("VideoRecommend",{attrs:{loadMsg:t.loadMsg,courseId:t.courseData.courseId},on:{buyCourse:t.buyCourse}})],1)]):t._e(),t._v(" "),3===t.scene||2===t.scene?r("div",{class:[3===t.scene?"liveContainer":"liveCon","mt16"]},[r("div",{class:t.isChange?"ppt":"player",attrs:{id:"ppt"}}),t._v(" "),r("div",{class:t.isChange?"player":"ppt",attrs:{id:"player"}}),t._v(" "),r("div",{attrs:{id:"wrap"}}),t._v(" "),t.loadMsg&&t.loadMsg.pushCourse&&t.loadMsg.pushCourse.id?r("div",[r("CourseLastBuy",{attrs:{courseId:t.loadMsg.pushCourse.id}})],1):t._e(),t._v(" "),r("VideoRecommend",{staticClass:"VideoRecommend",attrs:{loadMsg:t.loadMsg,courseId:t.courseData.courseId},on:{buyCourse:t.buyCourse}})],1):t._e()]),t._v(" "),r("div",{staticClass:"mt20"},[r("CourseDetailContent",{attrs:{data:t.courseData,isVideoPage:!0}},[1===t.scene&&t.loadMsg&&t.loadMsg.pushCourse&&t.loadMsg.pushCourse.id?r("div",{staticClass:"pt20",attrs:{slot:"CourseLastBuy"},slot:"CourseLastBuy"},[r("CourseLastBuy",{attrs:{courseId:t.loadMsg.pushCourse.id}})],1):t._e()])],1)]),t._v(" "),t.visible?r("ComfirmOrder",{attrs:{visible:t.visible,courseId:t.commonOrderId},on:{"update:visible":function(e){t.visible=e}}}):t._e(),t._v(" "),t.evalVisible?r("CourseEvaluate",{attrs:{visible:t.evalVisible,courseId:t.courseData.courseId},on:{"update:visible":function(e){t.evalVisible=e},updateData:t.evaluatedUpdate}}):t._e()],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"c-fff fs16 f500"},[e("div",{staticClass:"topTitle"},[this._v("\n              尊敬的用户:\n            ")]),this._v(" "),e("div",[this._v("\n              试听已结束，请购买该课程。\n            ")])])}],!1,null,"14dc75b4",null).exports},data:function(){return{data:{},courseData:{}}},mounted:function(){this.getHandleData()},methods:{getHandleData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,code,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$route.query.courseId){e.next=6;break}return e.next=3,Object(v.k)("".concat(t.$route.query.courseId));case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,Object(v.k)(0,{liveId:"".concat(t.$route.params.id)});case 8:e.t0=e.sent;case 9:if(0!==(n=e.t0).data.code){e.next=24;break}if(!Object.keys(0===t.$store.state.home.homeTops.length)){e.next=14;break}return e.next=14,t.$store.dispatch("home/getHomeTops");case 14:return r={},n.data.data.lives.forEach((function(t){r[t.chapterName]||(r[t.chapterName]=[]),r[t.chapterName].push(t)})),n.data.data.livesObj=r,e.next=19,Object(v.n)(n.data.data.courseId);case 19:o=e.sent,c=o.data,code=c.code,l=c.data,0===code&&(t.courseData=R(R({},n.data.data),l));case 24:case"end":return e.stop()}}),e)})))()}},head:function(){return{title:this.courseData.name||"课程详情",meta:[{hid:"description",name:"description",content:this.courseData.name||"课程详情"}]}}},D=(n(1379),Object(f.a)(S,(function(){var t=this.$createElement,e=this._self._c||t;return this.courseData.courseId?e("div",{staticClass:"videoDetail"},[e("VideoDetailHeader",{attrs:{courseData:this.courseData}})],1):this._e()}),[],!1,null,"11486c91",null));e.a=D.exports},2234:function(t,e,n){"use strict";n.r(e);var r={components:{VideoDetail:n(1526).a},head:function(){return{title:"视频播放 —艾思云课堂"}}},o=n(18),component=Object(o.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{"no-ssr":""}},[e("VideoDetail")],1)}),[],!1,null,null,null);e.default=component.exports}}]);